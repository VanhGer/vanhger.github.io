<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hiimvanhg</title>
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/post.css">
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Đồng thuận trên mạng</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Đồng thuận trên mạng" />
<meta name="author" content="vanhg" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ở bài trước, ta đã biết rằng các node sẽ tham gia vào giao thức có thể là Adversary và có thể gây hại cho blockchain. Vậy làm cách nào để chọn các node tham gia vào consensus." />
<meta property="og:description" content="Ở bài trước, ta đã biết rằng các node sẽ tham gia vào giao thức có thể là Adversary và có thể gây hại cho blockchain. Vậy làm cách nào để chọn các node tham gia vào consensus." />
<link rel="canonical" href="http://localhost:4000/blog/2023/07/22/dong-thuan-tren-mang" />
<meta property="og:url" content="http://localhost:4000/blog/2023/07/22/dong-thuan-tren-mang" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-07-22T00:00:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Đồng thuận trên mạng" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"vanhg"},"dateModified":"2023-07-22T00:00:00+07:00","datePublished":"2023-07-22T00:00:00+07:00","description":"Ở bài trước, ta đã biết rằng các node sẽ tham gia vào giao thức có thể là Adversary và có thể gây hại cho blockchain. Vậy làm cách nào để chọn các node tham gia vào consensus.","headline":"Đồng thuận trên mạng","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2023/07/22/dong-thuan-tren-mang"},"url":"http://localhost:4000/blog/2023/07/22/dong-thuan-tren-mang"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <div class="header">
  <div class = "tab_container">
      
        <a href="/" 
        
        class = "tab_btn">
        Home
        </a>
      
        <a href="/about.html" 
        
        class = "tab_btn">
        About
        </a>
      
        <a href="/blog.html" 
        
        class = "tab_btn">
        Blog
        </a>
      
        <a href="/staff.html" 
        
        class = "tab_btn">
        Staff
        </a>
      
  </div>
</div>

    <div class = "default_content">
        <h1 class = "post_title">Đồng thuận trên mạng</h1>
        <p class = "post_detail">
            vanhg - 22 Jul 2023 
        </p>
        <div class = "img_container">
            <img src =  class = "post_img">
        </div>
        <div class = "post_content">
          <p>Ở bài trước, ta đã biết rằng các node sẽ tham gia vào giao thức có thể là Adversary và có thể gây hại cho blockchain. Vậy làm cách nào để chọn các node tham gia vào consensus.</p>

<h2 id="bitcoin-mining">Bitcoin Mining</h2>
<p>Bitcoin chọn các nodes tham gia vào giao thức bằng các sử dụng POW, giải bài toán tìm số nonce (xem chi tiết <a href="http://127.0.0.1:4000/blog/2023/07/20/cau-tao-block-va-pow">tại</a>). 
Bitcoin sử dụng Nakamoto consensus: <br /> 
<strong> Quy tắc đề xuất: </strong> ở thời điểm nào, mỗi miner trung thực mở rộng chuỗi nặng nhất (với độ khó cao nhất).
<strong> Quy tắc confirmation: </strong> Miner confirm 1 block (với tiền tố của nó) mà ở độ sâu k trong chuỗi nó nhìn được.</p>
<ul>
  <li>Ví dụ trong thực tế: k = 6.</li>
  <li>Miner và client chấp nhận các Tx ở block cuối cùng được confirm và tiền tố của nó như là log.</li>
  <li>Leader được chọn bởi POW.</li>
</ul>

<p>So sánh giữa Bitcoin và Streamlet /// ảnh <br /></p>
<ul>
  <li>Streamlet thì không dynamic available: Nó sẽ không đảm bảo liveness nếu n/3 hoặc hơn các nodes offline.</li>
  <li>Bitcoin thì dynamic available: tiếp tục confirm Tx khi miningpower offline. <br /></li>
</ul>

<h2 id="consensus-ở-internet">Consensus ở Internet</h2>
<p>Các nodes tham gia mở, tức là các adversary có thể tạo nhiều node và người tham gia trung thực có thể online hoặc offline và đi tuỳ ý. Do đó, mục tiêu đặt ra là phải hạn chế sự tham gia của Adversary, đồng thời duy trì dynamic available của giao thức.</p>

<h2 id="security">Security</h2>
<p>Bitcoin đảm bảo an toàn dưới mạng đồng bộ, với tỉ lệ mining power do Adversary kiểm soát 𝜷 &lt; 1/2</p>

<h3 id="nakamotos-private-attack-𝜷--12">Nakamoto’s Private Attack: 𝜷 ≥ 1/2</h3>
<p>Khi adversay đào block mới, nhưng không công bố. Các miner trung thực tiếp tục đào mà không biết về các block ẩn này. Khi adversary công bố chuỗi đó (đã tạo đủ block), chuỗi đó trở thành chuỗi dài hơn chuỗi mà miners trung thực đào được (vì 𝜷 ≥ 1/2), các block đào bởi các miner trung thực sẽ bị bỏ.</p>
<h3 id="forking">Forking</h3>
<p>Vì Network delay, các honest blocks ở cùng 1 độ cao. Do đó, tỉ lệ phát triển các khối honest sẽ chậm hơn so với 1 - 𝜷. Do đó, Adversary sẽ thành công nếu 𝜷 ≥ (1 - 𝜷) / 2 (Trường hợp chỉ có 2 chuỗi fork).</p>
<h3 id="security-1">Security</h3>
<p>Nếu 𝜷 &lt; 1/2, tồn tại tỉ lệ Mining đủ nhỏ 𝜆(Δ,𝛽) = 𝜆A + 𝜆H mà Bitcoin thoả mãn security với tỉ lệ lỗi chấp nhận là 𝑒^(−Ω(𝑘)) dưới mạng đồng bộ. Đây là xác xuất lỗi với comfirmation. Đây chính là lý do sau 10 phút mới tạo ra khối mới chứ không phải là 1 giây.</p>

<h4 id="chứng-minh">Chứng minh</h4>
<p>Nhận thấy, với các khối trung thực được tạo, vẫn có thể tạo ra fork vì khối sau được tạo ra quá gần khối trước (&lt; Δ). Lúc này, khối tạo sau được gọi là Tailgater. Ngược lại, nếu khối được tạo ở thời điểm t, và không tồn tại khối nào được tạo trong khoảng thời gian từ t - Δ đến t, thì khối đó được gọi là Non-Tailgater. Các khối Non-Tailgater thì có độ cao riêng biệt nhau.</p>

<p>Giờ, ta cần tìm tỉ lệ các khối trung thực là Tailgater hoặc Non-Tailgater. Xem thời gian tạo các khối là biến ngẫu nhiên Poisson, thì khoảng thời gian T giữa 2 khối tuân theo phân bố mũ. <br /> 
Gọi mining rate là λ (1/ minutes). Với Bitcoin λ = 1/10.<br />
Theo phân bố mũ, xác suất để T lớn hơn s bất kì là: P[T &gt; s] = 𝑒^(-λs). Suy ra, nếu s = Δ thì tỉ lệ honest block tạo ra là Non-Tailgater là g = P[T &gt; Δ] =  𝑒^(-λΔ), Tailgater là 1 - g.</p>

<p>Ta thấy, các Non-tailgater block tăng với tỉ lệ: gλ, các block này có height khác nhau, vì thế chuỗi dài nhất cũng tăng ít nhất với tỉ lệ này. =&gt; liveness.</p>

<p>Với Safety, ta cần thêm các khái niệm sau:</p>
<ul>
  <li>Block B được đào ở thời gian t, nếu không có honest block nào khác được đào từ t−Δ đến t+Δ thì B gọi là loner. Do đó, loner là block duy nhất ở độ cao đó. <br />
Để vi phạm safety, cần phải có hai chuỗi khác nhau hơn k khối, cả hai đều được thông qua bởi các node trung thực. Điều này tương đương với các Adversary phải khai thác các khối nhanh hơn các khối loner được tạo ra. Gọi tỉ lệ mine của Adversary là 𝜷. Tỉ lệ mine loner là g * g * λ. <br /> Do đó, Nakamoto đảm bảo security nếu g * g * λ &gt; 𝜷.</li>
</ul>

<h2 id="kêt-luận">Kêt luận</h2>
<p>Nếu mọi người muốn xem chi tiết về cách chứng minh, hãy truy cập vào <a href="https://eprint.iacr.org/2019/943.pdf">đây</a>.</p>

        </div>
        
    </div>
  </body>
  <footer>
    
  </footer>
</html>  