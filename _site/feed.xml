<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="3.9.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" hreflang="en" /><updated>2024-01-09T00:00:04+07:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Hiimvanhg</title><subtitle></subtitle><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><entry><title type="html">Bridging vÃ  MEV</title><link href="http://localhost:4000/blog/2023/08/29/bridging-and-mev/" rel="alternate" type="text/html" title="Bridging vÃ  MEV" /><published>2023-08-29T00:00:00+07:00</published><updated>2023-08-29T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/08/29/bridging-and-mev</id><content type="html" xml:base="http://localhost:4000/blog/2023/08/29/bridging-and-mev/">&lt;p&gt;Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u cÃ¡c báº¡n Ä‘áº¿n MEV vÃ  Bridging giá»¯a cÃ¡c blockchain khÃ¡c nhau.&lt;/p&gt;

&lt;h2 id=&quot;heading-mev&quot;&gt;MEV&lt;/h2&gt;
&lt;h3 id=&quot;heading-khÃ¡i-niá»‡m&quot;&gt;KhÃ¡i niá»‡m&lt;/h3&gt;
&lt;p&gt;MEV lÃ  Maximal Extractable Value. ÄÃ¢y lÃ  giÃ¡ trá»‹ lá»›n nháº¥t cÃ³ thá»ƒ thu Ä‘Æ°á»£c tá»« viá»‡c sáº£n xuáº¥t cÃ¡c block vÆ°á»£t qua cÃ¡c pháº§n thÆ°á»Ÿng block tiÃªu chuáº©n vÃ  phÃ­ gas báº±ng viá»‡c thÃªm, loáº¡i bá», thay Ä‘á»•i thá»© tá»± cÃ¡c Tx trong khá»‘i.&lt;/p&gt;

&lt;h3 id=&quot;heading-searchers&quot;&gt;Searchers&lt;/h3&gt;
&lt;p&gt;Searchers lÃ  nhá»¯ng ngÆ°á»i post cÃ¡c Tx Ä‘á»ƒ cÃ¢n báº±ng thá»‹ trÆ°á»ng, thanh lÃ½ vÃ  láº¥y lá»£i nhuáº­n. VÃ­ dá»¥: &lt;br /&gt;
Uniswap DAI/USDC cÃ³ ExchangeRate lÃ  1.001, trong khi Sushiswap lÃ  1.002.  LÃºc nÃ y, Searchers cÃ³ thá»ƒ vay 1 khoáº£n DAI, Ä‘á»•i DAI thÃ nh USDC trong Uniswap rá»“i dÃ¹ng nÃ³ Ä‘á»ƒ Ä‘á»•i láº¡i DAI trong Sushiswap.  &lt;br /&gt;
NgoÃ i ra, cÃ²n nhiá»u cÃ¡ch Ä‘á»ƒ nháº­n MEV tá»« viá»‡c thay Ä‘á»•i chuá»—i Tx (Bundle).\&lt;/p&gt;

&lt;h3 id=&quot;heading-váº¥n-Ä‘á»-cá»§a-mev&quot;&gt;Váº¥n Ä‘á» cá»§a MEV&lt;/h3&gt;
&lt;p&gt;Khi searchers post Tx lÃªn mempool, nhá»¯ng Ä‘iá»u sau cÃ³ thá»ƒ xáº£y ra:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Validator: cÃ³ thá»ƒ tá»± táº¡o Tx cá»§a há» vá»›i cÃ¡ch tÆ°Æ¡ng tá»± Tx cá»§a searchers nhÆ°ng ngÆ°á»i thá»¥ hÆ°á»Ÿng sáº½ lÃ  validator Ä‘Ã³ vÃ  Ä‘áº·t nÃ³ trÆ°á»›c Tx cá»§a searchers.&lt;/li&gt;
  &lt;li&gt;Searchers khÃ¡c: tá»± táº¡o Tx cá»§a há» nhÆ°ng vá»›i phÃ­ gas Æ°u tiÃªn (maxPriorityFee) cao hÆ¡n. (ThÆ°á»ng Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi cÃ¡c bots).&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-háº­u-quáº£&quot;&gt;Háº­u quáº£:&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt; Vá»›i Honest users: &lt;/strong&gt; Viá»‡c submit láº¡i nhiá»u láº§n cÃ¡c Tx vá»›i phÃ­ gas Æ°u tiÃªn cao hÆ¡n cho Ä‘áº¿n khi validator chá»n Ä‘Æ°á»£c 1 Tx trong Ã­t giÃ¢y (Äáº¥u giÃ¡ gas) sáº½ dáº«n Ä‘áº¿n viá»‡c táº¯c ngháº½n vÃ  phÃ­ gas cao.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Vá»›i consensus: &lt;/strong&gt; Táº¥n cÃ´ng vÃ o chuá»—i dÃ i nháº¥t. LÃ½ do vÃ¬ MEV sáº½ táº¡o lá»£i nhuáº­n cho miner nhiá»u hÆ¡n pháº§n thÆ°á»Ÿng khá»‘i.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; GÃ¢y ra Centralization &lt;/strong&gt;: CÃ¡c validator cÃ³ thá»ƒ trá»™m MEV Tx tá»« cÃ¡c searchers. Do Ä‘Ã³ nhiá»u searchers chá»‰ gá»­i Tx cho 1 vÃ i validator mÃ  há» tin tÆ°á»Ÿng. LÃ¢u dáº§n sáº½ khiáº¿n má»™t sá»‘ Validators giá»¯ sá»‘ lÆ°á»£ng lá»›n cÃ¡c Tx.&lt;/p&gt;

&lt;h3 id=&quot;heading-giáº£i-phÃ¡p-proposer-builder-separation-pbs&quot;&gt;Giáº£i phÃ¡p: Proposer Builder Separation (PBS)&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt; Má»¥c tiÃªu: &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Giáº£m viá»‡c Ä‘áº¥u giÃ¡ gas&lt;/li&gt;
  &lt;li&gt;Thay vÃ o Ä‘Ã³, táº¡o ra má»™t open market mÃ  searchers cáº¡nh tranh vá» vá»‹ trÃ­ bundle cá»§a há» trong block.&lt;/li&gt;
  &lt;li&gt;Má»i validators cÃ³ thá»ƒ kiáº¿m MEV payment tá»« searchers. Tá»« Ä‘Ã³ trÃ¡nh viá»‡c centralization.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minh hoáº¡:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Builder &lt;/strong&gt;: thu tháº­p cÃ¡c Bundles vÃ  Txs sau Ä‘Ã³ build 1 block. (trong block bao gá»“m feeRecipient (MEV offer) cho validator).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Relay &lt;/strong&gt;: thu nháº­n cÃ¡c blocks, chá»n block vá»›i MEV offer lá»›n nháº¥t:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Gá»­i block header (vÃ  MEV offer) cho block proposer.&lt;/li&gt;
  &lt;li&gt;KhÃ´ng tiáº¿t lá»™ ná»™i dung bÃªn trong khá»‘i cho propser.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Proposer &lt;/strong&gt;: chá»n offer tá»‘t nháº¥t vÃ  kÃ­ header vá»›i staking key cá»§a nÃ³. Sau Ä‘Ã³ Relay sáº½ tiáº¿t lá»™ ná»™i dung block. Sau Ä‘Ã³ proposer sáº½ gá»­i block lÃªn network.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Cá»¥ thá»ƒ &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Searchers sáº½ pháº£i tháº¯ng 2 cuá»™c Ä‘áº¥u giÃ¡ Ä‘á»ƒ bundle cá»§a há» Ä‘Æ°á»£c Ä‘Æ°a vÃ o block (lÃ  builder auction vÃ  relay auction).&lt;/li&gt;
  &lt;li&gt;Searchers pháº£i lÃ m viá»‡c vá»›i builder mÃ  há» tin tÆ°á»Ÿng vÃ  pháº£i tin tÆ°á»Ÿng relay lÃ m viá»‡c cÃ¹ng vá»›i builder Ä‘Ã³. Searchers khÃ´ng cáº§n pháº£i tin Proposer.&lt;/li&gt;
  &lt;li&gt;Proposer khÃ´ng thá»ƒ bá» lá»¡ slot. Náº¿u relay khÃ´ng Ä‘Æ°a cho há» block há»£p lá»‡, proposer sáº½ tá»± táº¡o block tá»« mempool cá»§a nÃ³.&lt;/li&gt;
  &lt;li&gt;Khi proposer kÃ­ header, nÃ³ khÃ´ng thá»ƒ kÃ­ khá»‘i khÃ¡c, náº¿u khÃ´ng sáº½ bá»‹ slash.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Má»™t sá»‘ vÃ­ dá»¥ vá» relay lÃ  Flashbot, BloXroute.&lt;/p&gt;

&lt;h2 id=&quot;heading-kháº£-nÄƒng-tÆ°Æ¡ng-tÃ¡c-giá»¯a-cÃ¡c-blockchain&quot;&gt;Kháº£ nÄƒng tÆ°Æ¡ng tÃ¡c giá»¯a cÃ¡c blockchain.&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt; TÆ°Æ¡ng tÃ¡c &lt;/strong&gt;: Cho phÃ©p user chuyá»ƒn tÃ i sáº£n qua cÃ¡c chain khÃ¡c nhau. &lt;br /&gt;
&lt;strong&gt; Káº¿t há»£p &lt;/strong&gt;: Cho phÃ©p 1 DApp tá»« 1 chuá»—i cÃ³ thá»ƒ  gá»i DApp tá»« chuá»—i khÃ¡c.&lt;/p&gt;

&lt;p&gt;Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y, cáº§n sá»­ dá»¥ng cÃ¡c Bridges.&lt;/p&gt;

&lt;h3 id=&quot;heading-vÃ­-dá»¥-chuyá»ƒn-btc-trong-ethereum&quot;&gt;VÃ­ dá»¥: Chuyá»ƒn BTC trong Ethereum&lt;/h3&gt;
&lt;p&gt;Sá»­ dá»¥ng wrapped coins.&lt;/p&gt;

&lt;p&gt;Vá»›i wBTC&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Alice lock 1 BTC trong custodian&apos;s BTC address&lt;/li&gt;
  &lt;li&gt;Custodian trung gian sau khi tháº¥y Ä‘iá»u nÃ y, sáº½ gá»­i msg Ä‘áº¿n ERC20 (bridge contract), xÃ¡c nháº­n&lt;/li&gt;
  &lt;li&gt;ERC20 sáº½ táº¡o wBTC cho Alice trong Ethereum&lt;/li&gt;
  &lt;li&gt;Sau khi dÃ¹ng xong, Alice sáº½ burn wBTC.&lt;/li&gt;
  &lt;li&gt;Custodian trung gian sau khi tháº¥y Ä‘iá»u nÃ y, sáº½ gá»­i msg Ä‘áº¿n custodian BTC.&lt;/li&gt;
  &lt;li&gt;Custodian BTC sáº½ unlock 1 BTC cho Alice.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minh hoáº¡:&lt;/p&gt;

&lt;p&gt;Váº¥n Ä‘á» Ä‘Æ°a ra lÃ  liá»‡u cÃ¡c Custodian cÃ³ tin tÆ°á»Ÿng Ä‘Æ°á»£c khÃ´ng? &lt;br /&gt;
Äá»ƒ giáº£i quyáº¿t, ta sáº½ sá»­ dá»¥ng tBTC nhÆ° sau:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Chá»n ngáº«u nhiÃªn 3 custodian vÃ  táº¡o P2PKH Bitcoin address cho Alice.&lt;/li&gt;
  &lt;li&gt;KhoÃ¡ chá»¯ kÃ½ 3-3 lÃ  bÃ­ máº­t giá»¯a 3 ngÆ°á»i.&lt;/li&gt;
  &lt;li&gt;Alice gá»­i BTC vÃ o Ä‘á»‹a chá»‰ P2PKH, nháº­n tBTC&lt;/li&gt;
  &lt;li&gt;Custodians cáº§n khoÃ¡ 1.5x ETH stake cho BTC há» quáº£n lÃ½. Náº¿u BTC locked mÃ  bá»‹ máº¥t, Alice sáº½ láº¥y staked ETH.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-2-loáº¡i-bridges&quot;&gt;2 loáº¡i Bridges:&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt; Loáº¡i 1: &lt;/strong&gt; lock-and-mint bridge&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;SRC â‡¾ DEST: user lock tiá»n á»Ÿ SRC, wrapped token sáº½ Ä‘Æ°á»£c mint á»Ÿ DEST.&lt;/li&gt;
  &lt;li&gt;DEST â‡¾ SRC: fund khi Ä‘Æ°á»£c burned tá»« DEST, thÃ¬ SRC sáº½ release lock.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Loáº¡i 2: &lt;/strong&gt; liquidity pool bridge&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Cáº£ 2 phÃ­a Ä‘á»u cÃ³ Liquidity provider&lt;/li&gt;
  &lt;li&gt;SRC -&amp;gt; DEST: ngÆ°á»i dÃ¹ng gá»­i funds á»Ÿ SRC, sá»‘ tiá»n tÆ°Æ¡ng Ä‘Æ°Æ¡ng sáº½ Ä‘Æ°á»£c giáº£i phÃ³ng tá»« DEST.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-bridging-smart-chain&quot;&gt;Bridging smart chain&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;BÆ°á»›c 1: Táº¡o má»™t há»‡ thá»‘ng message xuyÃªn chuá»—i an toÃ n&lt;/li&gt;
  &lt;li&gt;BÆ°á»›c 2: XÃ¢y 1 bridge sá»­ dá»¥ng há»‡ thá»‘ng message&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minh hoáº¡&lt;/p&gt;

&lt;p&gt;CÃ³ 2 loáº¡i há»‡ thá»‘ng message: &lt;br /&gt;
&lt;strong&gt; Externally verified &lt;/strong&gt;: cÃ¡c bÃªn bÃªn ngoÃ i (Trustee) sáº½ xÃ¡c minh cÃ¡c message trÃªn chuá»—i S. &lt;br /&gt;
RelayerT chuyá»ƒn msg cho ngÆ°á»i nháº­n khi cÃ¡c trustees Ä‘á»u kÃ­ âŸ¹ náº¿u DApp-Y tin trustees, thÃ¬ sáº½ biáº¿t Ä‘Æ°á»£c DApp-X gá»­i msg. &lt;br /&gt;
Náº¿u trustee kÃ­ vÃ  post fake msg cho RelayerT thÃ¬ nhá»¯ng bÃªn offchain cÃ³ thá»ƒ gá»­i signature cá»§a trustee cho relayerS, khiáº¿n trustee bá»‹ slashed.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Onchain verified &lt;/strong&gt;: chuá»—i T verifies block header cá»§a chuá»—i S. &lt;br /&gt;
Oracle gá»­i msg cho relayerT, cÃ¹ng vá»›i finalized block header cá»§a chuá»—i S. Oracle sáº½ khÃ´ng Ä‘Æ°á»£c gá»i lÃ  trustee vÃ¬ nÃ³ chá»‰ chuyá»ƒn cÃ¡c finalized block.&lt;br /&gt;
RelayerT sáº½ cháº¡y client nháº¹ Ä‘á»ƒ xÃ¡c thá»±c xem chuá»—i S cÃ³ nháº­n msg mÃ  gá»­i Ä‘i hay khÃ´ng.&lt;/p&gt;

&lt;p&gt;Tuy nhiÃªn, váº¥n Ä‘á» Ä‘áº·t ra lÃ  viá»‡c chuá»—i T verify state cá»§a chuá»—i S sáº½ tá»‘n gas. Äá»ƒ giáº£i quyáº¿t Ä‘iá»u nÃ y, cáº§n sá»­ dá»¥ng zkBridge: sá»­ dá»¥ng SNARK Ä‘á»ƒ giáº£m viá»‡c tÃ­nh toÃ¡n cho relayerT.&lt;/p&gt;

&lt;h2 id=&quot;heading-táº¡m-káº¿t&quot;&gt;Táº¡m káº¿t&lt;/h2&gt;
&lt;p&gt;Vá»›i briding, trong tÆ°Æ¡ng lai sáº½ giÃºp viá»‡c di chuyá»ƒn cÃ¡c assets nhanh vÃ  ráº» qua cÃ¡c chain, khiáº¿n cÃ¡c project thanh khoáº£n sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n á»Ÿ trong táº¥t cáº£ cÃ¡c chain.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u cÃ¡c báº¡n Ä‘áº¿n MEV vÃ  Bridging giá»¯a cÃ¡c blockchain khÃ¡c nhau.</summary></entry><entry><title type="html">Quyá»n riÃªng tÆ° trÃªn blockchain vÃ  Zk-SNARK</title><link href="http://localhost:4000/blog/2023/08/20/zksnark/" rel="alternate" type="text/html" title="Quyá»n riÃªng tÆ° trÃªn blockchain vÃ  Zk-SNARK" /><published>2023-08-20T00:00:00+07:00</published><updated>2023-08-20T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/08/20/zksnark</id><content type="html" xml:base="http://localhost:4000/blog/2023/08/20/zksnark/">&lt;p&gt;Trong há»‡ thá»‘ng tÃ i chÃ­nh, viá»‡c riÃªng tÆ° lÃ  Ä‘iá»u cáº§n thiáº¿t. Má»™t vÃ i vÃ­ dá»¥ nhÆ°: Má»™t nhÃ  sáº£n xuáº¥t khÃ´ng muá»‘n tiáº¿t lá»™ sá»‘ tiá»n há» tráº£ cho nhÃ  cung cáº¥p cá»§a mÃ¬nh cho cÃ¡c bá»™ pháº­n, NgÆ°á»i dÃ¹ng cuá»‘i cáº§n quyá»n riÃªng tÆ° Ä‘á»ƒ thuÃª, quyÃªn gÃ³p, mua hÃ ng,â€¦ Do Ä‘Ã³, blockchain khÃ´ng thá»ƒ phÃ¡t huy háº¿t tiá»m nÄƒng náº¿u khÃ´ng cÃ³ má»™t sá»‘ Tx riÃªng tÆ°.&lt;/p&gt;

&lt;h2 id=&quot;heading-sá»±-riÃªng-tÆ°-trong-cÃ¡c-blockchain&quot;&gt;Sá»± riÃªng tÆ° trong cÃ¡c blockchain&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Vá»›i Ethereum, má»i sá»‘ dÆ° Ä‘á»u cÃ´ng khai. Trong cÃ¡c DApps, code vÃ  state cÅ©ng cÃ´ng khai cho ngÆ°á»i dÃ¹ng. NgoÃ i ra, cÃ¡c Tx cÅ©ng ná»‘i Ä‘áº¿n cÃ¡c account.&lt;/li&gt;
  &lt;li&gt;Vá»›i Bitcoin, dá»¯ liá»‡u Tx cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ káº¿t ná»‘i 1 Ä‘á»‹a chá»‰ tá»›i 1 Ä‘á»‹nh danh váº­t lÃ½.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-tx-riÃªng-tÆ°-trÃªn-blockchain-cÃ´ng-khai&quot;&gt;Tx riÃªng tÆ° trÃªn blockchain cÃ´ng khai&lt;/h2&gt;
&lt;p&gt;ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng commitments vÃ  zero knowledge proof Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Committed data &lt;/strong&gt;: cam káº¿t ngáº¯n (áº©n) á»Ÿ trÃªn chuá»—i.
&lt;strong&gt; Proof ğ… &lt;/strong&gt;: succinct Zero knowledge (Zk) proof:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Committed Tx data nháº¥t quÃ¡n vá»›i tráº¡ng thÃ¡i commited hiá»‡n táº¡i.&lt;/li&gt;
  &lt;li&gt;Committed update state thÃ¬ Ä‘Ãºng. Tá»« Ä‘Ã³, ai cÅ©ng cÃ³ thá»ƒ xÃ¡c thá»±c ğ….&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minh hoáº¡: ///&lt;/p&gt;

&lt;h3 id=&quot;heading-review-commitment&quot;&gt;Review: Commitment&lt;/h3&gt;
&lt;p&gt;ÄÆ°á»£c sá»­ dá»¥ng vá»›i nhiá»u má»¥c Ä‘Ã­ch, vÃ­ dá»¥ Äáº¥u giÃ¡ kÃ­n. NgÆ°á»i tham gia cam káº¿t giÃ¡, sau khi háº¿t thá»i gian thÃ¬ má»i ngÆ°á»i sáº½ má»Ÿ cam káº¿t cá»§a há». &lt;br /&gt;
&lt;strong&gt; CÃº phÃ¡p &lt;/strong&gt; 2 thuáº­t toÃ¡n: &lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;commit(msg, r) -&amp;gt; com.  r lÃ  randombit, com lÃ  string ngáº¯n&lt;/li&gt;
  &lt;li&gt;verify(msg, com, r) -&amp;gt; reject / accept.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-tÃ­nh-báº£o-máº­t&quot;&gt;TÃ­nh báº£o máº­t&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt; Binding &lt;/strong&gt;: KhÃ´ng thá»ƒ táº¡o 2 valid openings cho com. &lt;br /&gt;
Tá»©c lÃ : táº¡o ra com, (m1, r1), (m2, r2) mÃ :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;verify(m1, com, r1) = accept. VÃ &lt;/li&gt;
  &lt;li&gt;verify(m2, com, r2) = accept vá»›i m1 â‰  m2.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Hiding &lt;/strong&gt;: Com khÃ´ng tiáº¿t lá»™ gÃ¬ vá» data Ä‘Ã£ committed. Tá»©c lÃ  com sáº½ Ä‘á»™c láº­p vá»›i m.&lt;/p&gt;

&lt;h2 id=&quot;heading-zk-snark-lÃ -gÃ¬&quot;&gt;zk-SNARK lÃ  gÃ¬?&lt;/h2&gt;
&lt;h3 id=&quot;heading-cÃ¡c-khÃ¡i-niá»‡m&quot;&gt;CÃ¡c khÃ¡i niá»‡m&lt;/h3&gt;
&lt;p&gt;Äá»ƒ verify 1 Tx, Validator cáº§n pháº£i xem thÃ´ng tin trong Tx Ä‘Ã³ vÃ  kiá»ƒm tra xem cÃ³ thoáº£ mÃ£n khÃ´ng. NhÆ°ng náº¿u cÃ¡c Tx lÃ  private thÃ¬ Validator sáº½ kiá»ƒm tra nhÆ° tháº¿ nÃ o? LÃºc nÃ y, zk-SNARK Ä‘Æ°á»£c ra Ä‘á»i.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; SNARK &lt;/strong&gt;: lÃ  1 proof ngáº¯n gá»n Ä‘á»ƒ chá»©ng minh 1 statement lÃ  Ä‘Ãºng. NgoÃ i ra, nÃ³ cáº§n nhanh Ä‘á»ƒ xÃ¡c thá»±c bá»Ÿi ngÆ°á»i xÃ¡c thá»±c. &lt;br /&gt;
VÃ­ dá»¥: statement: &quot;TÃ´i biáº¿t má»™t m mÃ  SHA256(m) = 0&quot;.
&lt;strong&gt; zk-SNARK &lt;/strong&gt;: lÃ  SNARK khÃ´ng tiáº¿t lá»™ gÃ¬ vá» ná»™i dung. VÃ­ dá»¥ trong statement kia thÃ¬ zk-SNARK sáº½ khÃ´ng tiáº¿t lá»™ gÃ¬ vá» giÃ¡ trá»‹ cá»§a m.&lt;/p&gt;

&lt;p&gt;á»¨ng dá»¥ng:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Private Tx&lt;/li&gt;
  &lt;li&gt;zkBrigde: ná»‘i cÃ¡c chuá»—i khá»‘i&lt;/li&gt;
  &lt;li&gt;tÃ­nh riÃªng tÆ° trong zk-Rollups&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-kÄ©-thuáº­t-zk-snark&quot;&gt;KÄ© thuáº­t zk-SNARK&lt;/h3&gt;

&lt;h4 id=&quot;heading-arithmetic-circuits-ac&quot;&gt;Arithmetic Circuits (AC)&lt;/h4&gt;
&lt;p&gt;Cho 1 trÆ°á»ng há»¯u háº¡n:  ğ”½={0, â€¦, ğ‘âˆ’1} vá»›i p lÃ  sá»‘ nguyÃªn tá»‘ &amp;gt; 2. &lt;br /&gt;
Arithmetic Circuit: C: ğ”½^ğ‘› â‡¾ ğ”½. &lt;br /&gt;
C láº¥y input lÃ  list gá»“m n pháº§n tá»­ thuá»™c F, output lÃ  1 pháº§n tá»­ thuá»™c F. &lt;br /&gt;
|C| = sá»‘ gates trong máº¡ch C.
// minh hoáº¡&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; VÃ­ dá»¥: &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;C_hash(h, m) = 0 náº¿u SHA256(m) = h, â‰ 0 náº¿u ngÆ°á»£c láº¡i.&lt;/td&gt;
          &lt;td&gt;C_hash&lt;/td&gt;
          &lt;td&gt;~ 20K gates&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;C_sig(pk, msg, Ïƒ) = 0 náº¿u chá»¯ kÃ­ Ïƒ lÃ  há»£p lá»‡ trÃªn msg vá»›i pk.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-argument-system&quot;&gt;Argument System&lt;/h4&gt;
&lt;p&gt;Cho má»™t AC: C(x, w) -&amp;gt; F vá»›i:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;x: lÃ  statement cÃ´ng khai&lt;/li&gt;
  &lt;li&gt;w: secret witness.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Prover P cáº§n thuyáº¿t phá»¥c cÃ¡c Verifier V ráº±ng tá»“n táº¡i w mÃ  C(x, w) = 0 nhÆ°ng khÃ´ng muá»‘n gá»­i w vÃ¬ lÃ½ do báº£o máº­t.&lt;/p&gt;

&lt;p&gt;CÃ³ 2 loáº¡i argument systems: Interactive vs Non-interactives.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Interactive: P &amp;lt;-&amp;gt; V tÆ°Æ¡ng tÃ¡c vá»›i nhau nhiá»u láº§n Ä‘á»ƒ V Ä‘á»“ng Ã½. CÃ¡ch nÃ y chá»‰ Ã¡p dá»¥ng vá»›i há»‡ thá»‘ng cÃ³ Ã­t V.&lt;/li&gt;
  &lt;li&gt;Non-interactive: P chá»‰ gá»­i duy nháº¥t 1 msg lÃ  proof cho V. CÃ¡ch nÃ y cÃ³ Ã­ch khi cÃ³ nhiá»u Verifier (VÃ­ dá»¥ nhiá»u Validator muá»‘n xÃ¡c thá»±c 1 Tx).&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-nark-non-interactive-argument-of-knowledge&quot;&gt;NARK: Non-interactive Argument of Knowledge&lt;/h4&gt;
&lt;p&gt;Vá»›i máº¡ch C(x, w) â‡¾  ğ”½. &lt;br /&gt;
&lt;strong&gt; Preprocessing &lt;/strong&gt;: S(C) â‡¾ public parameters(Sp, Sv).&lt;/p&gt;

&lt;p&gt;Minh hoáº¡:&lt;/p&gt;

&lt;p&gt;Má»™t preprocessing NARK lÃ  bá»™ 3 (S, P, V):&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;S(C) â‡¾ public parameters(Sp, Sv).&lt;/li&gt;
  &lt;li&gt;P(Sp, x, w) â‡¾  proof  ğœ‹&lt;/li&gt;
  &lt;li&gt;V(ğ‘£ğ‘, ğ’™, ğ…)  â‡¾  accept / reject&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; YÃªu cáº§u &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Complete: âˆ€ğ‘¥, ğ‘¤:  ğ¶(ğ’™, ğ’˜) = 0 â‡’ Pr[ V(ğ‘£ğ‘, ğ‘¥, P(ğ‘ğ‘, ğ’™, ğ’˜)) = accept] = 1.&lt;/li&gt;
  &lt;li&gt;Argument of knowledge: V accepts â‡’ P biáº¿t ğ‘¤&lt;/li&gt;
  &lt;li&gt;Zero knowledge: (ğ¶, ğ‘ğ‘,ğ‘£ğ‘ ,ğ’™, ğœ‹)  khÃ´ng tiáº¿t lá»™ gÃ¬ vá» ğ’˜&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Succinct &lt;/strong&gt;
Má»™t NARK gá»i lÃ  SNARK khi viá»‡c táº¡o ra vÃ  xÃ¡c minh proof vá»›i thá»i gian nhanh:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;S(ğ¶)  â‡¾  public parameters  (Sğ‘, Sğ‘£)&lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;P(ğ‘ğ‘, ğ’™, ğ’˜)  â‡¾  short proof  ğœ‹;&lt;/td&gt;
          &lt;td&gt;ğœ‹&lt;/td&gt;
          &lt;td&gt;=ğ‘‚_ğœ†(ğ¥ğ¨ğ â¡(&lt;/td&gt;
          &lt;td&gt;ğ‘ª&lt;/td&gt;
          &lt;td&gt;))&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;V(ğ‘£ğ‘, ğ’™, ğ…)    nhanh Ä‘á»ƒ tháº©m Ä‘á»‹nh:    time(V) = ğ‘‚_ğœ† (&lt;/td&gt;
          &lt;td&gt;ğ‘¥&lt;/td&gt;
          &lt;td&gt;, ğ¥ğ¨ğ â¡(&lt;/td&gt;
          &lt;td&gt;ğ‘ª&lt;/td&gt;
          &lt;td&gt;)).&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Do Ä‘Ã³, vá»›i SNARK thÃ¬ viá»‡c Ä‘á»c toÃ n bá»™ máº¡ch C lÃ  khÃ´ng ká»‹p thá»i gian. VÃŒ váº­y cáº§n bÆ°á»›c preprocessing.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; TÃ³m láº¡i: &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;SNARK: bá»™ (S, P, V) thoáº£ mÃ£n: Complete, Argument of knowledge, Succinct.&lt;/li&gt;
  &lt;li&gt;zk-SNARK: SNARK cÃ³ zero knowledge.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-cÃ¡c-loáº¡i-preprocessing&quot;&gt;CÃ¡c loáº¡i Preprocessing&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;trusted setup per circuit: S(C) sá»­ dá»¥ng data bÃ­ máº­t (VÃ­ dá»¥: randombit r).&lt;/li&gt;
  &lt;li&gt;trusted but universal: Randombit r Ä‘á»™c láº­p khá»i C: &lt;br /&gt;
  S = (S_init, S_index) vá»›i:
    &lt;ul&gt;
      &lt;li&gt;ğ‘†_ğ‘–ğ‘›ğ‘–ğ‘¡ (ğœ†;ğ‘Ÿ) â‡¾ U: 1 láº§n duy nháº¥t.&lt;/li&gt;
      &lt;li&gt;ğ‘†_ğ‘–ğ‘›ğ‘‘ğ‘’ğ‘¥ (U,ğ¶) â‡¾ (Sğ‘, Sğ‘£): KhÃ´ng chá»©a secret data.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-argurment-of-knowledge&quot;&gt;Argurment of knowledge&lt;/h4&gt;
&lt;p&gt;P biáº¿t w náº¿u w cÃ³ thá»ƒ Ä‘Æ°á»£c extracted tá»« P. &lt;br /&gt;
Bá»™ 3 (S, P, V) lÃ  Argurment of knowledge vá»›i máº¡ch C náº¿u:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A = (A0, A1) lÃ  adversary mÃ  cÃ³ thá»ƒ bá»‹ extracted thÃ´ng tin:
    &lt;ul&gt;
      &lt;li&gt;S(C) â‡¾ (Sp, Sv),  A0(Sp) â‡¾ (x, st)&lt;/li&gt;
      &lt;li&gt;ğœ‹ â‡½ A1(ğ‘ğ‘, ğ‘¥, st):   Pr[V(vp, ğ‘¥, ğœ‹) = accept] &amp;gt; 1/10^6	(khÃ´ng Ä‘Ã¡ng ká»ƒ )&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CÃ³ extractor E (sá»­ dá»¥ng A1 lÃ  blackbox) vÃ  táº¡o ra Ä‘Æ°á»£c w báº±ng tÆ°Æ¡ng tÃ¡c vá»›i A1(Sp, x, st).&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-zero-knowledge&quot;&gt;Zero knowledge&lt;/h4&gt;
&lt;p&gt;Proof ğœ‹ khÃ´ng tiáº¿t lá»™ vá» ğ’˜ náº¿u Verifier tá»± táº¡o ğœ‹, hay Verifier khÃ´ng há»c Ä‘Æ°á»£c gÃ¬ tá»« proof ğœ‹. &lt;br /&gt;
&lt;strong&gt; Tá»©c lÃ : &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Tá»“n táº¡i 1 hÃ m Sim() sao cho: (Sğ‘, Sğ‘£, ğœ‹) â‡½ Sim(ğ¶,ğ‘¥). Hay Sim() cÃ³ thá»ƒ táº¡o ra proof ğœ‹ mÃ  khÃ´ng cáº§n w.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-lá»i-káº¿t&quot;&gt;Lá»i káº¿t&lt;/h2&gt;
&lt;p&gt;á» trÃªn lÃ  sÆ¡ lÆ°á»£c vá» tÃ­nh riÃªng tÆ° trong Blockchain vÃ  cÃ¡i nhÃ¬n tá»•ng quan vá» zk-SNARK.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">Trong há»‡ thá»‘ng tÃ i chÃ­nh, viá»‡c riÃªng tÆ° lÃ  Ä‘iá»u cáº§n thiáº¿t. Má»™t vÃ i vÃ­ dá»¥ nhÆ°: Má»™t nhÃ  sáº£n xuáº¥t khÃ´ng muá»‘n tiáº¿t lá»™ sá»‘ tiá»n há» tráº£ cho nhÃ  cung cáº¥p cá»§a mÃ¬nh cho cÃ¡c bá»™ pháº­n, NgÆ°á»i dÃ¹ng cuá»‘i cáº§n quyá»n riÃªng tÆ° Ä‘á»ƒ thuÃª, quyÃªn gÃ³p, mua hÃ ng,â€¦ Do Ä‘Ã³, blockchain khÃ´ng thá»ƒ phÃ¡t huy háº¿t tiá»m nÄƒng náº¿u khÃ´ng cÃ³ má»™t sá»‘ Tx riÃªng tÆ°.</summary></entry><entry><title type="html">Má»Ÿ rá»™ng Blockchain (Pháº§n 2)</title><link href="http://localhost:4000/blog/2023/08/19/scaling-the-blockchain-p2/" rel="alternate" type="text/html" title="Má»Ÿ rá»™ng Blockchain (Pháº§n 2)" /><published>2023-08-19T00:00:00+07:00</published><updated>2023-08-19T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/08/19/scaling-the-blockchain-p2</id><content type="html" xml:base="http://localhost:4000/blog/2023/08/19/scaling-the-blockchain-p2/">&lt;p&gt;Trong bÃ i viáº¿t hÃ´m nay, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»i ngÆ°á»i má»™t kÄ© thuáº­t giÃºp tÄƒng tá»‘c Ä‘á»™ cÃ¡c Tx trong máº¡ng blockchain. ÄÃ³ lÃ  Rollups.&lt;/p&gt;

&lt;h2 id=&quot;heading-Ã½-tÆ°á»Ÿng&quot;&gt;Ã tÆ°á»Ÿng&lt;/h2&gt;
&lt;p&gt;Trong layer-1 cá»§a blockchain nhÆ° Ethereum chá»©a world state. Khi má»™t giao dá»‹ch Ä‘Æ°á»£c Ä‘Æ°a vÃ o, world state sáº½ bá»‹ thay Ä‘á»•i. Tá»« Ä‘Ã¢y, Ã½ tÆ°á»Ÿng cÆ¡ báº£n cá»§a Rollup lÃ  há»£p hÃ ng trÄƒm Tx láº¡i thÃ nh má»™t Tx duy nháº¥t, tá»« Ä‘Ã³ giÃºp tÄƒng tá»‘c Ä‘á»™ lÃªn khoáº£ng 100 láº§n.&lt;/p&gt;

&lt;p&gt;Ta cÃ³ hÃ¬nh minh hoáº¡ nhÆ° sau:&lt;/p&gt;

&lt;p&gt;Tá»« Ä‘Ã¢y, ta gá»i Rollup state lÃ  L2, Ä‘á»ƒ phÃ¢n biá»‡t vá»›i L1 (layer-1 cá»§a blockchain). &lt;br /&gt;
Rollup contract á»Ÿ L1 sáº½ giá»¯ cÃ¡c tÃ i sáº£n vÃ  Merkle state root cá»§a cÃ¡c Rollup account. Rollup state chá»‰ bao gá»“m sá»‘ dÆ° cá»§a cÃ¡c Rollup account.&lt;/p&gt;

&lt;p&gt;/// hÃ¬nh áº£nh&lt;/p&gt;

&lt;h2 id=&quot;heading-hiá»‡u-nÄƒng&quot;&gt;Hiá»‡u nÄƒng&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt; Chuyá»ƒn tiá»n trong 1 Rollup &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Chuyá»ƒn tiá»n trong 1 Rollup (L2 -&amp;gt; L2) ráº¥t dá»… dÃ ng. CÃ¡c coordinators chá»‰ cáº§n cáº­p nháº­p láº¡i Merkle Root cá»§a Rollup Contract trÃªn L1 lÃ  xong.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Chuyá»ƒn tiá»n tá»« funds Ä‘áº¿n Rollup &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Chuyá»ƒn tiá»n tá»« funds Ä‘áº¿n Rollup (L1 -&amp;gt; L2) thÃ¬ cháº­m vÃ  Ä‘áº¯t. LÃ½ do vÃ¬ cáº§n pháº£i update cÃ¡c state trong L1, sá»‘ dÆ° trong contract vÃ  cáº£ trong Rollup vÃ  cáº­p nháº­p láº¡i Root cá»§a contract Ä‘Ã³.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Chuyá»ƒn tiá»n ra khá»i Rollup &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Chuyá»ƒn tiá»n ra khá»i Rollup cáº§n phÃ­ gas thÃªm tá»« L1 trong quÃ¡ trÃ¬nh chuyá»ƒn vÃ¬ cáº§n post nhiá»u dá»¯ liá»‡u.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Chuyá»ƒn tiá»n tá»« 2 Rollup &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Náº¿u chuyá»ƒn tiá»n tá»« 2 Rollup (L2 -&amp;gt; L2&apos;) mÃ  qua L1 thÃ¬ sáº½ ráº¥t Ä‘áº¯t, nhÆ°ng náº¿u qua 1 cáº§u trá»±c tiáº¿p L2 &amp;lt;=&amp;gt; L2 thÃ¬ sáº½ ráº».&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-cháº¡y-contract-trong-rollup&quot;&gt;Cháº¡y contract trong Rollup&lt;/h3&gt;
&lt;p&gt;Khi contract cháº¡y trong Rollup (VÃ­ dá»¥ Uniswap), thÃ¬ viá»‡c tÆ°Æ¡ng tÃ¡c vá»›i contract Ä‘Ã³ sáº½ ráº©t ráº» cho ngÆ°á»i dÃ¹ng. &lt;br /&gt;
&lt;strong&gt; Coordinator &lt;/strong&gt; duy trÃ¬ tráº¡ng thÃ¡i cá»§a táº¥t cáº£ contracts trong há»‡ thá»‘ng Rollup:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;NÃ³ cáº­p nháº­p Uniswap Merkle Leaf má»—i khi 1 Tx nÃ o Ä‘Ã³ Ä‘áº¿n Uniswap&lt;/li&gt;
  &lt;li&gt;Ghi update cho Rollup state root trÃªn L1.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Rollup cÃ³ chá»©c nÄƒng giá»‘ng Ethereum, nhÆ°ng khÃ´ng cÃ³ cÆ¡ cháº¿ Ä‘á»“ng thuáº­n vÃ¬ nÃ³ dá»±a vÃ o L1 Ä‘á»ƒ chá»©ng thá»±c tráº¡ng thÃ¡i hiá»‡n táº¡i.&lt;/p&gt;

&lt;h2 id=&quot;heading-cÃ¡c-váº¥n-Ä‘á»&quot;&gt;CÃ¡c váº¥n Ä‘á»&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt; Váº¥n Ä‘á» 1 &lt;/strong&gt;: Äiá»u gÃ¬ xáº£y ra náº¿u Coordinator khÃ´ng trung thá»±c. NÃ³ cÃ³ thá»ƒ láº¥y háº¿t tiá»n trong Rollup hoáº·c táº¡o cÃ¡c giao dá»‹ch giáº£.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Váº¥n Ä‘á» 2 &lt;/strong&gt;: Náº¿u Coordinator ngá»«ng cung cáº¥p dá»‹ch vá»¥ ? LÃ m sao Ä‘á»ƒ láº¥y láº¡i tráº¡ng thÃ¡i Rollup Ä‘á»ƒ Ä‘Æ°a cho Coordinator má»›i.&lt;/p&gt;

&lt;h2 id=&quot;heading-cÃ¡c-phÆ°Æ¡ng-Ã¡n-giáº£i-quyáº¿t&quot;&gt;CÃ¡c phÆ°Æ¡ng Ã¡n giáº£i quyáº¿t&lt;/h2&gt;
&lt;h3 id=&quot;heading-váº¥n-Ä‘á»-1-coordinator-khÃ´ng-trung-thá»±c&quot;&gt;Váº¥n Ä‘á» 1: Coordinator khÃ´ng trung thá»±c&lt;/h3&gt;
&lt;p&gt;Coordinator khÃ´ng thá»ƒ láº¥y tiá»n tá»« Rollup users, vÃ¬ L1 sáº½ xÃ¡c minh update tráº¡ng thÃ¡i cá»§a Rollup báº±ng cÃ¡ch kiá»ƒm tra xem táº¥t cáº£ cÃ¡c Tx cÃ³ valid vÃ  Ä‘Æ°á»£c kÃ½ há»£p lá»‡ bá»Ÿi ngÆ°á»i dÃ¹ng hay khÃ´ng. &lt;br /&gt;
Äá»ƒ lÃ m Ä‘iá»u nÃ y má»™t cÃ¡ch ráº», cÃ³ thá»ƒ cÃ³ cÃ¡c cÃ¡ch tiáº¿p cáº­n sau:&lt;/p&gt;

&lt;h4 id=&quot;heading-validity-proofs-cÃ²n-gá»i-lÃ -zk-rollup&quot;&gt;Validity Proofs (cÃ²n gá»i lÃ  zk-Rollup)&lt;/h4&gt;
&lt;p&gt;Khi coordinator gá»­i updated root vÃ  Tx List cho L1, nÃ³ cáº§n gá»­i kÃ¨m theo má»™t SNARK proof cho valid Tx Ä‘á»ƒ chá»©ng minh táº­p hÃ ng trÄƒm cÃ¡c Tx nÃ y lÃ  há»£p lá»‡. &lt;br /&gt;
&lt;strong&gt; SNARK proof &lt;/strong&gt; lÃ  loáº¡i proof ngáº¯n vÃ  nhanh Ä‘á»ƒ xÃ¡c minh, tá»« Ä‘Ã³ giÃºp viá»‡c xÃ¡c minh trÃªn L1 trá»Ÿ nÃªn ráº». (vá»›i sá»± giÃºp Ä‘á»¡ cá»§a EVM)  &lt;br /&gt;
Bao gá»“m:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Public statement:   (old state root,  new state root,  Tx list)&lt;/li&gt;
  &lt;li&gt;Witness: (state trÆ°á»›c - sau cá»§a nhá»¯ng tÃ i khoáº£n bá»‹ thay Ä‘á»•i, báº±ng chá»©ng Merkle, chá»¯ kÃ­ cá»§a user)&lt;/li&gt;
  &lt;li&gt;SNARK proof sáº½ chá»©ng minh ráº±ng:
    &lt;ul&gt;
      &lt;li&gt;Táº¥t cáº£ chá»¯ kÃ½ trÃªn Ä‘á»u valid&lt;/li&gt;
      &lt;li&gt;Táº¥t cáº£ báº±ng chá»©ng Merkle Ä‘á»u valid&lt;/li&gt;
      &lt;li&gt;Tráº¡ng thÃ¡i sau = tráº¡ng thÃ¡i trÆ°á»›c + Tx.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; zkEVM &lt;/strong&gt;  &lt;br /&gt;
Khi má»™t contract (Uniswap) cháº¡y trong Rollup:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Coordinator sáº½ táº¡o 1 SNARK proof vá» viá»‡c thá»±c hiá»‡n Ä‘Ãºng 1 chÆ°Æ¡ng trÃ¬nh EVM. ÄÃ³ gá»i lÃ  zkEVM.&lt;/li&gt;
  &lt;li&gt;Táº¡o báº±ng chá»©ng thÃ¬ sáº½ yÃªu cáº§u ráº¥t cao vá» tÃ­nh toÃ¡n nhÆ°ng khi xÃ¡c minh thÃ¬ láº¡i ráº¥t nhanh.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CÃ³ 2 chá»©c nÄƒng cá»§a zkEVM lÃ :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Chá»©ng minh EVM bytecode cháº¡y Ä‘Ãºng&lt;/li&gt;
  &lt;li&gt;BiÃªn dá»‹ch Solidity to SNARK-friendly circuit.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Káº¿t quáº£ &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Rollup contract Ä‘áº£m báº£o coordinator khÃ´ng thá»ƒ gian láº­n vÃ  sáº½ cháº¥p nháº­n cÃ¡c update náº¿u cÃ³ proof phÃ¹ há»£p&lt;/li&gt;
  &lt;li&gt;Ai cÅ©ng cÃ³ thá»ƒ lÃ m coordinator náº¿u cÃ³ Ä‘á»§ sá»©c máº¡nh tÃ­nh toÃ¡n&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-fraud-proof-cÃ²n-gá»i-lÃ -optimistic-rollup&quot;&gt;Fraud proof (cÃ²n gá»i lÃ  Optimistic Rollup)&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Coordinator sáº½ stake 1 khoáº£n vÃ o L1 Rollup Contract&lt;/li&gt;
  &lt;li&gt;Coordinator sáº½ Ä‘Æ°a updated root lÃªn L1 mÃ  khÃ´ng cáº§n báº±ng chá»©ng&lt;/li&gt;
  &lt;li&gt;Náº¿u update khÃ´ng valid, trong vÃ²ng 7 ngÃ y ai cÅ©ng cÃ³ thá»ƒ chá»©ng minh Ä‘iá»u nÃ y báº±ng viá»‡c gá»­i fraud proof.&lt;/li&gt;
  &lt;li&gt;Náº¿u fraud proof lÃ  Ä‘Ãºng, coordinator sáº½ bá»‹ Slash, ngÆ°á»£c láº¡i ngÆ°á»i gá»­i proof sáº½ tá»‘n phÃ­.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Äá»ƒ chá»©ng minh Fraud Ä‘áº¿n Rollup contract trong L1, ta sáº½ sá»­ dá»¥ng Binary Search. &lt;br /&gt;
Viá»‡c Coordinator vÃ  NgÆ°á»i gá»­i Proof (A) táº¡o ra state(n) vÃ  state(n&apos;) khÃ¡c nhau buá»™c L1 cáº§n kiá»ƒm tra xem ai má»›i lÃ  ngÆ°á»i Ä‘Ãºng. Do Ä‘Ã³, sá»­ dá»¥ng Merkle tree vÃ  tÃ¬m kiáº¿m nhá»‹ phÃ¢n, vá»›i viá»‡c chia Ä‘Ã´i tá»« state(n/2), state(n/4)â€¦ cÃ³ thá»ƒ dá»… dÃ ng tÃ¬m Ä‘Æ°á»£c xem state nÃ o bá»‹ sai sau Log2(n) round.&lt;/p&gt;

&lt;p&gt;Tuy nhiÃªn, cÃ¡ch nÃ y gáº·p 1 sá»‘ khÃ³ khÄƒn nhÆ°:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Giao dá»‹ch chá»‰ giáº£i quyáº¿t sau 7 ngÃ y (Sau khi háº¿t háº¡n gian láº­n)&lt;/li&gt;
  &lt;li&gt;Khi 1 báº±ng chá»©ng Fraud Ä‘Æ°á»£c cháº¥p nháº­n, cÃ¡c Tx sau pháº£i Ä‘Æ°á»£c gá»­i láº¡i&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Káº¿t quáº£ &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;CÃ³ thá»ƒ dá»… dÃ ng Ä‘Æ°a smartcontract vÃ o optimistic Rollup&lt;/li&gt;
  &lt;li&gt;ThÃ´ng lÆ°á»£ng Tx cao: ~ 4000Tx / s&lt;/li&gt;
  &lt;li&gt;Ai cÅ©ng cÃ³ thá»ƒ lÃ m coordinator vÃ  verifier&lt;/li&gt;
  &lt;li&gt;Giáº£i quyáº¿t giao dá»‹ch cháº­m 7 ngÃ y.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-váº¥n-Ä‘á»-2-coordinator-ngá»«ng-cung-cáº¥p-dá»‹ch-vá»¥&quot;&gt;Váº¥n Ä‘á» 2: Coordinator ngá»«ng cung cáº¥p dá»‹ch vá»¥&lt;/h3&gt;
&lt;p&gt;Cáº§n táº¡o Coordinator má»›i, nhÆ°ng láº¡i cáº§n tráº¡ng thÃ¡i má»›i nháº¥t cá»§a Rollup.&lt;/p&gt;

&lt;p&gt;Ta tháº¥y, Rollup state cÃ³ thá»ƒ phá»¥c há»“i tá»« dá»¯ liá»‡u trong L1 báº±ng viá»‡c Ä‘á»c cÃ¡c msg vÃ  re-excecute Tx. NhÆ°ng viá»‡c nÃ y sáº½ ráº¥t Ä‘áº¯t vÃ¬ tÆ°Æ¡ng tÃ¡c nhiá»u trÃªn L1 vÃ  cáº§n nhiá»u dá»¯ liá»‡u.&lt;/p&gt;

&lt;p&gt;Äá»ƒ giáº£m Tx fees:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;LÆ°u L2 state root trong L1&lt;/li&gt;
  &lt;li&gt;LÆ°u Tx data vá»›i Data Availability Committee (DAC):
    &lt;ul&gt;
      &lt;li&gt;Gá»“m táº­p há»£p cÃ¡c node tin cáº­y giá»¯ cho data available&lt;/li&gt;
      &lt;li&gt;Ráº» hÆ¡n lÆ°u á»Ÿ L1&lt;/li&gt;
      &lt;li&gt;L1 cháº¥p nháº­n update khi vÃ  chá»‰ khi táº¥t cáº£ cÃ¡c node trong DAC Ä‘á»u kÃ­. Tá»« Ä‘Ã³ giÃºp Ä‘áº£m báº£o cÃ¡c member trong DAC Ä‘á»u cháº¥p nháº­p dá»¯ liá»‡u Tx.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Táº¡o 1 coordinator má»›i phá»¥ thuá»™c vÃ o tÃ­nh kháº£ dá»¥ng cá»§a DAC&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-validium&quot;&gt;Validium&lt;/h4&gt;
&lt;p&gt;1 L2 sá»­ dá»¥ng DAC Ä‘á»ƒ lÆ°u trá»¯ vÃ  Validity proof (SNARKs):&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;PhÃ¹ há»£p cho tÃ i sáº£n giÃ¡ trá»‹ tháº¥p&lt;/li&gt;
  &lt;li&gt;Chá»‰ cÃ¡c thÃ nh viÃªn DAC má»›i tháº¥y Ä‘Æ°á»£c dá»¯ liá»‡u&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-Ä‘iá»u-gÃ¬-xáº£y-ra-náº¿u-coordinator-tá»«-chá»‘i-1-tx&quot;&gt;Äiá»u gÃ¬ xáº£y ra náº¿u Coordinator tá»« chá»‘i 1 Tx&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;NgÆ°á»i táº¡o cÃ³ thá»ƒ post Tx trá»±c tiáº¿p lÃªn L1 Rollup contract.&lt;/li&gt;
  &lt;li&gt;L1 Rollup contract chá»‰ cháº¥p nháº­n update khi mÃ  update cÃ³ cáº£ Tx trÃªn. Tá»« Ä‘Ã³ dáº«n Ä‘áº¿n toÃ n bá»™ Rollup bá»‹ Ä‘Ã³ng bÄƒng.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-lá»i-káº¿t&quot;&gt;Lá»i káº¿t&lt;/h2&gt;
&lt;p&gt;á» trÃªn Ä‘Ã¢y lÃ  cÃ¡c cÃ¡ch Ä‘Æ°á»£c Ã¡p dá»¥ng Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ Tx trong blockchain.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">Trong bÃ i viáº¿t hÃ´m nay, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»i ngÆ°á»i má»™t kÄ© thuáº­t giÃºp tÄƒng tá»‘c Ä‘á»™ cÃ¡c Tx trong máº¡ng blockchain. ÄÃ³ lÃ  Rollups.</summary></entry><entry><title type="html">Má»Ÿ rá»™ng Blockchain (Pháº§n 1)</title><link href="http://localhost:4000/blog/2023/08/18/scaling-the-blockchain-p1/" rel="alternate" type="text/html" title="Má»Ÿ rá»™ng Blockchain (Pháº§n 1)" /><published>2023-08-18T00:00:00+07:00</published><updated>2023-08-18T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/08/18/scaling-the-blockchain-p1</id><content type="html" xml:base="http://localhost:4000/blog/2023/08/18/scaling-the-blockchain-p1/">&lt;p&gt;Vá»›i Bitcoin, tá»‘c Ä‘á»™ thá»±c hiá»‡n giao dá»‹ch chá»‰ cÃ³ khoáº£ng 7 Tx / sec, cÃ²n vá»›i Ethereum, con sá»‘ nÃ y lÃ  15. Trong khi Ä‘Ã³, vá»›i VISA lÃ  2000, Paypal lÃ  200. Váº­y Ä‘á»ƒ cÃ¡c loáº¡i Blockchain nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u trÃªn tháº¿ giá»›i, cáº§n pháº£i cÃ³ nhá»¯ng giáº£i phÃ¡p Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ¡c giao dá»‹ch. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»™t cÃ¡ch lÃ  sá»­ dá»¥ng Payment Channel, háº¡n cháº¿ tÆ°Æ¡ng tÃ¡c vá»›i chuá»—i cÃ ng Ã­t cÃ ng tá»‘t, giÃºp tÄƒng tá»‘c Ä‘á»™.&lt;/p&gt;

&lt;h2 id=&quot;heading-payment-channel-Ã½-tÆ°á»Ÿng-cÆ¡-báº£n&quot;&gt;Payment Channel: Ã tÆ°á»Ÿng cÆ¡ báº£n&lt;/h2&gt;
&lt;p&gt;A vÃ  B Ä‘ang muá»‘n giao dá»‹ch vá»›i nhau. A gá»­i cho B 5 láº§n, má»—i láº§n lÃ  0.01 BTC, lÃ  5 Txs. Thay vÃ¬ lÃ m nhÆ° tháº¿, cÃ³ thá»ƒ lÃ m nhÆ° sau: A gá»­i cho B 1BTC. Sau 1 khoáº£ng thá»i gian (vÃ­ dá»¥ 1 thÃ¡ng), B sáº½ tráº£ láº¡i sá»‘ BTC dÆ° mÃ  chÆ°a dÃ¹ng. Váº­y sá»‘ giao dá»‹ch chá»‰ giá»›i háº¡n Ä‘áº¿n 2.&lt;/p&gt;

&lt;h2 id=&quot;heading-unidirectional-payment-channel-kÃªnh-thanh-toÃ¡n-1-chiá»u&quot;&gt;Unidirectional Payment Channel: KÃªnh thanh toÃ¡n 1 chiá»u&lt;/h2&gt;
&lt;p&gt;Ta cÃ³: UTXO A: 1BTC.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Tx1: 0.99 cho A/ 0.01 cho B tá»« UTXO A.&lt;/li&gt;
  &lt;li&gt;Tx2: 0.98 cho A/ 0.02 cho B&lt;/li&gt;
  &lt;li&gt;â€¦.&lt;/li&gt;
  &lt;li&gt;Tx5: 0.95 cho A/ 0.05 cho B&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Xong xuÃ´i, B post Tx5 lÃªn Blockchain. NhÆ°ng cÃ³ váº¥n Ä‘á» xáº£y ra lÃ  náº¿u A sá»­ dá»¥ng UTXO trÆ°á»›c khi B post lÃªn thÃ¬ Tx5 mÃ  B post lÃªn sáº½ khÃ´ng há»£p lá»‡. Do Ä‘Ã³, cáº§n sá»­ dá»¥ng 1 Ä‘á»‹a chá»‰ chung UTXO AB cÃ³ dáº¡ng Multisig 2-2. Äiá»u nÃ y sáº½ ngÄƒn cháº·n viá»‡c A dÃ¹ng UTXO vÃ¬ chÆ°a cÃ³ chá»¯ kÃ­ cá»§a B.&lt;/p&gt;

&lt;p&gt;NhÆ°ng náº¿u B khÃ´ng post Tx5 lÃªn chuá»—i thÃ¬ sao? Liá»‡u A cÃ³ láº¥y láº¡i Ä‘Æ°á»£c 0.95 BTC. Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y, cáº§n sá»­ dá»¥ng má»™t time-locked Tx, Ä‘áº£m báº£o sau má»™t khoáº£ng thá»i gian, náº¿u B khÃ´ng post Tx5 lÃªn, thÃ¬ A sáº½ láº¥y láº¡i Ä‘Æ°á»£c 1BTC (B pháº£i gá»­i cho A). NgoÃ i ra, Tx nÃ y pháº£i Ä‘Æ°á»£c kÃ­ trÆ°á»›c khi Ä‘Æ°a BTC vÃ o trong AB.&lt;/p&gt;

&lt;p&gt;Minh hoáº¡:&lt;/p&gt;

&lt;p&gt;Sau khi tráº£ hoáº·c láº¥y láº¡i tiá»n, kÃªnh sáº½ Ä‘Ã³ng.&lt;/p&gt;

&lt;h2 id=&quot;heading-bidirectional-payment-channel-kÃªnh-thanh-toÃ¡n-Ä‘a-chiá»u&quot;&gt;Bidirectional Payment Channel: KÃªnh thanh toÃ¡n Ä‘a chiá»u&lt;/h2&gt;
&lt;p&gt;KhÃ´ng sá»­ dá»¥ng 2 kÃªnh thanh toÃ¡n 1 chiá»u thay tháº¿. Thay vÃ o Ä‘Ã³, ta sáº½ sá»­ dá»¥ng contract.&lt;/p&gt;

&lt;h3 id=&quot;heading-trÃªn-ethereum&quot;&gt;TrÃªn Ethereum&lt;/h3&gt;
&lt;p&gt;A vÃ  B sáº½ táº¡o má»™t contract chung, má»—i ngÆ°á»i Ä‘Ã³ng gÃ³p 0.5 ETH. LÃºc nÃ y, tráº¡ng thÃ¡i cá»§a contract sáº½ lÃ : &lt;br /&gt;
A: 0.5 ETH      B: 0.5 ETH      Nonce: 0. &lt;br /&gt;
Off chain: B gá»­i 0.1 ETH cho A báº±ng cÃ¡ch cáº£ 2 kÃ½ vÃ o state má»›i: &lt;br /&gt;
A: 0.6,  B: 0.4,  Nonce: 1, A sig,  B sig   &lt;br /&gt;
á» trÃªn chuá»—i, contract váº«n khÃ´ng Ä‘á»•i. Giáº£ sá»­, offchain, A vÃ  B Ä‘Ã£ gá»­i Ä‘i gá»­i láº¡i nhiá»u giao dá»‹ch:&lt;br /&gt;
A: 0.3,  B: 0.7,  Nonce: 7, A sig,  B sig &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;LÃºc nÃ y, A muá»‘n káº¿t thÃºc kÃªnh, sáº½ gá»­i sá»‘ dÆ° cuá»‘i cÃ¹ng vÃ  cÃ¡c chá»¯ kÃ½ cho contract. LÃºc nÃ y sáº½ báº¯t Ä‘áº§u Challenge Period (vÃ­ dá»¥ 3 ngÃ y). &lt;br /&gt;
Onchain: A: 0.3,    B: 0.7,     Nonce: 7. &lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Náº¿u trong 3 ngÃ y, B khÃ´ng lÃ m gÃ¬ thÃ¬ sá»‘ tiá»n vÃ  tráº¡ng thÃ¡i cá»§a contract sáº½ theo nhá»¯ng gÃ¬ A gá»­i lÃªn.&lt;/li&gt;
  &lt;li&gt;NgÆ°á»£c láº¡i, náº¿u B gá»­i lÃªn 1 state vá»›i sá»‘ Nonce lá»›n hÆ¡n (vÃ­ dá»¥ = 9), thÃ¬ contract sáº½ theo state cá»§a B.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Váº¥n Ä‘á» Ä‘Æ°á»£c Ä‘Æ°a ra lÃ  viá»‡c A vÃ  B pháº£i quan sÃ¡t thÆ°á»ng xuyÃªn xem Ä‘á»‘i phÆ°Æ¡ng cÃ³ gá»­i state cÅ© lÃªn khÃ´ng Ä‘á»ƒ cÃ³ thá»ƒ ká»‹p thá»i ngÄƒn cháº·n. Äiá»u nÃ y Ä‘Æ°á»£c giáº£i quyáº¿t báº±ng sá»± trá»£ giÃºp cá»§a WatchTower.&lt;/p&gt;

&lt;p&gt;TÃ³m láº¡i, viá»‡c giao dá»‹ch sáº½ chá»‰ tá»‘n 2 láº§n onchain:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Táº¡o channel&lt;/li&gt;
  &lt;li&gt;ÄÃ³ng channel vÃ  gá»­i tiá»n.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-trÃªn-bitcoin&quot;&gt;TrÃªn Bitcoin&lt;/h3&gt;
&lt;p&gt;VÃ¬ trÃªn UTXO khÃ´ng cÃ³ tráº¡ng thÃ¡i, nÃªn sáº½ khÃ³ khÄƒn hÆ¡n Ä‘á»ƒ táº¡o 1 kÃªnh thanh toÃ¡n 2 chiá»u. Giáº£i phÃ¡p Ä‘Æ°á»£c Ä‘Æ°a ra lÃ  khi update kÃªnh theo A, thÃ¬ A sáº½ nháº­n Ä‘Æ°á»£c Tx mÃ  lÃ m tráº¡ng thÃ¡i cÅ© cá»§a B máº¥t hiá»‡u lá»±c.&lt;/p&gt;

&lt;h4 id=&quot;heading-utxo&quot;&gt;UTXO&lt;/h4&gt;
&lt;p&gt;Ta sáº½ táº¡o UTXO mÃ  cÃ³ thá»ƒ dÃ¹ng theo 1 trong 2 cÃ¡ch (sá»­ dá»¥ng IF trong Opcode):&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Relative time-lock: UTXO chá»©a sá»‘ t. 1 Tx Ä‘Æ°á»£c kÃ­ há»£p lá»‡ cÃ³ thá»ƒ sá»­ dá»¥ng UTXO nÃ y sau t blocks (hoáº·c nhiá»u hÆ¡n) sau khi nÃ³ Ä‘Æ°á»£c táº¡o ra.&lt;/li&gt;
  &lt;li&gt;Hash lock: UTXO chá»©a má»™t sá»‘ X. Má»™t Tx Ä‘Æ°á»£c kÃ­ há»£p lá»‡ cÃ³ thá»ƒ sá»­ dá»¥ng UTXO nÃ y náº¿u cÃ³ sá»‘ x mÃ : SHA256(x) = X.
(x Ä‘Æ°á»£c gá»i lÃ  hash preimage cá»§a X).&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-vÃ­-dá»¥&quot;&gt;VÃ­ dá»¥:&lt;/h4&gt;
&lt;p&gt;Giáº£ sá»­ A vÃ  B Ä‘Æ°a BTC vÃ o trong 2-2 Multisig UTXO AB, vá»›i A lÃ  7BTC, B lÃ  3BTC. &lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A táº¡o sá»‘ ngáº«u nhiÃªn x, vÃ  X = SHA256(x).&lt;/li&gt;
  &lt;li&gt;B táº¡o sá»‘ ngáº«u nhiÃªn y, vÃ  Y = SHA256(y).&lt;/li&gt;
  &lt;li&gt;Sau Ä‘Ã³, A Ä‘Æ°a X cho B vÃ  ngÆ°á»£c láº¡i.&lt;/li&gt;
  &lt;li&gt;A táº¡o Tx1 vá»›i input lÃ  UTXO AB, output lÃ : &lt;br /&gt;
  1: pay 7 -&amp;gt; A,  &lt;br /&gt;
  2: 3 -&amp;gt; B (7 ngÃ y timelock) hoáº·c 3 -&amp;gt; A (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ y mÃ  Y = SHA256(y)).&lt;/li&gt;
  &lt;li&gt;B táº¡o Tx2 vá»›i input lÃ  UTXO AB, output lÃ : &lt;br /&gt;
  1: pay 3 -&amp;gt; B, &lt;br /&gt;
  2: 7 -&amp;gt; A (7 ngÃ y timelock) hoáº·c 7 -&amp;gt; B (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ x mÃ  X = SHA256(x)).&lt;/li&gt;
  &lt;li&gt;A cÃ³ thá»ƒ post Tx2, Ä‘á»£i 7 ngÃ y vÃ  láº¥y 7 BTC vá».&lt;/li&gt;
  &lt;li&gt;Giá» náº¿u A gá»­i 1BTC cho B offchain. A táº¡o x&apos; vÃ  X&apos; = SHA256(x&apos;). Sau Ä‘Ã³ Ä‘Æ°a X&apos; cho B.&lt;/li&gt;
  &lt;li&gt;A táº¡o Tx3 vá»›i input lÃ  UTXO AB, output lÃ : &lt;br /&gt;
  1: pay 6 -&amp;gt; A,  &lt;br /&gt;
  2: 4 -&amp;gt; B (7 ngÃ y timelock) hoáº·c 4 -&amp;gt; A (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ y mÃ  Y = SHA256(y)).&lt;/li&gt;
  &lt;li&gt;B táº¡o Tx4 vá»›i input lÃ  UTXO AB, output lÃ : &lt;br /&gt;
  1: pay 4 -&amp;gt; B, &lt;br /&gt;
  2: 6 -&amp;gt; A (7 ngÃ y timelock) hoáº·c 6 -&amp;gt; B (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ x&apos; mÃ  X&apos; = SHA256(x&apos;)).&lt;/li&gt;
  &lt;li&gt;LÃºc nÃ y, A cÃ³ thá»ƒ post Tx3 vÃ  Ä‘á»£i 7 ngÃ y. NhÆ°ng náº¿u A post stale state lÃ  Tx2, B sáº½ sá»­ dá»¥ng x Ä‘á»ƒ láº¥y háº¿t BTC. Do Ä‘Ã³, A khÃ´ng thá»ƒ gian láº­n vÃ  post lÃªn tráº¡ng thÃ¡i cÅ©.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-multihop-payments-thanh-toÃ¡n-nhiá»u-láº§n&quot;&gt;Multihop payments: Thanh toÃ¡n nhiá»u láº§n&lt;/h2&gt;
&lt;p&gt;A muá»‘n thanh toÃ¡n cho C qua trung gian khÃ´ng tin cáº­y lÃ  B (VÃ¬ A, C cÃ³ channel vá»›i B).&lt;/p&gt;

&lt;h3 id=&quot;heading-the-lightning-network&quot;&gt;The lightning network&lt;/h3&gt;
&lt;p&gt;Nhiá»u open payment channel 2 chiá»u. Khi A muá»‘n táº¡o kÃªnh vá»›i B thÃ¬ chá»‰ cáº§n tÃ¬m tuyáº¿n Ä‘Æ°á»ng qua Ä‘á»“ thá»‹ vá»›i Ä‘á»‰nh lÃ  cÃ¡c trung gian.&lt;/p&gt;

&lt;h2 id=&quot;heading-káº¿t-luáº­n&quot;&gt;Káº¿t luáº­n&lt;/h2&gt;
&lt;p&gt;ÄÃ¢y lÃ  cÃ¡ch tiáº¿p cáº­n Ä‘áº§u tiÃªn Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ¡c Tx trong blockchain. á» bÃ i viáº¿t sau, mÃ¬nh sáº½ giá»›i thiá»‡u má»™t kÄ© thuáº­t khÃ¡c giÃºp giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">Vá»›i Bitcoin, tá»‘c Ä‘á»™ thá»±c hiá»‡n giao dá»‹ch chá»‰ cÃ³ khoáº£ng 7 Tx / sec, cÃ²n vá»›i Ethereum, con sá»‘ nÃ y lÃ  15. Trong khi Ä‘Ã³, vá»›i VISA lÃ  2000, Paypal lÃ  200. Váº­y Ä‘á»ƒ cÃ¡c loáº¡i Blockchain nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u trÃªn tháº¿ giá»›i, cáº§n pháº£i cÃ³ nhá»¯ng giáº£i phÃ¡p Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ¡c giao dá»‹ch. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»™t cÃ¡ch lÃ  sá»­ dá»¥ng Payment Channel, háº¡n cháº¿ tÆ°Æ¡ng tÃ¡c vá»›i chuá»—i cÃ ng Ã­t cÃ ng tá»‘t, giÃºp tÄƒng tá»‘c Ä‘á»™.</summary></entry><entry><title type="html">Há»‡ thá»‘ng vay DeFi</title><link href="http://localhost:4000/blog/2023/08/17/defi-lending-system/" rel="alternate" type="text/html" title="Há»‡ thá»‘ng vay DeFi" /><published>2023-08-17T00:00:00+07:00</published><updated>2023-08-17T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/08/17/defi-lending-system</id><content type="html" xml:base="http://localhost:4000/blog/2023/08/17/defi-lending-system/">&lt;p&gt;á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» há»‡ thá»‘ng vay trong mÃ´i trÆ°á»ng phi táº­p trung. NhÆ°ng trÆ°á»›c háº¿t, ta sáº½ Ä‘i tÃ¬m hiá»ƒu viá»‡c vay trong há»‡ thá»‘ng táº­p trung sáº½ nhÆ° tháº¿ nÃ o vÃ  chá»©a nhá»¯ng rá»§i ro gÃ¬.&lt;/p&gt;

&lt;h2 id=&quot;heading-vay-trong-há»‡-thá»‘ng-táº­p-trung&quot;&gt;Vay trong há»‡ thá»‘ng táº­p trung&lt;/h2&gt;
&lt;p&gt;VÃ¬ sao cáº§n vay? CÃ³ cÃ¡c lÃ½ do chÃ­nh nhÆ° sau:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;VÃ­ dá»¥, Bob cáº§n vay ETH Ä‘á»ƒ mua má»™t NFT trong game nhÆ°ng anh áº¥y khÃ´ng muá»‘n bÃ¡n tÃ i sáº£n cá»§a mÃ¬nh Ä‘i.&lt;/li&gt;
  &lt;li&gt;LÃ  chiáº¿n lÆ°á»£c Ä‘áº§u tÆ°, khi tháº¿ cháº¥p ETH Ä‘á»ƒ nháº­n UNI, chá» tá»‰ giÃ¡ UNI/ETH giáº£m, thÃ¬ sá»‘ UNI bá» ra Ä‘á»ƒ mua 1ETH tráº£ khoáº£n vay sáº½ Ã­t hÆ¡n, tá»« Ä‘Ã³ nháº­n Ä‘Æ°á»£c UNI lÃ£i.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Trong há»‡ thá»‘ng táº­p trung, ngÆ°á»i cho vay gá»­i tiá»n vÃ o má»™t Tá»• chá»©c tÃ i chÃ­nh táº­p trung. NgÆ°á»i vay sáº½ tháº¿ cháº¥p 1 loáº¡i tÃ i sáº£n nÃ o Ä‘Ã³ vÃ  sáº½ Ä‘Æ°á»£c vay. Sau Ä‘Ã³, ngÆ°á»i vay sáº½ pháº£i tráº£ tiá»n lÃ£i cho Ä‘áº¿n khi tráº£ xong pháº§n Ä‘Ã£ vay. NgÆ°á»i cho vay sáº½ Ä‘Æ°á»£c nháº­n 1 pháº§n lÃ£i Ä‘Ã³. &lt;br /&gt; Tuy nhiÃªn, náº¿u ngÆ°á»i vay khÃ´ng tráº£ Ä‘Æ°á»£c khoáº£n vay, Tá»• chá»©c tÃ i chÃ­nh táº­p trung sáº½ mua láº¡i tÃ i sáº£n tháº¿ cháº¥p, vÃ  tráº£ láº¡i cho ngÆ°á»i vay pháº§n cÃ²n thá»«a. &lt;br /&gt; Náº¿u giÃ¡ trá»‹ tÃ i sáº£n tháº¿ cháº¥p bá»‹ thay Ä‘á»•i vÃ  Ã­t hÆ¡n tÃ i sáº£n vay, viá»‡c thanh lÃ½ tÃ i sáº£n tháº¿ cháº¥p sáº½ xáº£y ra.&lt;/p&gt;

&lt;p&gt;Tuy nhiÃªn, vá»›i há»‡ thá»‘ng táº­p trung, cÃ³ cÃ¡c váº¥n Ä‘á» Ä‘Æ°á»£c tháº¥y rÃµ nhÆ° sau:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;User cáº§n tin tÆ°á»Ÿng Tá»• chá»©c, nhÆ°ng náº¿u bá»‹ hack hoáº·c bá»‹ xÃ¢m nháº­p trÃ¡i phÃ©p, kháº£ nÄƒng máº¥t tiá»n ráº¥t cao.&lt;/li&gt;
  &lt;li&gt;Tá»• chá»©c Ä‘iá»u chá»‰nh tá»‰ lá»‡ lÃ£i,..&lt;/li&gt;
  &lt;li&gt;NgÆ°á»i cho vay sáº½ nháº­n Ã­t tiá»n lÃ£i hÆ¡n, vÃ¬ pháº£i chia 1 pháº§n cho tá»• chá»©c.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Do Ä‘Ã³, viá»‡c táº¡o ra há»‡ thá»‘ng vay phi táº­p trung khÃ´ng cáº§n bÃªn thá»© 3 vÃ  Ã¡p dá»¥ng tÃ­nh láº­p trÃ¬nh lÃ  má»¥c tiÃªu Ä‘Æ°á»£c ngÆ°á»i dÃ¹ng hÆ°á»›ng Ä‘áº¿n.&lt;/p&gt;

&lt;h2 id=&quot;heading-cÃ¡c-thuáº­t-ngá»¯&quot;&gt;CÃ¡c thuáº­t ngá»¯&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt; Collateral &lt;/strong&gt;: TÃ i sáº£n tháº¿ cháº¥p. Vai trÃ² lÃ  Ä‘áº·t cá»c Ä‘á»ƒ vay.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Over-collateralization &lt;/strong&gt;: Tháº¿ cháº¥p vÆ°á»£t má»©c. NgÆ°á»i vay pháº£i Ä‘áº£m báº£o giÃ¡ trá»‹ tháº¿ cháº¥p &amp;gt; giÃ¡ trá»‹ vay.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Under-collateralization &lt;/strong&gt;: Tháº¿ cháº¥p dÆ°á»›i má»©c. Xáº£y ra khi giÃ¡ trá»‹ tháº¿ cháº¥p &amp;lt; giÃ¡ trá»‹ vay.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Collateral Factor &lt;/strong&gt;: GiÃ¡ trá»‹ lá»›n nháº¥t cÃ³ thá»ƒ vay, tÃ­nh theo giÃ¡ trá»‹ tháº¿ cháº¥p. VÃ­ dá»¥ CF = 0.6, tháº¿ cháº¥p cÃ³ giÃ¡ trá»‹ lÃ  1000 DAI thÃ¬ giÃ¡ trá»‹ vay lá»›n nháº¥t cÃ³ thá»ƒ lÃ  0.6 * 1000 = 600 DAI.&lt;br /&gt;
Vá»›i tÃ i sáº£n cÃ³ Ä‘á»™ biáº¿n Ä‘á»™ng cao, CF thÆ°á»ng tháº¥p, ngÆ°á»£c láº¡i thÃ¬ CF cao. VÃ­ dá»¥: ETH, DAI:  83%, UNI: 75%, MKR:  73%&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Thanh lÃ½ &lt;/strong&gt; : Náº¿u sá»‘ tiá»n vay + lÃ£i (gá»i lÃ  ná»£ - Debt) &amp;gt; CF * Collateral (1) &lt;br /&gt;
=&amp;gt; TÃ i sáº£n tháº¿ cháº¥p sáº½ Ä‘Æ°á»£c thanh lÃ½ Ä‘áº¿n khi (1) khÃ´ng cÃ²n xáº£y ra.  Tá»‰ lá»‡ thanh lÃ½ giÃºp ngÆ°á»i cho vay cÃ³ thá»i gian thanh lÃ½ trÆ°á»›c khi gáº·p rá»§i ro.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Health &lt;/strong&gt; : Health cá»§a 1 mÃ³n ná»£ Ä‘Æ°á»£c tÃ­nh báº±ng cÃ´ng thá»©c sau: &lt;br /&gt; &lt;img src=&quot;https://latex.codecogs.com/svg.image?%20BorrowCapacity=%5Csum_%7Bi%7D%5E%7B%7Dvalue(collateral_%7Bi%7D)*CF_%7Bi%7D&quot; alt=&quot;Alt text&quot; /&gt; &lt;br /&gt;
&lt;img src=&quot;https://latex.codecogs.com/svg.image?health=%5Cfrac%7BBorowCapacity%7D%7Btotal%20Debt%7D&quot; alt=&quot;&quot; /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Náº¿u health &amp;lt; 1: Thanh lÃ½ sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t Ä‘áº¿n khi health &amp;gt;= 1.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Liquidity &lt;/strong&gt;: Thanh khoáº£n. LÃ  loáº¡i tÃ i sáº£n mÃ  viá»‡c mua bÃ¡n trÃªn thá»‹ trÆ°á»ng khÃ´ng thay Ä‘á»•i giÃ¡ trá»‹ thá»‹ trÆ°á»ng cá»§a nÃ³. NÃ³ cÅ©ng cÃ³ kháº£ nÄƒng chuyá»ƒn thÃ nh tiá»n máº·t.&lt;/p&gt;

&lt;h2 id=&quot;heading-defi-lending&quot;&gt;DeFi Lending&lt;/h2&gt;
&lt;h3 id=&quot;heading-Ã½-tÆ°á»Ÿng-vá»›i-orderbook-dapp&quot;&gt;Ã tÆ°á»Ÿng vá»›i OrderBook Dapp&lt;/h3&gt;
&lt;p&gt;LÆ°u trá»¯ cÃ¡c giao dá»‹ch trÃªn má»™t OrderBook. NgÆ°á»i vay táº¡o giao dá»‹ch vay vÃ  chá» ngÆ°á»i cho vay fill.
Báº¥t lá»£i:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Nhiá»u Txs, dáº«n Ä‘áº¿n tÃ­nh toÃ¡n phá»©c táº¡p&lt;/li&gt;
  &lt;li&gt;Rá»§i ro: KhÃ´ng tráº£ Ä‘Æ°á»£c ná»£,..&lt;/li&gt;
  &lt;li&gt;RÃºt tiá»n phá»©c táº¡p&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-liquidity-pool&quot;&gt;Liquidity Pool&lt;/h3&gt;
&lt;p&gt;Over-collateralized lending:  Compound and Aave
CÃ¡c LP (Liquidity Provider) cung cáº¥p tÃ i sáº£n vÃ o pool, vÃ  nháº­n nhá»¯ng token tÆ°Æ¡ng á»©ng vá»›i tÃ i sáº£n mÃ  há» Ä‘Ã£ cung cáº¥p. Sá»‘ lÆ°á»£ng cÃ¡c token dá»±a vÃ o Exchange Rate hiá»‡n táº¡i. Exchange Rate sáº½ Ä‘Æ°á»£c tÃ­nh láº¡i sau má»—i block.&lt;/p&gt;

&lt;p&gt;Vá»›i ngÆ°á»i vay, há» gá»­i tÃ i sáº£n vÃ o Pool vÃ  nháº­n cTokens. Sau Ä‘Ã³ khi muá»‘n vay (ETH), thÃ¬ token cá»§a há» sáº½ bá»‹ khoÃ¡ nhÆ° lÃ  Collateral, sau Ä‘Ã³ Compound sáº½ gá»­i ETH cho há». &lt;br /&gt;
Tiá»n lÃ£i tÃ­ch luá»¹ khi vay cá»§a ngÆ°á»i vay sáº½ lÃ m tÄƒng Exchange Rate ETH/token, tá»« Ä‘Ã³ giÃºp nhá»¯ng ngÆ°á»i cho vay (giá»¯ cÃ¡c token) Ä‘Æ°á»£c lá»£i Ã­ch khi token sáº½ tÄƒng giÃ¡.&lt;/p&gt;

&lt;h3 id=&quot;heading-the-exchange-rate&quot;&gt;The Exchange Rate&lt;/h3&gt;
&lt;p&gt;Giáº£ sá»­ vá»›i thá»‹ trÆ°á»ng ETH:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Supplying ETH: thÃªm vÃ o UnderlyingBalance&lt;/li&gt;
  &lt;li&gt;Borrowing ETH: thÃªm vÃ o totalBorrowBalance&lt;/li&gt;
  &lt;li&gt;LÃ£i pháº£i tráº£: thÃªm láº§n lÆ°á»£t vÃ o totalBorrowBalance&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://latex.codecogs.com/svg.image?ExchangeRate_%7BETH/token%7D=%5Cfrac%7BUnderlyingBalance&amp;plus;totalBorrowBalance-reserve%7D%7BcTokenSupply%7D&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Do Ä‘Ã³, náº¿u tá»•ng lÆ°á»£ng vay cÃ ng nhiá»u, thÃ¬ Exchange Rate sáº½ cÃ ng tÄƒng. NgÆ°á»£c láº¡i náº¿u lÆ°á»£ng UnderlyingBalance tÄƒng thÃ¬ lÆ°á»£ng cTokenSupply tÆ°Æ¡ng á»©ng cÅ©ng sáº½ tÄƒng, tá»« Ä‘Ã³ dáº«n Ä‘áº¿n ExchangeRate giáº£m.&lt;/p&gt;

&lt;h3 id=&quot;heading-interest-rate-lÃ£i-xuáº¥t&quot;&gt;Interest Rate: LÃ£i xuáº¥t&lt;/h3&gt;
&lt;p&gt;LÃ£i xuáº¥t Ä‘Æ°á»£c cáº­p nháº­p má»™t cÃ¡ch liÃªn tá»¥c. XÃ¡c Ä‘á»‹nh bá»Ÿi nhu cáº§u vá» tÃ i sáº£n vá»›i quy mÃ´ thá»‹ trÆ°á»ng.&lt;br /&gt;
Tá»‰ lá»‡ sá»­ dá»¥ng: &lt;br /&gt;
&lt;img src=&quot;https://latex.codecogs.com/svg.image?U_%7BETH%7D=%5Cfrac%7BtotalBorrowBalance%7D%7BavailableBalance&amp;plus;totalBorrowBalance%7D&quot; alt=&quot;&quot; /&gt; &lt;br /&gt;
Tá»‰ lá»‡ nÃ y thuá»™c khoáº£ng [0,1]. &lt;br /&gt;
Tá»‰ lá»‡ lÃ£i: interestRate = BaseRate + U(ETH) x slope(ETH).&lt;/p&gt;

&lt;h3 id=&quot;heading-thanh-lÃ½&quot;&gt;Thanh lÃ½&lt;/h3&gt;
&lt;p&gt;Náº¿u health &amp;lt; 1, thÃ¬ ai cÅ©ng cÃ³ thá»ƒ gá»i hÃ m: &lt;br /&gt;
liquidate(borrower,   CollateralAsset,   BorrowAsset,  uint amount) &lt;br /&gt;
Trong Ä‘Ã³:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;borrower: address cá»§a ngÆ°á»i vay&lt;/li&gt;
  &lt;li&gt;CollateralAsset: ngÆ°á»i thanh lÃ½ muá»‘n token tá»« tÃ i sáº£n nÃ y (VD: cDAI)&lt;/li&gt;
  &lt;li&gt;BorrowAsset: ngÆ°á»i thanh lÃ½ cung cáº¥p tÃ i sáº£n nÃ y (vÃ­ dá»¥ ETH) &lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;HÃ m nÃ y chuyá»ƒn ETH cá»§a ngÆ°á»i thanh lÃ½ ra thá»‹ trÆ°á»ng ETH vÃ  cung cáº¥p cho ngÆ°á»i thanh lÃ½ cDAI tá»« tÃ i sáº£n tháº¿ cháº¥p cá»§a ngÆ°á»i dÃ¹ng. Äiá»u nÃ y tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i ngÆ°á»i thanh lÃ½ Ä‘ang tráº£ khoáº£n ná»£ ETH cho ngÆ°á»i vay vÃ  nháº­n cDAI cá»§a ngÆ°á»i dÃ¹ng.&lt;/p&gt;

&lt;h2 id=&quot;heading-flash-loan&quot;&gt;Flash loan&lt;/h2&gt;
&lt;p&gt;LÃ  khoáº£n vay nhanh Ä‘Æ°á»£c thá»±c hiá»‡n vÃ  hoÃ n tráº£ trong 1 giao dá»‹ch. &lt;br /&gt;
=&amp;gt; zero risk cho ngÆ°á»i gá»­i, vÃ  khÃ´ng cáº§n tháº¿ cháº¥p.&lt;/p&gt;
&lt;h3 id=&quot;heading-cÃ¡c-trÆ°á»ng-há»£p-Ä‘Æ°á»£c-sá»­-dá»¥ng&quot;&gt;CÃ¡c trÆ°á»ng há»£p Ä‘Æ°á»£c sá»­ dá»¥ng&lt;/h3&gt;
&lt;h4 id=&quot;heading-chÃªnh-lá»‡ch-giÃ¡&quot;&gt;ChÃªnh lá»‡ch giÃ¡:&lt;/h4&gt;
&lt;p&gt;NgÆ°á»i dÃ¹ng Alice tháº¥y chÃªnh lá»‡ch giÃ¡ USDC/DAI trong 2 pool, cÃ³ thá»ƒ dÃ¹ng flash loan Ä‘á»ƒ kiáº¿m lá»i. VÃ­ dá»¥ á»Ÿ pool A cÃ³ ExchangeRate lÃ : 1.00, trong khi á»Ÿ pool B lÃ  1.01 thÃ¬ Alice cÃ³ thá»ƒ flash loan 1 USDC, dÃ¹ng Ä‘á»ƒ Ä‘á»•i Ä‘Æ°á»£c 1.01 DAI tá»« pool B. Sau Ä‘Ã³ dÃ¹ng 1.00 DAI Ä‘á»•i láº¥y 1 USDC tá»« pool A, vÃ  tráº£ flash loan. Do Ä‘Ã³, Alice sáº½ lá»i Ä‘Æ°á»£c 0.01 DAI.&lt;/p&gt;

&lt;h4 id=&quot;heading-hoÃ¡n-Ä‘á»•i-tÃ i-sáº£n-tháº¿-cháº¥p&quot;&gt;HoÃ¡n Ä‘á»•i tÃ i sáº£n tháº¿ cháº¥p&lt;/h4&gt;
&lt;p&gt;Nháº­n tháº¥y viá»‡c tháº¿ cháº¥p báº±ng ETH cÃ³ thá»ƒ bá»‹ sá»¥t giÃ¡ dáº«n Ä‘áº¿n thanh lÃ½, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘á»•i tÃ i sáº£n tháº¿ cháº¥p thÃ nh USDC. QuÃ¡ trÃ¬nh nhÆ° sau:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Nháº­n 1000 DAI flash loan&lt;/li&gt;
  &lt;li&gt;Tráº£ 1000 DAI Ä‘á»ƒ nháº­n 1 cETH&lt;/li&gt;
  &lt;li&gt;Äá»•i 1 cETH láº¥y 3000 cUSDC&lt;/li&gt;
  &lt;li&gt;Gá»­i 3000 cUSDC lÃ m tháº¿ cháº¥p Ä‘á»ƒ MÆ°á»£n 1000 DAI&lt;/li&gt;
  &lt;li&gt;Tráº£ 1000 DAI flash loan&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-má»™t-sá»‘-thÃ´ng-tin-khÃ¡c&quot;&gt;Má»™t sá»‘ thÃ´ng tin khÃ¡c&lt;/h2&gt;

&lt;h3 id=&quot;heading-dao-decentralized-orgs&quot;&gt;DAO: Decentralized orgs&lt;/h3&gt;
&lt;p&gt;LÃ  1 DApp Ä‘Æ°á»£c triá»ƒn khai onchain táº¡i 1 Ä‘á»‹a chá»‰ cá»¥ thá»ƒ. &lt;br /&gt;
Ai cÅ©ng cÃ³ thá»ƒ gá»­i tiá»n vÃ o kho báº¡c cá»§a DAO vÃ  gá»­i Ä‘á» xuáº¥t lÃªn DAO. Äá» xuáº¥t Ä‘Æ°á»£c thÃ´ng qua vÃ  Ä‘Æ°á»£c cÃ¡c thÃ nh viÃªn tham gia vote.
VÃ­ dá»¥:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;PleaseDAO: Ä‘áº§u tÆ° vÃ o NFTs&lt;/li&gt;
  &lt;li&gt;Gitcoin: TÃ i trá»£ cho cÃ¡c dá»± Ã¡n openSource.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-giao-thá»©c-compound&quot;&gt;Giao thá»©c Compound&lt;/h3&gt;
&lt;p&gt;LÃ  giao thá»©c trÃªn Ethereum, thiáº¿t láº­p thá»‹ trÆ°á»ng tiá»n tá»‡, lÃ  nhá»¯ng nhÃ³m tÃ i sáº£n cÃ³ lÃ£i suáº¥t theo thuáº­t toÃ¡n, dá»±a vÃ  cung vÃ  cáº§u cá»§a tÃ i sáº£n Ä‘Ã³. CÃ¡c nhÃ  cung cáº¥p vÃ  ngÆ°á»i vay sáº½ tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i giao thá»©c, khÃ´ng cáº§n pháº£i thÆ°Æ¡ng lÆ°á»£ng cÃ¡c Ä‘iá»u khoáº£n nhÆ° kÃ¬ háº¡n, lÃ£i suáº¥t, hoáº·c tÃ i sáº£n tháº¿ cháº¥p,..&lt;/p&gt;

&lt;h3 id=&quot;heading-supplying-assets&quot;&gt;Supplying Assets&lt;/h3&gt;
&lt;p&gt;Tá»•ng há»£p nguá»“n cung tá»« cÃ¡c user. Khi user cung cáº¥p assets, nÃ³ trá»Ÿ thÃ nh tÃ i nguyÃªn thay tháº¿ Ä‘Æ°á»£c, vÃ  mang láº¡i tÃ­nh thanh khoáº£n cÃ¡o hÆ¡n khi cho vay trá»±c tiáº¿p. Tá»« Ä‘Ã³ ngÆ°á»i cho vay cÃ³ thá»ƒ rÃºt tiá»n báº¥t cá»© lÃºc nÃ o.&lt;/p&gt;

&lt;h3 id=&quot;heading-borrowing-assets&quot;&gt;Borrowing Assets&lt;/h3&gt;
&lt;p&gt;Cho phÃ©p ngÆ°á»i dÃ¹ng vay dá»… dÃ ng, sá»­ dá»¥ng cTokens lÃ m tháº¿ cháº¥p. NgÆ°á»i dÃ¹ng khÃ´ng cáº§n Ä‘iá»u khoáº£n Ä‘Ã m phÃ¡n, ngÃ y Ä‘Ã¡o háº¡n,..&lt;/p&gt;

&lt;p&gt;Chi tiáº¿t vá» giao thá»©c Compound, cÃ¡c báº¡n cÃ³ thá»ƒ xem á»Ÿ &lt;a href=&quot;https://compound.finance/documents/Compound.Whitepaper.pdf&quot;&gt;Ä‘Ã¢y&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;heading-cross-chain-atomicswap&quot;&gt;Cross-chain AtomicSwap&lt;/h3&gt;
&lt;h4 id=&quot;heading-cÃ¡c-thuáº­t-ngá»¯-cÆ¡-báº£n&quot;&gt;CÃ¡c thuáº­t ngá»¯ cÆ¡ báº£n&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt; HTLC&lt;/strong&gt;: hash time-locked contract &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Time-lock &lt;/strong&gt; KhoÃ¡ thá»i gian, khi Ä‘Ãºng khoÃ¡ thÃ¬ cáº§n 1 khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh Ä‘á»ƒ pass, tá»©c lÃ  háº¿t thá»i gian thÃ¬ má»›i má»Ÿ Ä‘Æ°á»£c. &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; Hash lock&lt;/strong&gt; YÃªu cáº§u key Ä‘Ãºng + secret code. Sau khi nháº­p code thÃ¬ sáº½ hiá»ƒn thá»‹ lÃªn cho má»i ngÆ°á»i.&lt;/p&gt;

&lt;h4 id=&quot;heading-ká»‹ch-báº£n&quot;&gt;Ká»‹ch báº£n&lt;/h4&gt;
&lt;p&gt;Alice muá»‘n Bitcoin, Bob muá»‘n BCash. A vÃ  B quyáº¿t Ä‘á»‹nh Ä‘á»•i cho nhau. CÃ¡c bÆ°á»›c nhÆ° sau:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Alice táº¡o 2 Hashlock, yÃªu cáº§u cÃ¹ng 1 SecretCode. NhÆ°ng key thÃ¬ 1 cÃ¡i lÃ  key cá»§a A, 1 cÃ¡i cáº§n key cá»§a B.&lt;/li&gt;
  &lt;li&gt;Alice Ä‘áº·t HashlockA vÃ  HashlockB vÃ o láº§n lÆ°á»£t mailBoxA vÃ  mailBox B.&lt;/li&gt;
  &lt;li&gt;Alice Ä‘Æ°a BCash vÃ o mailbox B, Bob Ä‘Æ°a Bitcoin vÃ o mailbox A.&lt;/li&gt;
  &lt;li&gt;Sau Ä‘so, Alice Ä‘áº¿n mailboxA, nháº­p keyA vÃ  secretCode, nháº­n bitcoin. Äá»“ng thá»i, sau khi Alice nháº­p, secretCode hiá»ƒn thá»‹ cho má»i ngÆ°á»i nÃªn Bob sáº½ nháº­p theo + key vÃ o mailBoxB, nháº­n Ä‘Æ°á»£c BCash.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;TrÆ°á»ng há»£p A khÃ´ng nháº­p SecreteCode hoáº·c cá»‘ Ã½ chá»‰nh sai SecretCode á»Ÿ 2 lock, thÃ¬ time-lock sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Äá»™ dÃ i cá»§a locktime cá»§a A pháº£i lá»›n hÆ¡n cá»§a B (1 tuáº§n &amp;gt;&amp;lt; 1 ngÃ y) vÃ¬ A biáº¿t secretCode. Do Ä‘Ã³, khi B biáº¿t A lá»«a dá»‘i, B cÃ³ thá»ƒ quay láº¡i mailBoxA vÃ  láº¥y tiá»n vá» ngay láº­p tá»©c (vÃ¬ lÃºc Ä‘Ã³ A váº«n Ä‘ang Ä‘á»£i háº¿t timelock Ä‘á»ƒ láº¥y Ä‘Æ°á»£c tiá»n). NgÆ°á»£c láº¡i náº¿u locktime cá»§a A nhá» hÆ¡n hoáº·c báº±ng B, thÃ¬ A cÃ³ thá»ƒ Ä‘á»£i Ä‘áº¿n khi háº¿t háº¡n, nháº­p code vÃ  láº¥y tiá»n (vÃ¬ A cÃ³ key cá»§a B lÃºc táº¡o lock).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-káº¿t-luáº­n&quot;&gt;Káº¿t luáº­n&lt;/h2&gt;
&lt;p&gt;á» trÃªn lÃ  toÃ n bá»™ hiá»ƒu biáº¿t cá»§a mÃ¬nh vá» há»‡ thá»‘ng vay phi táº­p trung.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» há»‡ thá»‘ng vay trong mÃ´i trÆ°á»ng phi táº­p trung. NhÆ°ng trÆ°á»›c háº¿t, ta sáº½ Ä‘i tÃ¬m hiá»ƒu viá»‡c vay trong há»‡ thá»‘ng táº­p trung sáº½ nhÆ° tháº¿ nÃ o vÃ  chá»©a nhá»¯ng rá»§i ro gÃ¬.</summary></entry><entry><title type="html">SÃ n giao dá»‹ch phi táº­p trung</title><link href="http://localhost:4000/blog/2023/08/15/dex/" rel="alternate" type="text/html" title="SÃ n giao dá»‹ch phi táº­p trung" /><published>2023-08-15T00:00:00+07:00</published><updated>2023-08-15T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/08/15/dex</id><content type="html" xml:base="http://localhost:4000/blog/2023/08/15/dex/">&lt;h2 id=&quot;heading-khÃ¡i-niá»‡m&quot;&gt;KhÃ¡i niá»‡m&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt; SÃ n giao dá»‹ch phi táº­p trung &lt;/strong&gt; lÃ  loáº¡i á»©ng dá»¥ng phi táº­p trung, xÃ¢y dá»±ng vá»›i Smartcontract, cho phÃ©p users trao Ä‘á»•i ERC20 token hoáº·c NFT trá»±c tiáº¿p vá»›i cÃ¡c users khÃ¡c.&lt;/p&gt;

&lt;h3 id=&quot;heading-lá»£i-Ã­ch&quot;&gt;Lá»£i Ã­ch:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;KhÃ´ng giá»¯ tiá»n: KhÃ´ng cÃ³ bÃªn thá»© 3 giá»¯ tiá»n trung gian cÃ¡c giao dá»‹ch&lt;/li&gt;
  &lt;li&gt;Chá»‘ng kiá»ƒm duyá»‡t: Ai gá»­i Tx Ä‘á»u cÃ³ thá»ƒ sá»­ dá»¥ng&lt;/li&gt;
  &lt;li&gt;Permissionless: cÃ³ thá»ƒ há»— trá»£ báº¥t kÃ¬ asset nÃ o.&lt;/li&gt;
  &lt;li&gt;Thuáº­n tiá»‡n: KhÃ´ng pháº£i gá»­i tÃ i sáº£n trÃªn chuá»—i vÃ o má»™t sÃ n giao dá»‹ch&lt;/li&gt;
  &lt;li&gt;TÃ­nh láº­p trÃ¬nh: Thanh khoáº£n cÃ³ thá»ƒ xem bá»Ÿi cÃ¡c smartcontract&lt;/li&gt;
  &lt;li&gt;TÃ­nh nguyÃªn tá»­:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt; Orderbook &lt;/strong&gt; lÃ  sá»• lá»‡nh, bao gá»“m cÃ¡c lá»‡nh báº¡n vÃ  mua tÃ i sáº£n theo tá»«ng má»©c giÃ¡ nháº¥t Ä‘á»‹nh. CÆ¡ cháº¿ khá»›p lá»‡nh nÃ y khiáº¿n lá»‡nh cá»§a ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c thá»±c thi khi giÃ¡ cá»§a sá»• lá»‡nh khá»›p vá»›i giÃ¡ ngÆ°á»i dÃ¹ng mua hoáº·c bÃ¡n.&lt;/p&gt;

&lt;h2 id=&quot;heading-cÃ¡c-loáº¡i-dex&quot;&gt;CÃ¡c loáº¡i DEX&lt;/h2&gt;
&lt;h3 id=&quot;heading-on-chain-orderbook&quot;&gt;On-chain orderbook&lt;/h3&gt;
&lt;p&gt;Market makers Ä‘áº·t cÃ¡c order lÃªn chuá»—i, ngÆ°á»i dÃ¹ng sáº½ Ä‘iá»n cÃ¡c order nÃ y trá»±c tiáº¿p trÃªn chuá»—i náº¿u há» muá»‘n giao dá»‹ch. Tuy nhiÃªn, cÃ¡ch nÃ y sáº½ gÃ¢y tá»‘n gas ráº¥t nhiá»u.&lt;/p&gt;

&lt;h3 id=&quot;heading-off-chain-orderbook&quot;&gt;Off-chain orderbook&lt;/h3&gt;
&lt;p&gt;Market makers kÃ­ cÃ¡c orders ngoÃ i chuá»—i. NgÆ°á»i dÃ¹ng sáº½ Ä‘iá»n cÃ¡c order nÃ y rá»“i submit nÃ³ lÃªn chuá»—i. CÃ¡ch nÃ y sáº½ khÃ´ng táº­n dá»¥ng kháº£ nÄƒng láº­p trÃ¬nh vÃ  thanh khoáº£n sáº½ khÃ´ng hiá»ƒn thá»‹ vá»›i smartcontract.&lt;/p&gt;

&lt;h3 id=&quot;heading-dutch-auctions&quot;&gt;Dutch auctions&lt;/h3&gt;
&lt;p&gt;User Ä‘áº·t cÃ¡c order lÃªn chuá»—i, giÃ¡ sáº½ tá»« tá»« Ä‘iá»u chá»‰nh Ä‘á»ƒ thu hÃºt. Market maker sáº½ Ä‘iá»n order Ä‘Ã³ khi há» thÃ­ch má»©c giÃ¡ Ä‘Ã³. Váº¥n Ä‘á» cá»§a cÃ¡ch nÃ y lÃ  Ä‘iá»u chá»‰nh giÃ¡ cháº­m&lt;/p&gt;

&lt;h3 id=&quot;heading-automated-market-maker&quot;&gt;Automated market maker&lt;/h3&gt;
&lt;p&gt;Market markers sáº½ Ä‘Æ°a cÃ¡c tÃ i sáº£n vÃ o trong 1 pool. NgÆ°á»i dÃ¹ng sáº½ trade vá»›i pool Ä‘Ã³ má»›i má»©c giÃ¡ Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi thuáº­t toÃ¡n.&lt;br /&gt;
Lá»£i Ã­ch:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Tiáº¿t kiá»‡m gas&lt;/li&gt;
  &lt;li&gt;Dá»… sá»­ dá»¥ng, â€¦&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-cÃ¡ch-automated-market-maker-amm-hoáº¡t-Ä‘á»™ng&quot;&gt;CÃ¡ch Automated market maker (AMM) hoáº¡t Ä‘á»™ng&lt;/h2&gt;
&lt;p&gt;Giáº£ sá»­ 1 AMM cÃ³ 2 loáº¡i tÃ i sáº£n, 1 lÃ  X (risky, vÃ­ dá»¥: ETH), 2 lÃ  Y (stable, vÃ­ dá»¥ DAI). AMM lÆ°u trá»¯ x Ä‘á»“ng X vÃ  y Ä‘á»“ng Y. AMM Ä‘á» nghá»‹ mua hoáº·c bÃ¡n tÃ i sáº£n X á»Ÿ má»™t giÃ¡ trá»‹ p nÃ o Ä‘Ã³.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Giáº£ sá»­, ta muá»‘n duy trÃ¬ tÃ i sáº£n X vÃ  Y trong pool vá»›i tá»‰ lá»‡ a/b. Giáº£ sá»­ lÃ  50/50
VÃ¬ p lÃ  giÃ¡ trá»‹ cá»§a X nÃªn ta tháº¥y&lt;br /&gt;
                    p.x = y &lt;br /&gt;
                    &amp;lt;=&amp;gt; p = y / x. &lt;br /&gt;
Khi Ä‘Ã³, náº¿u ai Ä‘Ã³ bÃ¡n lÆ°á»£ng ETH (X) Ä‘á»ƒ láº¥y DAI (Y) thÃ¬ x sáº½ tÄƒng vÃ  y giáº£m xuá»‘ng. DÃ³ Ä‘Ã³ giÃ¡ trá»‹ p sáº½ giáº£m Ä‘i.
Äiá»u nÃ y tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i x, y tá»‰ lá»‡ nghá»‹ch vá»›i nhau. &lt;br /&gt;
Gá»i x * y = k thÃ¬ k Ä‘Æ°á»£c gá»i lÃ  háº±ng sá»‘ dá»± trá»¯.&lt;/p&gt;

&lt;p&gt;HÃ¬nh áº£nh: ///&lt;/p&gt;

&lt;p&gt;VÃ­ dá»¥: Náº¿u pool cÃ³ 10 ETH, 1000 DAI. GiÃ¡ cá»§a 1 ETH = 100 DAI. &lt;br /&gt;
Háº±ng sá»‘ dá»± trá»¯: k = x * y = 10 * 1000 = 10000.&lt;/p&gt;

&lt;p&gt;1) Giáº£ sá»­ user muá»‘n Ä‘á»•i DAI láº¥y ETH. Muá»‘n Ä‘á»•i 500 DAI + 0.3% phÃ­ Ä‘á»ƒ Ä‘á»•i láº¥y ETH.  &lt;br /&gt;
LÃºc nÃ y: y&apos; = 500 + 1500 = 1500. &lt;br /&gt;
=&amp;gt; x&apos; = 10000 / 1500 = 6.66 ETH. &lt;br /&gt;
LÃºc Ä‘Ã³, user nÃ y sáº½ nháº­n: 10 - 6.66 = 3.33 ETH =&amp;gt; GiÃ¡ p cá»§a 1 ETH = 150 DAI (TÄƒng giÃ¡).&lt;/p&gt;

&lt;p&gt;2) Giáº£ sá»­ user muá»‘n Ä‘á»•i ETH láº¥y DAI. Äá»”i 6ETH + 0.3% láº¥y DAI. &lt;br /&gt;
LÃºc nÃ y: x&apos; = 10 + 6 = 16 &lt;br /&gt;
=&amp;gt; y&apos; - 10000/ 16 = 625. User nháº­n 1000 - 625 = 375 DAI. &lt;br /&gt;
GiÃ¡ p 1ETH = 62.5 DAI, giáº£m 37.5 so vá»›i ban Ä‘áº§u.&lt;/p&gt;

&lt;h3 id=&quot;heading-liquidity-provider&quot;&gt;Liquidity Provider&lt;/h3&gt;
&lt;p&gt;LÃ  nhá»¯ng ngÆ°á»i cung cáº¥p thanh khoáº£n cho pool, nháº­n láº¡i Ä‘Æ°á»£c cÃ¡c Liquidity Token, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i thanh khoáº£n mÃ  há» cung cáº¥p. Khi ngÆ°á»i dÃ¹ng Ä‘á»•i cÃ¡c tÃ i sáº£n trong pool, pháº§n trÄƒm phÃ­ sáº½ Ä‘Æ°á»£c tráº£ cho cÃ¡c LP nÃ y dá»±a vÃ o sá»‘ thanh khoáº£n mÃ  há» cung cáº¥p.&lt;/p&gt;

&lt;p&gt;Äá»™ thanh khoáº£n cá»§a pool Ä‘Æ°á»£c tÃ­nh báº±ng cÃ´ng thá»©c:  L = sqrt(k) = sqrt(x * y).&lt;/p&gt;

&lt;h3 id=&quot;heading-nhá»¯ng-Ä‘iá»ƒm-cáº§n-phÃ¡t-triá»ƒn-cá»§a-amm&quot;&gt;Nhá»¯ng Ä‘iá»ƒm cáº§n phÃ¡t triá»ƒn cá»§a AMM&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;PhÃ­ gas&lt;/li&gt;
  &lt;li&gt;TrÆ°á»£t giÃ¡: Biáº¿n Ä‘á»™ng giÃ¡ bá»Ÿi cÃ¡c giao dá»‹ch tá»« ngÆ°á»i dÃ¹ng&lt;/li&gt;
  &lt;li&gt;ChÃªnh lá»‡ch giÃ¡&lt;/li&gt;
  &lt;li&gt;Hiá»‡u quáº£ sá»­ dá»¥ng vá»‘n&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;heading-concentrated-liquidity&quot;&gt;Concentrated Liquidity&lt;/h2&gt;
&lt;p&gt;Äá»ƒ tÄƒng hiá»‡u quáº£ sá»­ dá»¥ng vá»‘n, cÃ¡c LP cÃ³ thá»ƒ gá»­i thanh khoáº£n á»Ÿ má»©c giÃ¡ trong khoáº£ng cá»¥ thá»ƒ. VÃ­ dá»¥ nhÆ° á»Ÿ hÃ¬nh áº£nh trÃªn, lÃ  chuyá»ƒn Ä‘Æ°á»ng cong xy = k xuá»‘ng dÆ°á»›i vÃ  sang trÃ¡i. &lt;br /&gt;
LÃ­ do lÃ  vÃ¬ giÃ¡ trá»‹ p cá»§a thanh khoáº£n sáº½ chá»‰ á»Ÿ trong 1 khoáº£ng nháº¥t Ä‘á»‹nh (VÃ­ dá»¥ DAI chá»‰ á»Ÿ trong khoáº£ng tá»« (0.95 ~ 1.05) USD). Do Ä‘Ã³, khi PL cung cáº¥p thanh khoáº£n á»Ÿ khoáº£ng tá»« (0, âˆ) thÃ¬ hiá»‡u quáº£ sá»­ dá»¥ng vá»‘n cá»§a há» sáº½ khÃ´ng Ä‘Æ°á»£c cao. Do Ä‘Ã³, á»Ÿ má»—i sá»‘ sÃ n giao dá»‹ch, viá»‡c thanh khoáº£n táº­p trung trÃ´ng 1 khoáº£ng há»¯u háº¡n lÃ  1 vá»‹ trÃ­. Vá»‹ trÃ­ nÃ y cáº§n duy trÃ¬ Ä‘á»§ dá»¯ trá»¯ Ä‘á»ƒ há»— trá»£ giao dá»‹ch trong pháº¡m vi cá»§a nÃ³. Tá»« Ä‘Ã³ khiáº¿n nÃ³ hoáº¡t Ä‘á»™ng nhÆ° má»™t constant product pool vá»›i dá»± trá»¯ lá»›n hÆ¡n trong khoáº£ng Ä‘Ã³. Tá»« Ä‘Ã³ viá»‡c sá»­ dá»¥ng vá»‘n sáº½ cÃ³ hiá»‡u quáº£ hÆ¡n.&lt;/p&gt;

&lt;h2 id=&quot;heading-káº¿t-luáº­n&quot;&gt;Káº¿t luáº­n&lt;/h2&gt;
&lt;p&gt;Vá» cÃ¡ch cÃ¡c loáº¡i sÃ n hoáº¡t Ä‘á»™ng, má»i ngÆ°á»i cÃ³ thá»ƒ xem á»Ÿ cÃ¡c whitePaper, vÃ­ dá»¥ vá»›i &lt;a href=&quot;https://uniswap.org/whitepaper.pdf&quot;&gt;Uniswap&lt;/a&gt; .&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">KhÃ¡i niá»‡m</summary></entry><entry><title type="html">Solidity vÃ  State Trie</title><link href="http://localhost:4000/blog/2023/07/24/solidity-va-state-trie/" rel="alternate" type="text/html" title="Solidity vÃ  State Trie" /><published>2023-07-24T00:00:00+07:00</published><updated>2023-07-24T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/07/24/solidity-va-state-trie</id><content type="html" xml:base="http://localhost:4000/blog/2023/07/24/solidity-va-state-trie/">&lt;p&gt;á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» Solidity vÃ  World State Trie&lt;/p&gt;

&lt;h2 id=&quot;heading-solidity&quot;&gt;Solidity&lt;/h2&gt;
&lt;p&gt;Solidity lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh cho Blockchain Ethereum, lÃ  ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, cáº¥p cao Ä‘á»ƒ triá»ƒn khai cÃ¡c smartcontracts. Smartcontract lÃ  chÆ°Æ¡ng trÃ¬nh chi phá»‘i cÃ¡c hÃ nh vi cá»§a Account trong Ethereum State. Account contract Ä‘Æ°á»£c táº¡o ra khi cháº¡y má»™t smartcontract. Má»i ngÆ°á»i cÃ³ thá»ƒ Ä‘á»c account contract state á»Ÿ trong storage array, nÃªn khÃ´ng bao giá» Ä‘Æ°á»£c lÆ°u trá»¯ cÃ¡c bÃ­ máº­t trong contract.&lt;/p&gt;

&lt;p&gt;Má»™t sá»‘ dáº¡ng biáº¿n cá»§a Solidity nhÆ°: uint256, address(byte 32), bool,â€¦ CÃ¡c loáº¡i tham chiáº¿u lÃ  máº£ng, struct, string, map,â€¦ Khi má»™t giao dá»‹ch Ä‘i tá»« A â‡¾ B â‡¾ C â‡¾ D thÃ¬ táº¡i D, msg.sender lÃ  C, nhÆ°ng tx.origin lÃ  A.&lt;/p&gt;

&lt;p&gt;ERC20 lÃ  API tiÃªu chuáº©n cho fungible token, cung cáº¥p cÃ¡c chá»©c nÄƒng cÆ¡ báº£n Ä‘á»ƒ chuyá»ƒn token hoáº·c cho phÃ©p token Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi bÃªn thá»© 3.&lt;/p&gt;

&lt;p&gt;CÃ¡c kiá»ƒu lÆ°u trá»¯:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Stack variables: Ráº» Ä‘á»ƒ sá»­ dá»¥ng, phÃ¹ há»£p vá»›i má»i loáº¡i dá»¯ liá»‡u (khÃ´ng qua 32 bytes)&lt;/li&gt;
  &lt;li&gt;Calldata: LÃ  1 máº£ng byte chá»‰ Ä‘á»c, tá»‘n gas&lt;/li&gt;
  &lt;li&gt;Memory: 1 byte máº£ng, ráº», nhÆ°ng chi phÃ­ tÄƒng theo cáº¥p sá»‘ nhÃ¢n, lÆ°u Ä‘Æ°á»£c dá»¯ liá»‡u &amp;gt; 32 bytes&lt;/li&gt;
  &lt;li&gt;Storage: Äáº¯t, mappings vÃ  cÃ¡c biáº¿n state lÆ°u trong nÃ y.&lt;/li&gt;
  &lt;li&gt;Event logs: ráº», khÃ´ng cáº§n truy cáº­p Ä‘áº¿n contract.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;á» trÃªn lÃ  má»™t sá»‘ hiá»ƒu biáº¿t cá»§a mÃ¬nh vá» solidity, vá» máº·t coding, má»i ngÆ°á»i nÃªn xem á»Ÿ &lt;a href=&quot;https://docs.soliditylang.org/en/latest/&quot;&gt;Ä‘Ã¢y&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;heading-state-trie-ethereum-state-trie&quot;&gt;State trie (Ethereum state trie)&lt;/h2&gt;
&lt;p&gt;HÃ¬nh áº£nh Ä‘Ã¢y lÃ  cáº¥u trÃºc Ä‘Æ°á»£c táº¡o bá»Ÿi cÃ¡c loáº¡i State trong Ethereum: (á»Ÿ gÃ³c pháº£i dÆ°á»›i hÃ¬nh áº£nh)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.stack.imgur.com/afWDt.jpg&quot; width=&quot;900&quot; height=&quot; 600&quot; /&gt;&lt;/p&gt;

&lt;p&gt;CÃ³ 3 loáº¡i state chÃ­nh lÃ  World state, Transaction, vÃ  Transaction Receipt.&lt;/p&gt;

&lt;h3 id=&quot;heading-world-state-trie&quot;&gt;World State Trie&lt;/h3&gt;
&lt;p&gt;World State Trie LÃ  mapping giá»¯a Ä‘á»‹a chá»‰ vÃ  Account State. NÃ³ Ä‘Æ°á»£c update bá»Ÿi cÃ¡c Tx, vÃ  lÆ°u trá»¯ má»i thÃ´ng tin vá» accounts vÃ  cÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c qua cÃ¡c truy váº¥n.
Trong World State Trie cÃ³ Account Storage Trie, nÆ¡i cÃ¡c dá»¯ liá»‡u liÃªn káº¿t vá»›i account Ä‘Æ°á»£c lÆ°u trá»¯. NÃ³ chá»‰ liÃªn quan Ä‘áº¿n cÃ¡c contract account vÃ  má»i dá»¯ liá»‡u Ä‘Æ°á»£c Ã¡nh xáº¡ giá»¯a cÃ¡c sá»‘ nguyÃªn 32 byte.&lt;/p&gt;

&lt;p&gt;Account State lÃ  cÃ¡c thÃ´ng tin vá» má»™t Ethereum account, nhÆ° balance, nonce, storage Root, codehash,â€¦ vÃ  lÃ  lÃ¡ cá»§a World State Trie.&lt;/p&gt;

&lt;h3 id=&quot;heading-transaction-trie&quot;&gt;Transaction Trie&lt;/h3&gt;
&lt;p&gt;Transaction Trie lÆ°u trá»¯ cÃ¡c Tx trong Ethereum. Khi cÃ¡c Tx lÆ°u trá»¯ trong block, nÃ³ khÃ´ng thá»ƒ bá»‹ thay Ä‘á»•i. NÃ³ Ä‘Æ°á»£c xÃ¢y dá»±ng theo cáº¥u trÃºc Modified Merkel Patricia Trie, vÃ  chá»‰ cÃ³ node root má»›i Ä‘Æ°á»£c Ä‘Æ°a vÃ o trong block.&lt;/p&gt;

&lt;h3 id=&quot;heading-transaction-receipt-triereceipt-trie&quot;&gt;Transaction Receipt Trie(Receipt Trie)&lt;/h3&gt;
&lt;p&gt;Transaction Receipt Trie lÆ°u trá»¯ Ä‘áº§u ra cá»§a cÃ¡c Txs. Äáº§u ra lÃ  káº¿t quáº£ cá»§a má»™t Tx mÃ  Ä‘Æ°á»£c cháº¡y thÃ nh cÃ´ng, bao gá»“m H(Txs), block number, gas Used, Ä‘á»‹a chá»‰ cá»§a contract.&lt;/p&gt;

&lt;h3 id=&quot;heading-vÃ­-dá»¥-cáº¥u-trÃºc-cá»§a-world-state-má»™t-cÃ¡ch-Ä‘Æ¡n-giáº£n&quot;&gt;VÃ­ dá»¥ cáº¥u trÃºc cá»§a World State (má»™t cÃ¡ch Ä‘Æ¡n giáº£n)&lt;/h3&gt;
&lt;p&gt;Äá»ƒ Ä‘Æ¡n giáº£n, ta giáº£ sá»­ cÃ¡c node lÃ¡ cá»§a World State Trie chá»‰ bao gá»“m Ä‘á»‹a chá»‰ lÃ  sá»‘ dÆ° theo cáº·p Key - Value. 
CÃ¡c loáº¡i thÃ´ng tin:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Leaf Node: node lÃ¡ cá»§a cÃ¢y, chá»©a cÃ¡c tráº¡ng thÃ¡i cá»§a 1 tÃ i khoáº£n cÃ³ Ä‘á»‹a chá»‰ lÃ  Key&lt;/li&gt;
  &lt;li&gt;Branch Node: gá»“m 16 Ã´, lÃ  cÃ¡c tiá»n tá»‘ cá»§a Key.&lt;/li&gt;
  &lt;li&gt;Extension Node: node chá»‰ cÃ³ 1 child&lt;/li&gt;
  &lt;li&gt;Nibble: LÃ  pháº§n chung trong Key, 1 Nibble = 4 bits, lÆ°u trong keyend hoáº·c shared nibble.&lt;/li&gt;
  &lt;li&gt;Prefixes:
    &lt;ul&gt;
      &lt;li&gt;0: extension node cÃ³ sá»‘ cháºµn Nibble&lt;/li&gt;
      &lt;li&gt;1: extension node cÃ³ sá»‘ láº» Niblle&lt;/li&gt;
      &lt;li&gt;2: leaf node, cÃ³ sá»‘ cháºµn Nibble&lt;/li&gt;
      &lt;li&gt;3: leaf node, cÃ³ sá»‘ láº» Nibble.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minh Hoáº¡:
World State Trie vá»›i 4 cáº·p Key - Value nhÆ° sau:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;a711355: 45 ETH&lt;/li&gt;
  &lt;li&gt;a77d337: 1 WEI&lt;/li&gt;
  &lt;li&gt;a7f9365: 1.1 ETH&lt;/li&gt;
  &lt;li&gt;a77d397: 0.12 ETH&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SiSYWqaPcJtBlnFR4VAaug.png&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;heading-kÃªt-luáº­n&quot;&gt;KÃªt luáº­n&lt;/h2&gt;
&lt;p&gt;á» trÃªn lÃ  má»™t sá»‘ khÃ¡i niá»‡m sÆ¡ bá»™ vá» Solidity vÃ  cáº¥u trÃºc cá»§a Ethereum, cá»¥ thá»ƒ vá» cÃ¡c State Trie.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» Solidity vÃ  World State Trie</summary></entry><entry><title type="html">Stablecoins</title><link href="http://localhost:4000/blog/2023/07/24/stable-coins/" rel="alternate" type="text/html" title="Stablecoins" /><published>2023-07-24T00:00:00+07:00</published><updated>2023-07-24T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/07/24/stable-coins</id><content type="html" xml:base="http://localhost:4000/blog/2023/07/24/stable-coins/">&lt;p&gt;Stable coin lÃ  1 loáº¡i tiá»n Ä‘iá»‡n tá»­ Ä‘Æ°á»£c táº¡o Ä‘á»ƒ giao dá»‹ch vá»›i má»™t giÃ¡ trá»‹ khÃ´ng Ä‘á»•i. Má»¥c Ä‘Ã­ch sinh ra Stablecoin lÃ  tÃ­ch há»£p tiá»n tá»‡ trÃªn tháº¿ giá»›i tháº­t vÃ o cÃ¡c á»©ng dá»¥ng trÃªn chuá»—i vÃ  cho phÃ©p nhá»¯ng ngÆ°á»i khÃ´ng thá»ƒ cÃ³ USD náº¯m giá»¯ vÃ  giao dá»‹ch 1 tÃ i sáº£n tÆ°Æ¡ng Ä‘Æ°Æ¡ng.&lt;/p&gt;

&lt;h2 id=&quot;heading-custodial-stablecoin-stablecoin-kÃ­-gá»­i&quot;&gt;Custodial Stablecoin: Stablecoin kÃ­ gá»­i&lt;/h2&gt;
&lt;p&gt;Custodian giá»¯ kho báº¡c trong 1 ngÃ¢n hÃ ng truyá»n thá»‘ng, má»i giao dá»‹ch Ä‘á»u thÃ´ng qua nÃ³. NgoÃ i ra, nÃ³ cÃ³ quyá»n máº¡nh máº½ nhÆ° kiá»ƒm duyá»‡t khÃ¡c hÃ ng rÃºt tiá»n hoáº·c xoÃ¡ sá»‘ dÆ° ngÆ°á»i dÃ¹ng. Äiá»u nÃ y sáº½ nguy hiá»ƒm náº¿u cháº³ng may bá»‹ hack hoáº·c nháº§m láº«n vÃ  khÃ´ng Ä‘áº£m báº£o sá»± phi táº­p trung. Do Ä‘Ã³, cÃ¡ch nÃ y khÃ´ng Ä‘Æ°á»£c Æ°u tiÃªn vÃ  sá»­ dá»¥ng á»Ÿ thá»±c táº¿.&lt;/p&gt;

&lt;h2 id=&quot;heading-synthetic&quot;&gt;Synthetic&lt;/h2&gt;
&lt;p&gt;Má»¥c tiÃªu lÃ  xÃ¢y dá»±ng 1 loáº¡i non-custodial stablecoin. Tuy nhiÃªn, cÃ³ má»™t váº¥n Ä‘á» lÃ  ETH thÆ°á»ng xuyÃªn dao Ä‘á»™ng, khÃ´ng á»•n Ä‘á»‹nh so vá»›i USD.&lt;br /&gt;
&lt;strong&gt; Maker DAO: &lt;/strong&gt;  xÃ¢y dá»±hng má»™t stablecoin tá»« tÃ i sáº£n khÃ´ng á»•n Ä‘á»‹nh. &lt;br /&gt;
Há»‡ thá»‘ng MakerDAO:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;DAI: stablecoin (giÃ¡: 0.99 ~ 1.01 USD)&lt;/li&gt;
  &lt;li&gt;MKR:
    &lt;ul&gt;
      &lt;li&gt;ai cÅ©ng cÃ³ thá»ƒ mua Ä‘á»ƒ kiáº¿m lÃ£i.&lt;/li&gt;
      &lt;li&gt;Sá»­ dá»¥ng Ä‘á»ƒ quáº£n trá»‹, á»•n Ä‘á»‹nh giÃ¡ DAI trong trÆ°á»ng há»£p kháº©n cáº¥p.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-Ä‘Ãºc-dai&quot;&gt;ÄÃºc DAI&lt;/h3&gt;
&lt;p&gt;Giáº£ sá»­: A muá»‘n tráº£ B báº±ng DAI nhÆ°ng A chá»‰ cÃ³ 1 ETH. A sáº½ táº¡o 1 vault trÃªn MakerDAO contract:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;1 wallet: tÃ i sáº£n mÃ  A kiá»ƒm soÃ¡t.&lt;/li&gt;
  &lt;li&gt;1 vault: tÃ i sáº£n mÃ  A khoÃ¡ Ä‘á»ƒ vay DAI.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ta cÃ³:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Ban Ä‘áº§u, A cÃ³: 1ETH, 0DAI trong wallet, 0ETH, 0DAI trong vault.&lt;/li&gt;
  &lt;li&gt;Khi A khoÃ¡ 1 ETH vÃ o vault: trong wallet sáº½ khÃ´ng cÃ²n ETH, trong vault cÃ³ 1ETH&lt;/li&gt;
  &lt;li&gt;Viá»‡c khoÃ¡ ETH xem nhÆ° má»™t cÃ¡ch tháº¿ cháº¥p Ä‘á»ƒ vay DAI. VÃ¬ sá»‘ lÆ°á»£ng tháº¿ cháº¥p = 130% sá»‘ lÆ°á»£ng tá»‘i Ä‘a cÃ³ thá»ƒ vay, nÃªn khi A tháº¿ cháº¥p 1 ETH (~3000USD) thÃ¬ chá»‰ cÃ³ thá»ƒ vay tá»‘i Ä‘a 2300 DAI.&lt;/li&gt;
  &lt;li&gt;Do Ä‘Ã³, trong wallet A cÃ³ 2300DAI, cÃ²n vault: 1ETH, -2300DAI.&lt;/li&gt;
  &lt;li&gt;A tráº£ cho B báº±ng DAI, vÃ  cÃ³ thá»ƒ tráº£ ná»£ cho vault Ä‘á»ƒ láº¥y láº¡i 1 ETH.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-stabilization&quot;&gt;Stabilization&lt;/h3&gt;
&lt;p&gt;A khi tháº¿ cháº¥p ETH vÃ  vay DAI, pháº£i tráº£ lÃ£i: PhÃ­ á»•n Ä‘á»‹nh. Háº§u háº¿t cÃ¡c phÃ­ Ä‘á»u Ä‘Æ°a cho DAI holders (thÃ´ng qua DSR), má»™t sá»‘ cÃ²n láº¡i Ä‘Æ°a cho MKR holders.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; The DAI saving rate (DSR)&lt;/strong&gt; &lt;br /&gt;
Báº¥t kÃ¬ ai giá»¯ DAI cÃ³ thá»ƒ khoÃ¡ DAI cá»§a mÃ¬nh trong MakerDAO contract. DSR lÃ  tá»‰ lá»‡ lÃ£i tá»« DAI Ä‘Ã£ khoÃ¡ á»Ÿ trÃªn contract. Users cÃ³ thá»ƒ rÃºt DAI ra tá»« contract báº¥t cá»© lÃºc nÃ o.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; CÆ¡ cháº¿ á»•n Ä‘á»‹nh: &lt;/strong&gt; &lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;DAI cÃ³ giÃ¡ trá»‹ &amp;lt; 1$  â‡’ tÄƒng phÃ­ á»•n Ä‘á»‹nh vÃ  DSR:
    &lt;ul&gt;
      &lt;li&gt;NgÆ°á»i Ä‘Ãºc DAI Ä‘Æ°á»£c khuyáº¿n khÃ­ch hoÃ n tráº£ mÃ³n ná»£ Ä‘Ã£ vay sá»›m vÃ¬ lÃ£i Ä‘ang tÄƒng&lt;/li&gt;
      &lt;li&gt;Khuyáº¿n khÃ­ch DAI holders gá»­i nhiá»u DAI vÃ o contract&lt;/li&gt;
      &lt;li&gt;Tá»« Ä‘Ã³ giÃºp giáº£m nguá»“nn cÃ¹ng DAI, giÃºp DAI tÄƒng giÃ¡&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;DAI cÃ³ giÃ¡ trá»‹ &amp;gt; 1$  â‡’ giáº£m phÃ­ á»•n Ä‘á»‹nh vÃ  DSR.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-thanh-toÃ¡n&quot;&gt;Thanh toÃ¡n&lt;/h3&gt;
&lt;p&gt;Náº¿u vault debt vÆ°á»£t quÃ¡ 130% (do lÃ£i), thÃ¬ tÃ i sáº£n tháº¿ cháº¥p sáº½ Ä‘Æ°á»£c bÃ¡n Ä‘áº¥u giÃ¡. (Tiá»n lÃ£i - phÃ­) sáº½ Ä‘Æ°á»£c tráº£ ná»£ vault cho A Ä‘áº¿n khi Ä‘áº¡t dÆ°á»›i 130%.&lt;/p&gt;

&lt;h2 id=&quot;heading-nfts&quot;&gt;NFTs&lt;/h2&gt;
&lt;p&gt;NFTs lÃ :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Quyá»n sá»Ÿ há»¯u token cá»§a 1 tÃ i sáº£n kÄ© thuáº­t sá»‘ (nhÆ° Digital Artwork, vitual games item,â€¦).&lt;/li&gt;
  &lt;li&gt;KhÃ´ng thá»ƒ cÃ³ NFT nÃ o giá»‘ng nhau, nÃªn khÃ´ng thá»ƒ trao Ä‘á»•i láº«n nhau.&lt;/li&gt;
  &lt;li&gt;ÄÆ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi lá»‹ch sá»­, má»©c Ä‘á»™ tiá»‡n Ã­ch, táº§m quan trá»ng,â€¦&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;NFTs Ä‘Æ°á»£c quáº£n lÃ½ dÆ°á»›i blockchain vÃ¬:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Blockchain Ä‘áº£m báº£o quyá»n sá»Ÿ há»¯u dÃ i háº¡n cho Ä‘áº¿n khi bÃ¡n.&lt;/li&gt;
  &lt;li&gt;Cung cáº¥p má»™t há»“ sÆ¡ Ä‘Ã¡ng tin cáº­y vá» xuáº¥t xá»© (chá»‘ng giáº£ máº¡o).&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-sá»Ÿ-há»¯u-tÃ i-sáº£n-kÄ©-thuáº­t-sá»‘&quot;&gt;Sá»Ÿ há»¯u tÃ i sáº£n kÄ© thuáº­t sá»‘&lt;/h3&gt;
&lt;p&gt;NFTs hoáº¡t Ä‘á»™ng nhÆ° má»™t chá»©ng thÆ° phÃ¡p lÃ½:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;CÃ³ thá»ƒ chuyá»ƒn quyá»n sá»Ÿ há»¯u tá»« bÃªn nÃ y sang bÃªn khÃ¡c&lt;/li&gt;
  &lt;li&gt;Quyá»n sá» há»¯u thá»ƒ hiá»‡n tÃ¬nh tráº¡ng sá»Ÿ há»¯u tÃ i sáº£n, cáº¥p quyá»n há»£p phÃ¡p,â€¦&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-nháº­n-nfts-nhÆ°-tháº¿-nÃ o&quot;&gt;Nháº­n NFTs nhÆ° tháº¿ nÃ o&lt;/h3&gt;
&lt;p&gt;CÃ³ 2 cÃ¡ch chÃ­nh lÃ  tÃ¬m ngÆ°á»i sá»Ÿ há»¯u vÃ  mua tá»« há»c, hoáº·c lÃªn thá»‹ trÆ°á»ng vÃ  mua.&lt;/p&gt;

&lt;h3 id=&quot;heading-thá»‹-trÆ°á»ng-nft&quot;&gt;Thá»‹ trÆ°á»ng NFT&lt;/h3&gt;
&lt;p&gt;ÄÆ°á»£c xÃ¢y dá»±ng nhÆ° má»™t táº­p cÃ¡c smartcontract, thÃ nh má»™t há»‡ thá»‘ng tÃ i sáº£n vÃ  trao Ä‘á»•i. NFT mang láº¡i sá»± sá»Ÿ há»¯u Ä‘Ã­ch thá»±c trÃªn Internet, kÃ­ch hoáº¡t thÆ°Æ¡ng máº¡i kÄ© thuáº­t sá»‘,â€¦ VÃ­ dá»¥: má»™t sá»‘ NFT Ä‘áº·c biá»‡t mang láº¡i cho ngÆ°á»i dÃ¹ng sá»± truy cáº­p vÃ o má»™t sá»‘ IP, trang trÃªn Internet.&lt;/p&gt;

&lt;h3 id=&quot;heading-nft-cost-issue&quot;&gt;NFT cost issue:&lt;/h3&gt;
&lt;p&gt;Äa pháº§n cÃ¡c NFT Ä‘á»u cÃ³ giÃ¡ cao, do Ä‘Ã³ muá»‘n sá»Ÿ há»¯u thÃ¬ cÃ³ thá»ƒ thuÃª hoáº·c tiáº¿t kiá»‡m. Sáº½ khÃ³ báº¯t Ä‘áº§u kinh doanh NFT náº¿u khÃ´ng cÃ³ tiá»n máº·t hoáº·c nguá»“n cung cáº¥p Ä‘á»§ lá»›n.&lt;/p&gt;

&lt;p&gt;Má»™t sá»‘ dá»‹ch vá»¥ dá»±a trÃªn NFTs nhÆ°: Gameing guild (cÃ¡c item trong game: NFTs), EveryRealm (Báº¥t Ä‘á»™ng sáº£n áº£o), Credit Provider,â€¦&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">Stable coin lÃ  1 loáº¡i tiá»n Ä‘iá»‡n tá»­ Ä‘Æ°á»£c táº¡o Ä‘á»ƒ giao dá»‹ch vá»›i má»™t giÃ¡ trá»‹ khÃ´ng Ä‘á»•i. Má»¥c Ä‘Ã­ch sinh ra Stablecoin lÃ  tÃ­ch há»£p tiá»n tá»‡ trÃªn tháº¿ giá»›i tháº­t vÃ o cÃ¡c á»©ng dá»¥ng trÃªn chuá»—i vÃ  cho phÃ©p nhá»¯ng ngÆ°á»i khÃ´ng thá»ƒ cÃ³ USD náº¯m giá»¯ vÃ  giao dá»‹ch 1 tÃ i sáº£n tÆ°Æ¡ng Ä‘Æ°Æ¡ng.</summary></entry><entry><title type="html">CÆ¡ cháº¿ Ethereum</title><link href="http://localhost:4000/blog/2023/07/23/ethereum-mechanics/" rel="alternate" type="text/html" title="CÆ¡ cháº¿ Ethereum" /><published>2023-07-23T00:00:00+07:00</published><updated>2023-07-23T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/07/23/ethereum-mechanics</id><content type="html" xml:base="http://localhost:4000/blog/2023/07/23/ethereum-mechanics/">&lt;p&gt;Máº·c dÃ¹ bitcoin Ä‘Æ°á»£c ra Ä‘á»i tá»« ráº¥t sá»›m vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng cho Ä‘áº¿n hiá»‡n táº¡i, nÃ³ váº«n chá»©a nhiá»u nhÆ°á»£c Ä‘iá»ƒm. Pháº§n chÃ­nh lÃ  cÃ¡c ScriptPk cá»§a UTXO khÃ´ng thá»ƒ thá»±c hiá»‡n cÃ¡c quy táº¯c phá»©c táº¡p vá» tÃ i sáº£n. VÃ­ dá»¥ khi muá»‘n Ä‘Æ°a ra giá»›i háº¡n lÆ°á»£ng BTC sá»­ dá»¥ng trong 1 ngÃ y lÃ  2BTC, khÃ´ng thá»ƒ lÃ m vá»›i UTXO Script Ä‘Æ°á»£c. Do Ä‘Ã³, Ethereum ra Ä‘á»i vá»›i nhiá»u Æ°u Ä‘iá»ƒm vÆ°á»£t trá»™i&lt;/p&gt;

&lt;h3 id=&quot;heading-so-sÃ¡nh-chung&quot;&gt;So sÃ¡nh chung&lt;/h3&gt;
&lt;p&gt;Bitcoin nhÆ° má»™t mÃ¡y chuyá»ƒn tráº¡ng thÃ¡i. Bitcoin rule: S x I â‡¾ S, vá»›i táº­p S lÃ  cÃ¡c tráº¡ng thÃ¡i, I lÃ  táº­p táº¥t cáº£ cÃ¡c input. CÃ²n vá»›i Ethereum, hÃ m chuyá»ƒn tráº¡ng thÃ¡i cá»§a nÃ³ sáº½ phong phÃº hÆ¡n nhiá»u, vÃ  má»—i láº§n chuyá»ƒn Ä‘á»•i thÃ¬ sáº½ thá»±c hiá»‡n toÃ n bá»™ chÆ°Æ¡ng trÃ¬nh.&lt;/p&gt;

&lt;p&gt;Ethereum há»— trá»£ cÃ¡c DApp, vá»›i Program code Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn blockchain, khi cháº¡y cÅ©ng sáº½ thay Ä‘á»•i cÃ¡c tráº¡ng thÃ¡i. CÃ¡c block thÃ¬ sáº½ cÃ³ khoáº£ng 150 Tx, vÃ  cÃ¡c Block Proposer sáº½ nháº­n Tx fee cho block vÃ  cÃ¡c pháº§n thÆ°á»Ÿng khÃ¡c khi táº¡o khá»‘i thÃ nh cÃ´ng.&lt;/p&gt;

&lt;p&gt;NgoÃ i ra, ta Ä‘Ã£ biáº¿t ráº±ng khi cÃ¡c block Ä‘Æ°á»£c proposer trong consensus layer (cÃ¡c beacon block, nÃªn cÃ²n Ä‘Æ°á»£c gá»i lÃ  beacon chain), cÃ¡c node gá»­i cÃ¡c Tx lÃªn cho execution client hay cÃ²n gá»i lÃ  compute layer Ä‘á»ƒ cáº­p nháº­p cÃ¡c tráº¡ng thÃ¡i (update world state).&lt;/p&gt;
&lt;h2 id=&quot;heading-compute-layer&quot;&gt;Compute layer&lt;/h2&gt;
&lt;p&gt;World state: táº­p há»£p cÃ¡c tÃ i khoáº£n Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi cÃ¡c Ä‘á»‹a chá»‰ 32 byte (CÃ¡c thÃ´ng tin nhÆ° Ä‘á»‹a chá»‰, sá»‘ dÆ°,..)&lt;/p&gt;

&lt;p&gt;CÃ³ 2 loáº¡i tÃ i khoáº£n:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Owned account: Äiá»u khiá»ƒn bá»Ÿi cÃ¡c cáº·p (Pk, Sk), hay lÃ  tÃ i khoáº£n cá»§a ngÆ°á»i dÃ¹ng.&lt;/li&gt;
  &lt;li&gt;Contracts: Äiá»u khiá»ƒn bá»Ÿi code, Ä‘Æ°á»£c táº¡o lÃºc tÃ i khoáº£n Ä‘Æ°á»£c táº¡o, khÃ´ng thá»ƒ thay Ä‘á»•i.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CÃ¡c dá»¯ liá»‡u cáº§n thiáº¿t vá»›i má»—i account:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Account Data&lt;/th&gt;
      &lt;th&gt;Owned&lt;/th&gt;
      &lt;th&gt;Contracts&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;address(tÃ­nh)&lt;/td&gt;
      &lt;td&gt;H(Pk)&lt;/td&gt;
      &lt;td&gt;H(CreatorAdd, CreatorNonce)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;storage root&lt;/td&gt;
      &lt;td&gt;KhÃ´ng&lt;/td&gt;
      &lt;td&gt;StorageRoot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;code&lt;/td&gt;
      &lt;td&gt;khÃ´ng&lt;/td&gt;
      &lt;td&gt;CodeHash&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;balance&lt;/td&gt;
      &lt;td&gt;balance&lt;/td&gt;
      &lt;td&gt;balance&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;nonce&lt;/td&gt;
      &lt;td&gt;nonce&lt;/td&gt;
      &lt;td&gt;nonce&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Trong Ä‘Ã³, nonce lÃ  sá»‘ Tx mÃ  acount Ä‘Ã£ thá»±c hÃ nh, tÃ­nh báº±ng (#Tx sent) + (#accounts created). Sá»‘ nonce Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ chá»‘ng replay vÃ  khi táº¡o má»›i thÃ¬ luÃ´n báº±ng 0 (vá»›i contract).  CÃ¡c contract cÃ³ thá»ƒ bá»‹ ghi Ä‘Ã¨ code, nhÆ°ng chá»‰ khi contract cÅ© Ä‘Ã£ SELFDESTRUCT.&lt;/p&gt;

&lt;p&gt;Má»—i contract cÃ³ 1 máº£ng lÆ°u trá»¯ liÃªn quan gá»“m 2^256 pháº§n tá»­, má»—i pháº§n tá»­ lÃ  32 bytes. VÃ  storage root lÃ  Merkle Patricia hash cá»§a máº£ng.&lt;/p&gt;

&lt;h3 id=&quot;heading-chuyá»ƒn-tráº¡ng-thÃ¡i&quot;&gt;Chuyá»ƒn tráº¡ng thÃ¡i&lt;/h3&gt;
&lt;h4 id=&quot;heading-tx&quot;&gt;Tx&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;ÄÆ°á»£c kÃ­ bá»Ÿi ngÆ°á»i táº¡o.&lt;/li&gt;
  &lt;li&gt;To: náº¿u = 0 lÃ  táº¡o account má»›i, code = (init, body). CÃ²n láº¡i lÃ  32-bytes Ä‘á»‹a chá»‰ vÃ  data (nhá»¯ng thá»© mÃ  contract gá»i vÃ  cÃ¡c Ä‘á»‘i sá»‘).&lt;/li&gt;
  &lt;li&gt;From: Äá»‹a chá»‰ khá»Ÿi táº¡o vÃ  chá»¯ kÃ­ vÃ o Tx&lt;/li&gt;
  &lt;li&gt;Value: sá»‘ Ethereum Ä‘Æ°á»£c gá»­i.&lt;/li&gt;
  &lt;li&gt;Tx fees: gasLimit, maxFee, maxPriorityFee (Sáº½ nÃ³i rÃµ hÆ¡n á»Ÿ pháº§n sau).&lt;/li&gt;
  &lt;li&gt;Nonce: Khá»›p vá»›i nonce hiá»‡n táº¡i cá»§a ngÆ°á»i gá»­i, trÃ¡nh viá»‡c replay Tx.&lt;/li&gt;
  &lt;li&gt;Chain-id: Ä‘áº£m báº£o giao dá»‹ch gá»­i Ä‘Ãºng chuá»—i (khÃ´ng thá»ƒ dÃ¹ng giao dá»‹ch testnet lÃªn mainnet).&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-cÃ¡c-loáº¡i-tx&quot;&gt;CÃ¡c loáº¡i Tx&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;owned â‡¾ owned: chuyá»ƒn ETH giá»¯a cÃ¡c user&lt;/li&gt;
  &lt;li&gt;owned â‡¾ contract: gá»i contract vá»›i ETH &amp;amp; data&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-messages&quot;&gt;Messages&lt;/h4&gt;
&lt;p&gt;LÃ  cÃ¡c Tx áº£o Ä‘Æ°á»£c contract táº¡o ra, nÃ³ khÃ´ng cÃ³ Signature (vÃ¬ contract khÃ´ng cÃ³). CÃ³ 2 loáº¡i lÃ :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;contract â‡¾ onwed: contract gá»­i tiá»n cho user&lt;/li&gt;
  &lt;li&gt;contract â‡¾ contract: contract gá»i contract khÃ¡c.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-ethereum-block&quot;&gt;Ethereum block&lt;/h3&gt;
&lt;p&gt;KhÃ¡c vá»›i Block cá»§a Bitcoin, Block Header cá»§a Ethereum cÃ³ nhiá»u loáº¡i dá»¯ liá»‡u hÆ¡n, má»™t sá»‘ chÃ­nh nhÆ°:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Consensus data: cÃ¡c dá»¯ liá»‡u nhÆ° Proposer Id, Previous hash, vote,â€¦&lt;/li&gt;
  &lt;li&gt;Address: NÆ¡i mÃ  gas fee Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n&lt;/li&gt;
  &lt;li&gt;World state root: Merkle Patricia Tree Hash cá»§a táº¥t cáº£ cÃ¡c tÃ i khoáº£n&lt;/li&gt;
  &lt;li&gt;Tx root: Merkle Tree Hash cá»§a Tx&lt;/li&gt;
  &lt;li&gt;Tx receipt root: Merkle Hash cá»§a cÃ¡c log message&lt;/li&gt;
  &lt;li&gt;Gas used: Sá»­ dá»¥ng Ä‘á»ƒ Ä‘iá»u chá»‰nh giÃ¡ gas (á»Ÿ pháº§n sau).&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-evm-mechanics&quot;&gt;EVM mechanics&lt;/h3&gt;
&lt;p&gt;EVM lÃ  mÃ´i trÆ°á»ng thá»±c thi (execution). CÃ¡c contract Ä‘Æ°á»£c viáº¿t báº±ng solidity, sau Ä‘Ã³ sáº½ Ä‘Æ°á»£c compile thÃ nh EVM bytecode vÃ  Ä‘Æ°á»£c cÃ¡c validator sá»­ dá»¥ng Ä‘á»ƒ cháº¡y cÃ¡c contract. &lt;br /&gt;
EVM hoáº¡t Ä‘á»™ng nhÆ° má»™t [Stack Machine] (https://en.wikipedia.org/wiki/Stack_machine) vá»›i lá»‡nh JUMP (CÃ¡c program sáº½ bá»‹ huá»· náº¿u quÃ¡ stack, proposer giá»¯ láº¡i gas).&lt;/p&gt;

&lt;h3 id=&quot;heading-gas&quot;&gt;Gas&lt;/h3&gt;
&lt;p&gt;Gas Ä‘Æ°á»£c xem nhÆ° lÃ  nguyÃªn liá»‡u cá»§a Ethereum, lÃ  khoáº£n phÃ­ cáº§n tráº£ Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c giao dá»‹ch hay hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tÃ¡c vá»›i smartcontract. Má»i chá»‰ thá»‹ Ä‘á»u tá»‘n gas, giÃºp ngÄƒn viá»‡c gá»­i Tx cÃ³ nhiá»u bÆ°á»›c (tá»‘n nhiá»u tiá»n hÆ¡n). CÃ¡c Proposer cÃ³ thá»ƒ chá»n cÃ¡c Tx tá»« mempool cÃ³ phÃ­ gas cao Ä‘á»ƒ tá»‘i Ä‘a hoÃ¡ thu nháº­p.&lt;/p&gt;

&lt;h4 id=&quot;heading-gas-calculation&quot;&gt;Gas calculation:&lt;/h4&gt;
&lt;p&gt;Má»—i block cÃ³:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;baseFee: gasPrice nhá» nháº¥t cho táº¥t cáº£ Tx trong block. BaseFee dá»±a vÃ o tá»•ng sá»‘ gas á»Ÿ block trÆ°á»›c (Gas used á»Ÿ header), náº¿u gasUsed lÃ  giá»›i háº¡n (30M) thÃ¬ baseFee tÄƒng 12.5%, náº¿u block trÆ°á»›c trá»‘ng thÃ¬ giáº£m 12.5%. CÃ²n láº¡i thÃ¬ giá»¯ nguyÃªn.&lt;/li&gt;
  &lt;li&gt;gasLimit: tá»•ng gas cho phÃ©p vá»›i Tx&lt;/li&gt;
  &lt;li&gt;maxFee: giÃ¡ gas tá»‘i Ä‘a cho phÃ©p&lt;/li&gt;
  &lt;li&gt;maxPriorityFee: &apos;tips&apos; tá»‘i Ä‘a cho Proposer.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GasPrice = min(maxFee, baseFee + maxPriorityFee) &lt;br /&gt;
MaxTxFee = gasLimit x gasPice &lt;br /&gt;
&lt;strong&gt; Cá»¥ thá»ƒ &lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;náº¿u gasPrice &amp;lt; baseFee: dá»«ng&lt;/li&gt;
  &lt;li&gt;náº¿u MaxTxFee &amp;gt; sender.balance: dá»«ng&lt;/li&gt;
  &lt;li&gt;trá»« MaxTxFee khá»i sender.balance&lt;/li&gt;
  &lt;li&gt;Äáº·t Gas = gasLimit&lt;/li&gt;
  &lt;li&gt;Cháº¡y Tx, trá»« gas tá»« Gas vá»›i má»—i Tx. Náº¿u Gas &amp;lt; 0 thÃ¬ dá»«ng, Proposer giá»¯ gasLimit * gasPrice.&lt;/li&gt;
  &lt;li&gt;Xong xuÃ´i, tráº£ láº¡i Gas x gasPrice cho sender&lt;/li&gt;
  &lt;li&gt;gasUsed = gasLimit - Gas. BURN gasUsed x baseFee vÃ  gá»­i gasUsed x (GasPrice - baseFee) cho block proposer.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ETH bá»‹ BURN vÃ¬ giÃºp giáº£m láº¡m phÃ¡t, tÄƒng tÃ­nh khan hiáº¿m, cÃ³ lá»£i cho nhÃ  Ä‘áº§u tÆ°, cháº·n cÃ¡c proposer táº¡o ra cÃ¡c Tx giáº£, khÃ´ng khuyáº¿n khÃ­ch cÃ¡c thoáº£ thuáº­n ngoÃ i chuá»—i.&lt;/p&gt;

&lt;h2 id=&quot;heading-káº¿t-luáº­n&quot;&gt;Káº¿t luáº­n&lt;/h2&gt;
&lt;p&gt;á» trÃªn lÃ  toÃ n bá»™ hiá»ƒu biáº¿t cá»§a mÃ¬nh vá» cÆ¡ cháº¿ Ethereum.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">Máº·c dÃ¹ bitcoin Ä‘Æ°á»£c ra Ä‘á»i tá»« ráº¥t sá»›m vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng cho Ä‘áº¿n hiá»‡n táº¡i, nÃ³ váº«n chá»©a nhiá»u nhÆ°á»£c Ä‘iá»ƒm. Pháº§n chÃ­nh lÃ  cÃ¡c ScriptPk cá»§a UTXO khÃ´ng thá»ƒ thá»±c hiá»‡n cÃ¡c quy táº¯c phá»©c táº¡p vá» tÃ i sáº£n. VÃ­ dá»¥ khi muá»‘n Ä‘Æ°a ra giá»›i háº¡n lÆ°á»£ng BTC sá»­ dá»¥ng trong 1 ngÃ y lÃ  2BTC, khÃ´ng thá»ƒ lÃ m vá»›i UTXO Script Ä‘Æ°á»£c. Do Ä‘Ã³, Ethereum ra Ä‘á»i vá»›i nhiá»u Æ°u Ä‘iá»ƒm vÆ°á»£t trá»™i</summary></entry><entry><title type="html">Proof Of Stake</title><link href="http://localhost:4000/blog/2023/07/23/proof-of-stake/" rel="alternate" type="text/html" title="Proof Of Stake" /><published>2023-07-23T00:00:00+07:00</published><updated>2023-07-23T00:00:00+07:00</updated><id>http://localhost:4000/blog/2023/07/23/proof-of-stake</id><content type="html" xml:base="http://localhost:4000/blog/2023/07/23/proof-of-stake/">&lt;p&gt;á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u má»™t cÆ¡ cháº¿ Ä‘á»“ng thuáº­n Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng ráº¥t nhiá»u trong cÃ¡c blockchain hiá»‡n nay, Ä‘Ã³ lÃ  Proof of Stake.&lt;/p&gt;

&lt;h3 id=&quot;heading-accountable-safety&quot;&gt;Accountable Safety&lt;/h3&gt;
&lt;p&gt;Má»™t giao thá»©c vá»›i resilence lÃ  n/3 khi giao thá»©c Ä‘Ã³ an toÃ n náº¿u nÃ³ cÃ³ Ã­t hÆ¡n n/3 Adverserial node (VÃ­ dá»¥ streamlet). &lt;br /&gt;
Má»™t giao thá»©c vá»›i Accountable Safety resilence n/3 lÃ  giao thá»©c:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;An toÃ n náº¿u Ã­t hÆ¡n Adverserial node.&lt;/li&gt;
  &lt;li&gt;Náº¿u vi pháº¡m safety, thÃ¬ nhá»¯ng ngÆ°á»i giÃ¡m sÃ¡t (cÃ¡c node khÃ´ng pháº£i ngÆ°á»i Ä‘Æ°á»£c chá»n Ä‘á»ƒ Ä‘á» xuáº¥t khá»‘i) cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh rÃµ cÃ¡c node vi pháº¡m.&lt;/li&gt;
  &lt;li&gt;KhÃ´ng cÃ³ cÃ¡o buá»™c sai vá»›i cÃ¡c node trung thá»±c.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heading-finality-vÃ -dynamic-availability&quot;&gt;Finality vÃ  Dynamic availability&lt;/h3&gt;
&lt;p&gt;Gá»i má»™t giao thá»©c lÃ  finality náº¿u nÃ³ duy trÃ¬ safety trong thá»i gian khÃ´ng Ä‘á»“ng bá»™ (trÆ°á»›c GST). á» cÃ¡c giao thá»©c nÃ y, Tx Ä‘Æ°á»£c finalize nhanh hÆ¡n confirm trong bitcoin (60 phÃºt). &lt;br /&gt;
Gá»i má»™t giao thá»©c lÃ  Dynamic availability náº¿u giao thá»©c Ä‘Ã³ cÃ³ thá»ƒ tiáº¿p tá»¥c confirm cÃ¡c giao dá»‹ch ngay cáº£ khi nhiá»u node offline.&lt;/p&gt;

&lt;p&gt;KhÃ´ng cÃ³ giao thá»©c SMR nÃ o Ä‘áº£m báº£o cung cáº¥p cáº£ 2. Do Ä‘Ã³, má»™t cÃ¡ch giáº£i quyáº¿t lÃ  sá»­ dá»¥ng Nested chains.&lt;/p&gt;

&lt;h3 id=&quot;heading-nested-chains&quot;&gt;Nested chains&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Available chain Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi giao thá»©c Î _ava, thoáº£ mÃ£n Dynamic availability (VD: Nakamoto consensus).&lt;/li&gt;
  &lt;li&gt;Finalized chain Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi giao thá»©c checkpoint Î _fin thoáº£ mÃ£n security dÆ°á»›i máº¡ng Ä‘á»“ng bá»™ 1 pháº§n.&lt;/li&gt;
  &lt;li&gt;Chuá»—i confirm bá»Ÿi Î _ava lÃ  available chain.&lt;/li&gt;
  &lt;li&gt;Î _fin kiá»ƒm tra cÃ¡c block trong availbale chain.&lt;/li&gt;
  &lt;li&gt;Tiá»n tá»‘ cá»§a checkpoint cuá»‘i cÃ¹ng táº¡o thÃ nh finalized chain. TÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i Finalized chain lÃ  prefix cá»§a available. Chuá»—i nÃ y safe dÆ°á»›i máº¡ng báº¥t Ä‘á»“ng bá»™&lt;/li&gt;
  &lt;li&gt;CÃ¡c block cá»§a available chain luÃ´n extend tá»« Ä‘iá»ƒm checkpoint cuá»‘i cÃ¹ng.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minh hoáº¡: hÃ¬nh áº£nh&lt;/p&gt;

&lt;h2 id=&quot;heading-proof-of-stake&quot;&gt;Proof of Stake&lt;/h2&gt;
&lt;h3 id=&quot;heading-tá»•ng-quan&quot;&gt;Tá»•ng quan:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Trong giao thá»©c Pos, cÃ¡c nodes khoÃ¡ (Stake) tiá»n cá»§a há» trong giao thá»©c Ä‘á»ƒ Ä‘á»§ Ä‘iá»u kiá»‡n tham gia consensus.&lt;/li&gt;
  &lt;li&gt;CÃ ng nhiá»u coin Ä‘Æ°á»£c stake bá»Ÿi 1 node thÃ¬ kháº£ nÄƒng cao node Ä‘Ã³ Ä‘Æ°á»£c chá»n lÃ m validator. VÃ¬ thuáº­t toÃ¡n lá»±a chá»n validator lÃ  giáº£ ngáº«u nhiÃªn.&lt;/li&gt;
  &lt;li&gt;Náº¿u node bá»‹ báº¯t quáº£ tang thá»±c hiá»‡n 1 hÃ nh Ä‘á»™ng báº¥t lá»£i (xÃ¡c thá»±c giao dá»‹ch sai) thÃ¬ node Ä‘Ã³ sáº½ bá»‹ burn sá»‘ tiá»n Ä‘Ã£ stake vÃ  khÃ´ng thá»ƒ tham gia vÃ o quÃ¡ trÃ¬nh Ä‘á» xuáº¥t khá»‘i tiáº¿p theo. (Slashing).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Do Ä‘Ã³, trong PoS, nodes sáº½ cÃ³ trÃ¡ch nhiá»‡m trong cÃ¡ch hÃ nh Ä‘á»™ng cá»§a mÃ¬nh. PoS giÃºp thay Ä‘á»•i cÆ¡ cháº¿ block Ä‘Æ°á»£c verify. NgoÃ i ra, Ä‘á»ƒ trá»Ÿ thÃ nh validator, cÃ¡c node pháº£i cÃ³ Ä‘iá»u kiá»‡n (vÃ­ dá»¥: cÃ³ Ã­t nháº¥t 32 ETH,..), sau khi Ä‘Ã³ng 1 khá»‘i, khá»‘i Ä‘Ã³ sáº½ Ä‘Æ°á»£c cÃ¡c validator khÃ¡c validate theo nhiá»u method khÃ¡c nhau tuá»³ vÃ o blockchain.&lt;/p&gt;

&lt;h3 id=&quot;heading-cá»¥-thá»ƒ-vá»›i-ethereum-20&quot;&gt;Cá»¥ thá»ƒ vá»›i Ethereum 2.0&lt;/h3&gt;

&lt;h4 id=&quot;heading-chá»n-validator-vÃ -block-proposer&quot;&gt;Chá»n Validator vÃ  Block Proposer&lt;/h4&gt;
&lt;p&gt;Äá»ƒ thÃ nh má»™t validator, pháº£i gá»­i Ã­t nháº¥t 32 ETH vÃ o contract vÃ  cháº¡y 3 pháº§n má»m riÃªng biá»‡t (sáº½ giá»›i thiá»‡u á»Ÿ sau) vÃ  tham gia hÃ ng Ä‘á»£i. Thá»i gian cá»§a blocks chia thÃ nh cÃ¡c slot: 12s, epoch: 32 slot. Sau khi Ä‘Æ°á»£c active, validator Ä‘Ã³ sáº½ tham ra vÃ o quÃ¡ trÃ¬nh phÃª duyá»‡t. 1 validator ngáº«u nhiÃªn sáº½ Ä‘Æ°á»£c chá»n Ä‘á»ƒ xÃ¡c thá»±c giao dá»‹ch vÃ  Ä‘á» xuáº¥t khá»‘i á»Ÿ má»—i slot (Block proposer). Sá»‘ cÃ²n láº¡i sáº½ lÃ m giÃ¡m sÃ¡t Ä‘á»ƒ phÃª duyá»‡t vÃ  kiá»ƒm tra xem validator Ä‘Ã³ cÃ³ gian láº­n khÃ´ng.&lt;/p&gt;

&lt;p&gt;Chá»n Block Proposer quÃ¡ trÃ¬nh giáº£ ngáº«u nhiÃªn gá»“m nhiá»u yÃªu tá»‘ nhÆ° staking age, sá»‘ tiá»n stake,â€¦ á» Ä‘Ã¢y, mÃ¬nh sáº½ giá»›i thiá»‡u 2 phÆ°Æ¡ng phÃ¡p lá»±a chá»n lÃ :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt; Randomize block selection: &lt;/strong&gt; lá»±a chá»n báº±ng cÃ¡ch tÃ¬m kiáº¿m nodes cÃ³ sá»± káº¿t há»£p cá»§a hash value tháº¥p nháº¥t vÃ  stake cao nháº¥t. VÃ¬ size cá»§a cÃ¡c stakes lÃ  cÃ´ng khai nÃªn cÃ³ thá»ƒ dá»± Ä‘oÃ¡n Ä‘Æ°á»£c.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt; Coin Age Selection: &lt;/strong&gt; lÃ  phÆ°Æ¡ng thá»©c chá»n cÃ¡c nodes dá»±a vÃ o khoáº£ng thá»i gian stake. Coin Age Ä‘Æ°á»£c tÃ­nh báº±ng: sá»‘ ngÃ y Ä‘áº·t cÆ°á»£c x sá»‘ lÆ°á»£ng coin. Khi má»™t node forge má»™t block, coin age cá»§a nÃ³ Ä‘Æ°á»£c cÃ i vá» 0.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-quy-trÃ¬nh-xÃ¡c-thá»±c&quot;&gt;Quy trÃ¬nh xÃ¡c thá»±c&lt;/h4&gt;
&lt;p&gt;Khi má»™t user táº¡o Tx vÃ  submit lÃªn Ethereum, nÃ³ sáº½ Ä‘Æ°á»£c kiá»ƒm tra tÃ­nh há»£p lá»‡ (VÃ­ dá»¥ Ä‘áº£m báº£o sá»‘ tiá»n, key Ä‘Ãºng,â€¦) sau Ä‘Ã³ Ä‘Æ°á»£c Ä‘Æ°a Ä‘áº¿n mempool vÃ  phÃ¡t tÃ¡n nÃ³ Ä‘áº¿n cÃ¡c node khÃ¡c. &lt;br /&gt;
Má»™t node Ä‘Æ°á»£c chá»n lÃ m Block Proposer Ä‘á»ƒ Ä‘á» xuáº¥t khá»‘i á»Ÿ slot nÃ y, cÃ³ trÃ¡ch nhiá»‡m Ä‘Ã³ng vÃ  phÃ¡t tÃ¡n block vÃ o chuá»—i vÃ  cáº­p nháº­p tráº¡ng thÃ¡i. Nodes cháº¡y 3 pháº§n má»m:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Execution client: gá»™p cÃ¡c Txs tá»« mempool thÃ nh &quot;execution payload&quot; vÃ  cháº¡y nÃ³ á»Ÿ local Ä‘á»ƒ táº¡o ra sá»± thay Ä‘á»•i tráº¡ng thÃ¡i. ThÃ´ng tin nÃ y Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n consensus client&lt;/li&gt;
  &lt;li&gt;Consensus client: Ä‘Ã³ng gÃ³i payload thÃ nh 1 pháº§n cá»§a &quot;beacon block&quot; (gá»“m payload, slashing,â€¦) cho phÃ©p máº¡ng thá»‘ng nháº¥t trÃ¬nh tá»± vá» cÃ¡c khá»‘i.&lt;/li&gt;
  &lt;li&gt;Validator client: CÃ¡c node nháº­n Ä‘Æ°á»£c beacon block qua táº§ng gossip network. Sau Ä‘Ã³ chuyá»ƒn Ä‘áº¿n Execution client cá»§a nÃ³ Ä‘á»ƒ cháº¡y láº¡i, nháº±m cháº¯c cháº¯n tráº¡ng thÃ¡i lÃ  Ä‘Ãºng. Sau Ä‘Ã³m Validator client sáº½ chá»©ng thá»±c khá»‘i Ä‘Ã³ há»£p lá»‡ vÃ  lÃ  khá»‘i tiáº¿p theo trong gÃ³c nhÃ¬n cá»§a chuá»—i (available chain). Khá»‘i cÅ©ng Ä‘Æ°á»£c thÃªm vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u local cá»§a cÃ¡c node.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;heading-finality&quot;&gt;Finality&lt;/h4&gt;
&lt;p&gt;NhÆ° Ä‘Ã£ nÃ³i á»Ÿ trÃªn, cÃ¡c block cá»§a available chain luÃ´n extend tá»« Ä‘iá»ƒm checkpoint cuá»‘i cÃ¹ng. Checkpoint lÃ  cÃ¡c block Ä‘áº§u tiÃªn á»Ÿ má»—i epoch. CÃ¡c validators cÃ³ thá»ƒ vote cho cáº·p checkpoint (1 epoch), náº¿u Ã­t nháº¥t 2/3 vote cho nÃ³, cáº·p checkpoint nÃ y sáº½ Ä‘Æ°á»£c cáº­p nháº­p, vÃ  cÃ¡c block náº±m giá»¯a sáº½ Ä‘Æ°á»£c cáº­p nháº­p thÃ nh finalized chain. Náº¿u chuá»—i khÃ´ng thá»ƒ finalized trong nhiá»u hÆ¡n 4 epoch liÃªn tá»¥c, stake ETH tá»« cÃ¡c validator chá»‘ng láº¡i Ä‘a sá»‘ sáº½ bá»‹ biáº¿n máº¥t, cho phÃ©p Ä‘a sá»‘ chiáº¿m hÆ¡n 2/3 vÃ  finalized chuá»—i.&lt;/p&gt;

&lt;h2 id=&quot;heading-lá»i-káº¿t&quot;&gt;Lá»i káº¿t&lt;/h2&gt;
&lt;p&gt;á» trÃªn lÃ  cÃ¡ch hoáº¡t Ä‘á»™ng cÆ¡ báº£n cá»§a POS. Má»i ngÆ°á»i cÃ³ thá»ƒ xem thÃªm cÃ¡c thÃ´ng tin vá» POS trong Ethereum táº¡i &lt;a href=&quot;https://ethereum.org/vi/developers/docs/consensus-mechanisms/pos/&quot;&gt;Ä‘Ã¢y&lt;/a&gt;.&lt;/p&gt;</content><author><name>VanhGer</name><email>vietanhpg2003@gmail.com</email></author><category term="[&quot;blockchain&quot;, &quot;cs251&quot;]" /><category term="knowledge" /><summary type="html">á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u má»™t cÆ¡ cháº¿ Ä‘á»“ng thuáº­n Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng ráº¥t nhiá»u trong cÃ¡c blockchain hiá»‡n nay, Ä‘Ã³ lÃ  Proof of Stake.</summary></entry></feed>