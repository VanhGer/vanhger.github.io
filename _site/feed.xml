<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2024-07-28T09:26:44+07:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">VanhGer</title><subtitle>Hi there !!!</subtitle><entry><title type="html">My private distributed storage using GETH and IPFS.</title><link href="http://localhost:4000/tech/2024/07/24/private-distributed-storage.html" rel="alternate" type="text/html" title="My private distributed storage using GETH and IPFS." /><published>2024-07-24T00:00:00+07:00</published><updated>2024-07-24T00:00:00+07:00</updated><id>http://localhost:4000/tech/2024/07/24/private-distributed-storage</id><content type="html" xml:base="http://localhost:4000/tech/2024/07/24/private-distributed-storage.html"><![CDATA[<h2 id="intro">Intro</h2>

<p>Last semester, I studied System Administration subject and worked on a project about Ethereum applications. Specifically, my topic involved using Ethereum Private Blockchain as a distributed storage system. I found this quite challenging initially because I knew nothing about distributed storage or how to build DApps on Ethereum. I asked my teacher for help, and he suggested some keywords like Geth and IPFS. I then researched these topics extensively, experimented, and ultimately earned an A+ score for my project. I believe itâ€™s worth sharing my experience with everyone who is interested. So, letâ€™s dive into it!<br />
<br /></p>

<blockquote>
  <p>This post does not explain in detail what Geth and IPFS are. Instead, I will outline the structure of my project and the way I implemented it.</p>
</blockquote>

<blockquote>
  <p>My repository is <a href="https://github.com/VanhGer/ethereum_ipfs">here</a>. It includes the set up tutorial, so I will not mention it in this post. I suggest reading the tutorial simultaneously with reviewing the code.</p>
</blockquote>

<h2 id="geth-and-ethereum-private-blockchain">Geth and Ethereum Private Blockchain</h2>

<p>Geth is an Ethereum client written in Go. Running Geth transforms a computer into an Ethereum node. Since I only have one computer, I decided to create multiple nodes using Docker, as I wanted to learn it. I set up three Ethereum nodes using Geth. In order to make my network private, I created a bootstrap node. The bootstrap node is a normal node that is designated to be the entry point that other nodes use to join the network.</p>

<p>So, I have 4 nodes in my private network. To start my private blockchain with these nodes, I needed to configure my chain a little bit. First, I created a local chain with a unique <code class="highlighter-rouge">chainId</code>, which Ethereum supports. I also configured some features for my private chain such as the gas limit and consensus protocol,â€¦. Finally, I used Docker to run all the nodes with the set up above to create my private blockchain ^^. You can read my setup in <code class="highlighter-rouge">Dockerfile</code> and <code class="highlighter-rouge">docker-compose.yml</code>.
Actually, I primarily followed this tutorial from <a href="https://geth.ethereum.org/docs/fundamentals/private-network"> Geth </a>, but I ran all the nodes in Docker.</p>

<p>To test my private blockchain, I created accounts for each node and made some transactions:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eth.sendTransaction<span class="o">({</span>to: <span class="s2">"0xb166b7aaed24a12b3dd5dfa668ba3b9d10b1950d"</span>, from: eth.accounts[0], value: 25000<span class="o">})</span>
</code></pre></div></div>

<p>Here is the demo: <br /></p>

<video controls="" width="100%">
  <source src="/public/images/post_img/post24_eth.mp4" type="video/mp4" />
</video>

<h2 id="ipfs">IPFS</h2>

<p>IPFS is a distributed file system in a peer-to-peer (P2P) network architecture. The machines participating in the system can store and upload data without going through a server. When a file is added to IPFS, it is split into smaller blocks. Each block is hashed using a cryptographic hash function, producing a unique identifier (hash) for each block. This hash is returned to the user, who can then retrieve their file using this hash.</p>

<p>I created two nodes, each running IPFS via Docker to participate in my distributed system. They share the same SWARM key to join the same network and communicate with each other.</p>

<p>To run IPFS on the two Docker nodes, I added this image to them and copied the SWARM key:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM ipfs/go-ipfs:latest

COPY swarm.key /swarm.key
</code></pre></div></div>

<p>Here is how I set up and use my private IPFS:</p>

<video controls="" width="100%">
  <source src="/public/images/post_img/post24_ipfs.mp4" type="video/mp4" />
</video>

<h2 id="combine">Combine</h2>

<p>Now itâ€™s time to combine my private blockchain and IPFS. Users can use my project to upload pictures into distributed storage.</p>

<p>Here is the structure for my project:</p>

<p><a class="post-image" display="center">
	<img itemprop="image" src="/public/images/post_img/post24_components.png" width="100%" />
</a></p>

<p>There are 4 components:</p>
<ul>
  <li>Frontend: Where users interact with my system.</li>
  <li>Backend: Handle request from user via the frontend.</li>
  <li>IPFS: My distributed storage, consisting of 2 nodes</li>
  <li>Private Ethereum Network: My private network, consisting of 3 nodes.</li>
</ul>

<h3 id="how-it-works">How it works</h3>

<p>First, letâ€™s look at the uploading process:</p>

<p><a class="post-image" display="center">
	<img itemprop="image" src="/public/images/post_img/post24_uploading.png" width="100%" />
</a></p>

<p>The user uploads a file with the corresponding name to our system via the frontend. The file and name are then sent to the backend. The backend uploads the file to the private IPFS and receives a hash. Next, this hash  is stored in the private Ethereum network by invoking smartcontract via a transaction, which also indicates whether the file was stored successfully.</p>

<p><br /></p>

<p>Now, letâ€™s dive into the downloading process:</p>

<p><a class="post-image" display="center">
	<img itemprop="image" src="/public/images/post_img/post24_downloading.png" width="100%" />
</a></p>

<p>When a user requests his files via the frontend,  the request is sent to the backend. The backend retrieves the hash file from the private Ethereum network by invoking the smart contract.  Then, the frontend receives the hash and uses it to get the file from the private IPFS. Finally, the file is sent back to the user.</p>

<h3 id="smartcontract">SmartContract</h3>

<p>Above is the basic workflow of my project. To store and retrieve the file hash from the network, I wrote a smart contract
with two functions: one for storing the hash and one for retrieving it. I used <a href="https://hardhat.org/">Hardhat</a> to deploy the contract on Ethereum.</p>

<p>Here is the contract and the setup of my project:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SPDX-License-Identifier: MIT</span>
<span class="nx">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="nx">contract</span> <span class="nx">Store</span> <span class="p">{</span>
    <span class="nx">struct</span> <span class="nx">File</span> <span class="p">{</span>
        <span class="nx">string</span> <span class="nx">filename</span><span class="p">;</span>
        <span class="nx">string</span> <span class="nx">cid</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">mapping</span><span class="p">(</span><span class="nx">address</span> <span class="o">=&gt;</span> <span class="nx">File</span><span class="p">[])</span> <span class="kr">public</span> <span class="nx">userFiles</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">storeFile</span><span class="p">(</span><span class="nx">string</span> <span class="nx">memory</span> <span class="nx">_filename</span><span class="p">,</span> <span class="nx">string</span> <span class="nx">memory</span> <span class="nx">_cid</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
        <span class="nx">File</span><span class="p">[]</span> <span class="nx">storage</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">userFiles</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">];</span>
        <span class="nx">files</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">File</span><span class="p">(</span><span class="nx">_filename</span><span class="p">,</span> <span class="nx">_cid</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getUserFiles</span><span class="p">()</span> <span class="kr">public</span> <span class="nx">view</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">File</span><span class="p">[]</span> <span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">userFiles</span><span class="p">[</span><span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># init hardhat</span>
npx hardhat init
<span class="c"># select: Create an empty hardhat.config.js</span>

<span class="c"># compile smart contract</span>
npx hardhat compile

<span class="c"># deploy smart contract</span>
npx hardhat ignition deploy ./ignition/modules/Store.js <span class="nt">--network</span> localhost
</code></pre></div></div>

<p>I recommend following the tutorial of HardHat <a href="https://hardhat.org/tutorial">here</a>. I found HardHat quite user-friendly for beginners like me, and it took only two days to deploy everything. Since I coded the backend in Javascript, I needed to import <code class="highlighter-rouge">ethers</code> library to interact with the Ethereum blockchain.</p>

<p>Finally, letâ€™s see how my project performs:</p>

<video controls="" width="100%">
  <source src="/public/images/post_img/post24_full.mp4" type="video/mp4" />
</video>

<h2 id="end">End</h2>

<p>After this post, I hope you understand the architecture of my project, and this post will help you in some ways. You can find the full demo video and slide in Vietnamese here:</p>
<ul>
  <li><a href="https://docs.google.com/presentation/d/1dLJEqgNMOMhueeNHYI7sPO8pDQ5MQoF4BMYc7ME8j40/edit?usp=sharing">Slide</a></li>
  <li><a href="https://drive.google.com/file/d/17bx_PUr3_f4eeOGlOKWLOrX5fm-N8g-w/view?usp=sharing">Video</a></li>
</ul>

<p>If you have any questions or need clarification, feel free to comment on this post. Additionally, I encourage you to contribute to the project by creating issues or making pull requests on the repository.</p>]]></content><author><name></name></author><category term="tech" /><summary type="html"><![CDATA[Intro]]></summary></entry><entry><title type="html">TÃ¬nh yÃªu vÃ  nhá»¯ng sá»± há»‘i tiáº¿c</title><link href="http://localhost:4000/life/2024/06/10/tinh-yeu-va-su-hoi-tiec.html" rel="alternate" type="text/html" title="TÃ¬nh yÃªu vÃ  nhá»¯ng sá»± há»‘i tiáº¿c" /><published>2024-06-10T00:00:00+07:00</published><updated>2024-06-10T00:00:00+07:00</updated><id>http://localhost:4000/life/2024/06/10/tinh-yeu-va-su-hoi-tiec</id><content type="html" xml:base="http://localhost:4000/life/2024/06/10/tinh-yeu-va-su-hoi-tiec.html"><![CDATA[<p>Well, mÃ¬nh khÃ´ng nghÄ© mÃ¬nh sáº½ viáº¿t blog vá» chá»§ Ä‘á» tÃ¬nh yÃªu cá»§a báº£n thÃ¢n, bá»Ÿi vÃ¬ tÃ¬nh yÃªu trong nhá»¯ng tráº£i nghiá»‡m cá»§a mÃ¬nh cÃ³ váº» khÃ¡ lÃ  kÃ¬ láº¡. NhÆ°ng mÃ  ai biáº¿t Ä‘Æ°á»£c, vÃ o má»™t sÃ¡ng sá»›m HÃ  Ná»™i mÆ°a ráº£ rÃ­c tháº¿ nÃ y, sau má»™t giáº¥c mÆ¡ mÆ¡ há»“, mÃ¬nh láº¡i cÃ³ cáº£m há»©ng Ä‘á»ƒ viáº¿t ra má»™t chÃºt, hihi.</p>

<p><a class="post-image" display="center">
	<img itemprop="image" src="/public/images/post_img/post23_1.jpg" />
</a></p>

<h2 id="tÃ¬nh-yÃªu-tá»«-báº£n-thÃ¢n-mÃ¬nh">TÃ¬nh yÃªu tá»« báº£n thÃ¢n mÃ¬nh</h2>

<p>DÃ¹ sao thÃ¬, mÃ¬nh má»›i 21 tuá»•i, vÃ  tráº£i nghiá»‡m yÃªu Ä‘Æ°Æ¡ng cá»§a mÃ¬nh cÅ©ng khÃ´ng Ä‘Æ°á»£c phong phÃº láº¯m. NÃ³i hoa mÄ© lÃ  tháº¿, chá»© tháº­t ra mÃ¬nh chÆ°a báº¯t Ä‘áº§u 1 má»‘i tÃ¬nh nÃ o nghiÃªm tÃºc cáº£. Nhá»¯ng kÃ­ á»©c cá»§a mÃ¬nh vá» tÃ¬nh yÃªu chá»‰ lÃ  Ä‘Æ¡n giáº£n nhá»¯ng láº§n yÃªu Ä‘Æ¡n phÆ°Æ¡ng hoáº·c má»™t vÃ i giÃ¢y phÃºt máº­p má» nhá» bÃ©. MÃ¬nh khÃ´ng biáº¿t cÃ¡ch Ä‘á»ƒ tiáº¿p tá»¥c nhá»¯ng cáº£m xÃºc Ä‘Ã³, hoáº·c Ä‘Æ¡n giáº£n mÃ¬nh chÆ°a há»c Ä‘Æ°á»£c cÃ¡ch Ä‘Ã³n nháº­n tÃ¬nh yÃªu tá»« ngÆ°á»i khÃ¡c. Tháº¿ nÃªn mÃ¬nh nhiá»u láº§n Ä‘Ã£ chá»n cÃ¡ch nÃ© trÃ¡nh, hoáº·c cháº¡y chá»‘n khi nháº­n ra nhá»¯ng ngÆ°á»i mÃ¬nh Ä‘ang thÃ­ch cÃ³ váº» nhÆ° cÅ©ng Ä‘Ã£ báº­t Ä‘Ã¨n xanh cho mÃ¬nh. NghÄ© láº¡i tháº¥y mÃ¬nh tá»‡ tháº­t.</p>

<p>Hiá»ƒn nhiÃªn, mÃ¬nh cÅ©ng tá»«ng yÃªu Ä‘Æ¡n phÆ°Æ¡ng, má»™t mÃ¬nh, vÃ  khÃ´ng dÃ¡m thá»• lá»™. Láº¡ thay, mÃ¬nh láº¡i cÃ³ váº» há»©ng thÃº vá»›i cáº£m giÃ¡c theo Ä‘uá»•i má»™t ngÆ°á»i, nghÄ© vá» há», mÆ¡ tÆ°á»Ÿng vá» khoáº£ng thá»i gian tá»‘t Ä‘áº¹p cá»§a mÃ¬nh vá»›i há» trong tÃ¢m trÃ­ hÆ¡n lÃ  viá»‡c thá»±c hiá»‡n Ä‘iá»u Ä‘Ã³â€¦ Nhiá»u lÃºc khÃ´ng hiá»ƒu táº¡i sao mÃ¬nh láº¡i lÃ m tháº¿, liá»‡u mÃ¬nh cÃ³ bá»‹ biáº¿n thÃ¡i nhÃ¢n cÃ¡ch hay tÃ¢m lÃ­ mÃ¬nh nhÃ¡t gÃ¡i hay khÃ´ng ???</p>

<p><a class="post-image" display="center">
	<img itemprop="image" src="/public/images/post_img/post23_2.jpg" />
</a></p>

<p>MÃ¬nh cÅ©ng Ä‘Ã£ tá»«ng pháº¡m nhá»¯ng sai láº§m, dáº«n Ä‘áº¿n máº¥t Ä‘i nhá»¯ng má»‘i quan há»‡ cÃ³ váº» nhÆ° Ä‘ang tiáº¿n triá»ƒn ráº¥t tá»‘t. Láº½ ra, mÃ¬nh nÃªn suy nghÄ© kÄ© hÆ¡n, trÆ°á»Ÿng thÃ nh hÆ¡n trong cÃ¡ch nhÃ¬n nháº­n tháº¿ giá»›i xung quanh, hoáº·c chá»‰ Ä‘Æ¡n giáº£n, mÃ¬nh nÃªnâ€¦ tá»‘t hÆ¡n. Bá»Ÿi láº½, khÃ´ng nhÆ° nhá»¯ng tÃ¬nh yÃªu Ä‘Æ¡n phÆ°Æ¡ng, mÃ¬nh cáº£m tháº¥y cÃ³ chÃºt gÃ¬ Ä‘Ã³ há»‘i tiáº¿c vÃ  tá»± ti khi Ä‘áº¯m chÃ¬m vÃ o trong kÃ­ á»©c nÃ y, hoáº·c chá»‰ Ä‘Æ¡n giáº£n lÃ  mÆ¡ vá» nÃ³. CÃ³ láº½ mÃ¬nh cáº§n há»c cÃ¡ch Ä‘á»‘i máº·t vá»›i nÃ³ trong suá»‘t cuá»™c Ä‘á»i, hoáº·c cho Ä‘áº¿n khi tÃ¢m há»“n cá»§a mÃ¬nh Ä‘Æ°á»£c chá»¯a lÃ nh báº±ng nhá»¯ng kÃ­ á»©c tÆ°Æ¡i Ä‘áº¹p hÆ¡n.</p>

<h2 id="há»‘i-tiáº¿c-cá»§a-tuá»•i-tráº»">Há»‘i tiáº¿c cá»§a tuá»•i tráº»</h2>

<p>Nhá»¯ng sai láº§m cá»§a mÃ¬nh khÃ¡ lÃ â€¦ ngu. NhÆ°ng sai láº§m nÃ y cÃ³ láº½ lÃ  tá»‡ nháº¥t mÃ  mÃ¬nh tá»«ng máº¯c pháº£i.</p>

<p>MÃ¬nh tá»«ng vÃ´ cá»› unfriend báº¡n, má»™t ngÆ°á»i mÃ¬nh ráº¥t thÃ­ch, dÃ¹ khÃ´ng hiá»ƒu táº¡i sao láº¡i lÃ m nhÆ° váº­y. TrÆ°á»›c Ä‘Ã³, mÃ¬nh vÃ  báº¡n cÃ³ há»c chung vá»›i nhau má»™t nÄƒm cáº¥p 2. Má»‘i quan há»‡ lÃºc Ä‘Ã³ chá»‰ Ä‘Æ¡n giáº£n lÃ  báº¡n bÃ¨ ngÃ´ nghÃª nhÆ° nhá»¯ng ngÆ°á»i khÃ¡c. Rá»“i khi báº¡n chuyá»ƒn trÆ°á»ng, mÃ¬nh váº«n cÃ²n liÃªn láº¡c vá»›i báº¡n qua Facebook (tháº­t may lÃºc Ä‘Ã³ mÃ¬nh vÃ  báº¡n dÃ¹ng Facebook sá»›m nhÆ° zzz), cÅ©ng chia sáº» nhá»¯ng cÃ¢u chuyá»‡n khÃ¡ lÃ  tráº» con khÃ¡c. MÃ¬nh ká»ƒ vá» nhá»¯ng ngÆ°á»i há»c cÃ¹ng lá»›p cáº¥p 2 Ä‘Ã³ giá» thay Ä‘á»•i ra sao, hay nhá»¯ng thay Ä‘á»•i trong chiá»u cao vÃ  ngoáº¡i hÃ¬nh cá»§a há», Ä‘Ã´i khi khiáº¿n báº¡n khÃ³ hiá»ƒu táº¡i sao há» láº¡i cao nhanh tháº¿, cao hÆ¡n cáº£ báº¡n ná»¯a. Báº¡n cÅ©ng ká»ƒ vá» nhá»¯ng láº§n nghá»‹ch dáº¡i á»Ÿ nhÃ  Ã´ng bÃ , báº¡n vÃ´ tÃ¬nh lÃ m chÃ¡y chiáº¿c bÃ³ng bay, suÃ½t lÃ m chÃ¡y nhÃ . Báº¡n cÅ©ng ká»ƒ vá» nhá»¯ng cáº£m xÃºc á»Ÿ mÃ´i trÆ°á»ng má»›i, hoáº·c vá» vÃ i chuyá»‡n mÃ  mÃ¬nh cÅ©ng khÃ´ng nhá»› ná»¯a. Tháº­t tiáº¿c khi nhá»¯ng tin nháº¯n Ä‘Ã³ khÃ´ng cÃ²n :(.</p>

<p><a class="post-image" display="center">
	<img itemprop="image" src="/public/images/post_img/post23_3.jpg" />
</a></p>

<p>Báºµng Ä‘i má»™t thá»i gian, khi thi vÃ o nÄƒm cáº¥p 3, mÃ¬nh vÃ´ tÃ¬nh gáº·p báº¡n á»Ÿ cá»•ng trÆ°á»ng. Well, khÃ¡ lÃ  trÃ¹ng há»£p láº«n khÃ³ táº£, dÆ°á»›i cÃ¡i náº¯ng chÃ³i chang mÃ¹a háº¡, mÃ¬nh khÃ´ng nghÄ© dáº¡o nÃ y báº¡n thay Ä‘á»•i nhiá»u nhÆ° tháº¿. Má»™t vÃ i cÃ¢u chuyá»‡n, vÃ  chÃºng mÃ¬nh add láº¡i acc facebook nhau, vÃ¬ cÆ¡ báº£n account cÅ© cá»§a mÃ¬nh Ä‘Ã£ máº¥t. KhÃ´ng hiá»ƒu táº¡i sao, tin nháº¯n Ä‘áº§u tiÃªn cá»§a mÃ¬nh cho báº¡n lÃºc Ä‘Ã³, láº¡i lÃ  â€œ<strong>Miss U</strong>â€.
Vá» nhÃ , mÃ¬nh cÃ¹ng báº¡n há»i han nhau xem kÃ¬ thi láº§n nÃ y tháº¿ nÃ o, vá»›i nhá»¯ng hi vá»ng vá» viá»‡c sáº½ láº¡i há»c cÃ¹ng má»™t trÆ°á»ng láº§n ná»¯a. NhÆ°ng tháº­t tiáº¿c, mÃ¬nh vÃ  báº¡n váº«n há»c khÃ¡c trÆ°á»ng. Báº¡n gá»­i cho mÃ¬nh 1 tin nháº¯n khiáº¿n mÃ¬nh lÃºc Ä‘Ã³ ngÃ¢y thÆ¡ vá»«a nhÃ¬n vÃ o mÃ n hÃ¬nh, vá»«a cÆ°á»i trong vÃ´ thá»©c: â€œ<strong>Miss U</strong>â€.</p>

<p>Há», cÃ³ váº» cáº£ mÃ¹a hÃ¨ á»Ÿ trong tay mÃ¬nh rá»“i, mÃ¬nh tá»± nhá»§. Rá»“i khi lÃªn cáº¥p 3, mÃ´i trÆ°á»ng má»›i khiáº¿n mÃ¬nh váº¥t váº£ thÃ­ch nghi, vÃ  cÃ³ nhá»¯ng tÆ° tÆ°á»Ÿng lá»‡ch láº¡c. MÃ¬nh váº«n nháº¯n tin vá»›i báº¡n, ká»ƒ nhá»¯ng cÃ¢u chuyá»‡n cá»n con, hoáº·c vÃ i lá»i bÃ¢ng quÆ¡ vÃ´ cá»›. Bá»n mÃ¬nh nÃ³i vá» nháº¡c rap, vÃ  báº¡n báº£o cÅ©ng hay nghe Bray, nhÆ°ng bÃ i báº¡n thÃ­ch nghe láº¡i lÃ  Qua Ta cá»§a Hades. MÃ¬nh cÅ©ng báº£o lÃ  mÃ¬nh á»Ÿ KÃ­ tÃºc xÃ¡, Äƒn cÆ¡m cÃ³ váº» khÃ´ng há»£p, báº¡n cÅ©ng khoe lÃ  báº¡n náº¥u cÆ¡m ngon láº¯m, Ä‘á»ƒ báº¡n náº¥u cho Äƒn thá»­ 1 hÃ´m. Æ  kÃ¬a, cáº£m giÃ¡c trong lá»“ng ngá»±c mÃ¬nh lÃ  gÃ¬ váº­y, tÃ¬nh yÃªu lÃ  tháº¿ Æ° ??? MÃ¬nh ngáº¡i, cÅ©ng cháº£ dÃ¡m nháº¯n lÃ  Ä‘á»“ng Ã½, rá»“i tin nháº¯n cÅ©ng bá»‹ trÃ´i qua. Ngu tháº­t Vanh áº¡.</p>

<p>Táº¡i sao mÃ¬nh láº¡i lÃ m tháº¿ Æ°, vÃ¬ lÃºc Ä‘Ã³ mÃ¬nh quÃ¡ tá»± cao vá» báº£n thÃ¢n, vÃ  cho ráº±ng viá»‡c báº¡n thÃ­ch mÃ¬nh lÃ  hiá»ƒn nhiÃªn, cÃ²n mÃ¬nh khÃ´ng cáº§n thiáº¿t pháº£i thÃ­ch báº¡n. â€œÆ  kÃ¬a, mÃ y tá»«ng mÆ¡ gáº·p báº¡n rá»“i cÃ²n náº¯m tay cÆ¡ mÃ , sao lÃºc Ä‘Ã³ láº¡i nghÄ© nhÆ° tháº¿ háº£ VanhGâ€. Chá»‹u, cháº£ hiá»ƒu tÃ¢m lÃ½ cá»§a 1 tháº±ng lá»›p 10 nÃ y nhÆ° tháº¿ nÃ o ná»¯a.</p>

<p>VÃ  tiáº¿p theo, vá»›i cÃ¡i tÆ° tÆ°á»Ÿng Ä‘Ã³, mÃ¬nh chá»n cÃ¡ch nÃ© trÃ¡nh tÃ¬nh yÃªu láº½ ra lÃ  sáº½ ráº¥t Ä‘áº¹p vÃ  cÃ³ 1 káº¿t thÃºc trá»n váº¹n hÆ¡n. MÃ¬nh dáº§n khÃ´ng nháº¯n tin vá»›i báº¡n, hoáº·c reply má»™t cÃ¡ch qua loa. Äá»‰nh Ä‘iá»ƒm, 1 ngÃ y mÃ¬nh unfriend vá»›i báº¡n. Æ  damn, táº¡i sao láº¡i váº­y ???
Dáº¥u há»i to lá»›n trong Ä‘áº§u mÃ¬nh má»—i khi nghÄ© láº¡i, mÃ¬nh bá»‹ gÃ¬ váº­y, tÃ¢m tháº§n háº£? VÃ  cÃ³ váº» báº¡n cÅ©ng khÃ´ng hiá»ƒu giá»‘ng mÃ¬nh, vÃ  cháº¯c báº¡n cÅ©ng nháº­n láº¡i nhiá»u tá»•n thÆ°Æ¡ng mÃ  láº½ ra báº¡n khÃ´ng nÃªn nháº­n nÃ³. Haizz, tuá»•i tráº», nghÄ© láº¡i tháº¥y tháº­t há»‘i háº­n vÃ  trÃ¡ch báº£n thÃ¢n láº½ ra cÃ³ thá»ƒ lÃ m tá»‘t hÆ¡n.</p>

<p><a class="post-image" display="center">
	<img itemprop="image" src="/public/images/post_img/post23_4.jpg" />
</a></p>

<p>Rá»“i 1 khoáº£ng thá»i gian, hÃ¬nh nhÆ° mÃ¬nh cÅ©ng cÃ³ káº¿t báº¡n láº¡i vá»›i báº¡n, nhÆ°ng cÃ³ thá»ƒ má»i ngÆ°á»i cÅ©ng Ä‘oÃ¡n Ä‘Æ°á»£c, nÃ³ quÃ¡ trá»… rá»“i. Thi thoáº£ng, mÃ¬nh khÃ´ng biáº¿t cáº£m xÃºc cá»§a mÃ¬nh dÃ nh cho báº¡n lÃ  gÃ¬, cÃ³ thá»ƒ lÃ  sá»± há»‘i tiáº¿c hoáº·c cáº£m giÃ¡c Ä‘Æ°á»£c yÃªu hÆ¡n lÃ  viá»‡c mÃ¬nh tháº­t sá»± thÃ­ch báº¡n. NhÆ°ng dÃ¹ nÃ³ lÃ  gÃ¬ Ä‘i ná»¯a, nÃ³ cÅ©ng khiáº¿n mÃ¬nh cÃ³ nhá»¯ng cáº£m xÃºc máº¡nh máº½ khi nghÄ© vá» báº¡n.</p>

<p>Láº§n gáº§n nháº¥t, cÃ³ láº½ lÃ  nÄƒm trÆ°á»›c, mÃ¬nh vÃ  báº¡n nháº¯n tin nhÆ° nhá»¯ng ngÆ°á»i báº¡n cÅ© tá»«ng quen vÃ  vÃ¬ trong má»™t hoÃ n cáº£nh Ä‘áº·c biá»‡t khÃ¡c vá» gia Ä‘Ã¬nh (mÃ¬nh khÃ´ng tiá»‡n ká»ƒ hihi), cÅ©ng khÃ´ng Ä‘á» cáº­p nhiá»u Ä‘áº¿n nhá»¯ng viá»‡c khÃ¡c. MÃ¬nh biáº¿t báº¡n Ä‘Ã£ háº¡nh phÃºc hÆ¡n vÃ  cÃ³ Ä‘Æ°á»£c má»™t chÃ ng trai áº¥m Ã¡p, Ã­t nháº¥t lÃ  báº¡n xá»©ng Ä‘Ã¡ng Ä‘Æ°á»£c nhÆ° váº­y.</p>

<h2 id="Ä‘Ã´i-lá»i">ÄÃ´i lá»i</h2>

<p>MÃ¬nh biáº¿t ráº±ng ai cÅ©ng cÃ³ nhá»¯ng sai láº§m, vÃ  mÃ¬nh hiá»‡n táº¡i cÅ©ng Ä‘ang cá»‘ gáº¯ng Ä‘á»‘i máº·t vÃ  vÆ°á»£t qua má»—i khi nghÄ© vá» nÃ³. ÄÃ´i khi nÃ³ cÅ©ng mÃ£nh liá»‡t vÃ  dá»¯ dá»™i, Ä‘i sÃ¢u cáº£ vÃ o trong nhá»¯ng giáº¥c mÆ¡ cá»§a mÃ¬nh (vÃ­ dá»¥ lÃ  hÃ´m nayâ€¦). MÃ¬nh chá»n cÃ¡ch viáº¿t ra, vÃ¬ nÃ³ cÃ³ thá»ƒ giÃºp mÃ¬nh bá»›t Ä‘i 1 pháº§n sá»± há»‘i háº­n vÃ  tiáº¿c nuá»‘i. MÃ¬nh cÅ©ng biáº¿t, bá»™ nÃ£o con ngÆ°á»i cÃ³ giá»›i háº¡n, nhá»¯ng kÃ­ á»©c Ä‘áº¹p Ä‘áº½ vá» báº¡n rá»“i sáº½ bá»‹ mÃ¬nh quÃªn Ä‘i theo nÄƒm thÃ¡ng, nÃªn mÃ¬nh chá»n viáº¿t ra, xem nhÆ° lÃ  lÆ°u giá»¯ nhá»¯ng ká»‰ niá»‡m nÃ y mÃ£i mÃ£i, nhá»‰ ?</p>]]></content><author><name></name></author><category term="[&quot;life&quot;]" /><summary type="html"><![CDATA[Well, mÃ¬nh khÃ´ng nghÄ© mÃ¬nh sáº½ viáº¿t blog vá» chá»§ Ä‘á» tÃ¬nh yÃªu cá»§a báº£n thÃ¢n, bá»Ÿi vÃ¬ tÃ¬nh yÃªu trong nhá»¯ng tráº£i nghiá»‡m cá»§a mÃ¬nh cÃ³ váº» khÃ¡ lÃ  kÃ¬ láº¡. NhÆ°ng mÃ  ai biáº¿t Ä‘Æ°á»£c, vÃ o má»™t sÃ¡ng sá»›m HÃ  Ná»™i mÆ°a ráº£ rÃ­c tháº¿ nÃ y, sau má»™t giáº¥c mÆ¡ mÆ¡ há»“, mÃ¬nh láº¡i cÃ³ cáº£m há»©ng Ä‘á»ƒ viáº¿t ra má»™t chÃºt, hihi.]]></summary></entry><entry><title type="html">Taxua trip: An Unexpected Fear</title><link href="http://localhost:4000/life/2024/03/18/taxua-trip-and-an-unexpected-fear.html" rel="alternate" type="text/html" title="Taxua trip: An Unexpected Fear" /><published>2024-03-18T00:00:00+07:00</published><updated>2024-03-18T00:00:00+07:00</updated><id>http://localhost:4000/life/2024/03/18/taxua-trip-and-an-unexpected-fear</id><content type="html" xml:base="http://localhost:4000/life/2024/03/18/taxua-trip-and-an-unexpected-fear.html"><![CDATA[<p>Hi there! Itâ€™s me again. Iâ€™ve just finished my trip to Ta Xua for one week, and a lot of feelings are still
here with me rightnow. So, I think itâ€™s great to write some down.</p>

<p>Well, Ta Xua is located in the landscape of the Bac Yen district in Son La province. It offers an enchanting blend
of untouched nature and a sense of tranquility that is rare to find in popular.</p>

<p>I went there with my group of friends, and we stayed there for 2 days, renting motobikes to travel around. Unfortunately, the weather on the first day wasnâ€™t too supportive. It was cloudy and foggy, with temperatures around 20 degrees Celsius, so persionally, I found it hard to go by motobike. However, on the second day, it was sunny and windy, and of course, we enjoyed many beautiful moments that day. Here are some pictures Ta Xua and us:</p>

<figure class="post-image" style="display: flex;">
    <div style="display: inline; width: 50%; padding: 5px; justify-content: center; text-align: center">
        <img itemprop="image" src="/public/images/post_img/post22_1.jpg" style="margin-right: 1vw;" />
        <figcaption style="font-size: 10px">Cloud in Taxua</figcaption>
    </div>
    <div style="display: inline; width: 50%; padding: 5px; justify-content: center; text-align: center">
        <img itemprop="image" src="/public/images/post_img/post22_2.jpg" style="margin-right: 1vw;" />
        <figcaption style="font-size: 10px">Sunset...without the sun</figcaption>
    </div>
</figure>

<figure class="post-image" style="display: flex;">
    <div style="display: inline; padding: 5px; justify-content: center; text-align: center">
        <img itemprop="image" src="/public/images/post_img/post22_3.jpg" style="margin-right: 1vw;" />
        <figcaption style="font-size: 10px">Me &amp; my friends</figcaption>
    </div>
    <div style="display: inline; padding: 5px; justify-content: center; text-align: center">
        <img itemprop="image" src="/public/images/post_img/post22_4.jpg" style="margin-right: 1vw;" />
        <figcaption style="font-size: 10px">The sun is here...</figcaption>
    </div>
</figure>

<p>It was fun, right? But look at the blog titleâ€¦ Yeah you see, I experienced a pretty terrible fear.</p>

<p>There is one thing you shoud know about Ta Xua: it is situated on the mountain, so in order to travel around its tourist destinations, we must drive downhill and uphill many times. The road, therefore, is narrow and dangerous, so we had to drive very carefully. I think itâ€™s the trade-off to admire the magnificient scenery. And do you remember what I said in the first day? It was foggy and cloudy. So, when my friend and I were driving downhill, we had an accident. We spun around, fell to the ground, and narrowly avoided being crashed into by the car behind. God blessed us; we were still fine after that and continued driving to the homestay.</p>

<p>But is that done? Not yet, at least not to me. For the rest of the day and the next day, I felt affaid of going downhill, and everytime I was on the motobike, I remembered that terrible moment. My hands were shaking when holding the handlebars, and even going uphill I had a hard time. So, on the first night there, I knew that I shouldnâ€™t travel anymore, because I was scared of going downhill, scared ofâ€¦ death.</p>

<p>Then, on the second day, I saw that the weather is better, no more fog, and the sun rising made me feel better. Also, our team have only 4 boys, if I didnâ€™t drive,the other girls would have to and it would have been a worse situation. So, with no choice, I continued drive. And well, at the end of that trip, I drove carefully and didnâ€™t have any accidents. Thanks God.</p>

<p>That story showed me that when I experience a new fear, I also experienced some physiscal reactions like fast breath, shaking hand,â€¦ which I thought only happened in the movie. Man proposes God deposes, I had a chance to feel that and that changed my mind a little bit, hihi.</p>

<p>To end this post, I will share with you some pictures from my memorable trip that my friends captured: <a href="https://www.tiktok.com/@chiichii.03/photo/7342578503658786050">here</a>.</p>]]></content><author><name></name></author><category term="[&quot;life&quot;]" /><summary type="html"><![CDATA[Hi there! Itâ€™s me again. Iâ€™ve just finished my trip to Ta Xua for one week, and a lot of feelings are still here with me rightnow. So, I think itâ€™s great to write some down.]]></summary></entry><entry><title type="html">Bridging vÃ  MEV</title><link href="http://localhost:4000/cs251/2023/08/29/bridging-and-mev.html" rel="alternate" type="text/html" title="Bridging vÃ  MEV" /><published>2023-08-29T00:00:00+07:00</published><updated>2023-08-29T00:00:00+07:00</updated><id>http://localhost:4000/cs251/2023/08/29/bridging-and-mev</id><content type="html" xml:base="http://localhost:4000/cs251/2023/08/29/bridging-and-mev.html"><![CDATA[<p>Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u cÃ¡c báº¡n Ä‘áº¿n MEV vÃ  Bridging giá»¯a cÃ¡c blockchain khÃ¡c nhau.</p>

<h2 id="mev">MEV</h2>

<h3 id="khÃ¡i-niá»‡m">KhÃ¡i niá»‡m</h3>

<p>MEV lÃ  Maximal Extractable Value. ÄÃ¢y lÃ  giÃ¡ trá»‹ lá»›n nháº¥t cÃ³ thá»ƒ thu Ä‘Æ°á»£c tá»« viá»‡c sáº£n xuáº¥t cÃ¡c block vÆ°á»£t qua cÃ¡c pháº§n thÆ°á»Ÿng block tiÃªu chuáº©n vÃ  phÃ­ gas báº±ng viá»‡c thÃªm, loáº¡i bá», thay Ä‘á»•i thá»© tá»± cÃ¡c Tx trong khá»‘i.</p>

<h3 id="searchers">Searchers</h3>

<p>Searchers lÃ  nhá»¯ng ngÆ°á»i post cÃ¡c Tx Ä‘á»ƒ cÃ¢n báº±ng thá»‹ trÆ°á»ng, thanh lÃ½ vÃ  láº¥y lá»£i nhuáº­n. VÃ­ dá»¥: <br />
Uniswap DAI/USDC cÃ³ ExchangeRate lÃ  1.001, trong khi Sushiswap lÃ  1.002.  LÃºc nÃ y, Searchers cÃ³ thá»ƒ vay 1 khoáº£n DAI, Ä‘á»•i DAI thÃ nh USDC trong Uniswap rá»“i dÃ¹ng nÃ³ Ä‘á»ƒ Ä‘á»•i láº¡i DAI trong Sushiswap.  <br />
NgoÃ i ra, cÃ²n nhiá»u cÃ¡ch Ä‘á»ƒ nháº­n MEV tá»« viá»‡c thay Ä‘á»•i chuá»—i Tx (Bundle).\</p>

<h3 id="váº¥n-Ä‘á»-cá»§a-mev">Váº¥n Ä‘á» cá»§a MEV</h3>

<p>Khi searchers post Tx lÃªn mempool, nhá»¯ng Ä‘iá»u sau cÃ³ thá»ƒ xáº£y ra:</p>

<ul>
  <li>Validator: cÃ³ thá»ƒ tá»± táº¡o Tx cá»§a há» vá»›i cÃ¡ch tÆ°Æ¡ng tá»± Tx cá»§a searchers nhÆ°ng ngÆ°á»i thá»¥ hÆ°á»Ÿng sáº½ lÃ  validator Ä‘Ã³ vÃ  Ä‘áº·t nÃ³ trÆ°á»›c Tx cá»§a searchers.</li>
  <li>Searchers khÃ¡c: tá»± táº¡o Tx cá»§a há» nhÆ°ng vá»›i phÃ­ gas Æ°u tiÃªn (maxPriorityFee) cao hÆ¡n. (ThÆ°á»ng Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi cÃ¡c bots).</li>
</ul>

<h4 id="háº­u-quáº£">Háº­u quáº£</h4>

<p><strong> Vá»›i Honest users: </strong> Viá»‡c submit láº¡i nhiá»u láº§n cÃ¡c Tx vá»›i phÃ­ gas Æ°u tiÃªn cao hÆ¡n cho Ä‘áº¿n khi validator chá»n Ä‘Æ°á»£c 1 Tx trong Ã­t giÃ¢y (Äáº¥u giÃ¡ gas) sáº½ dáº«n Ä‘áº¿n viá»‡c táº¯c ngháº½n vÃ  phÃ­ gas cao.</p>

<p><strong> Vá»›i consensus: </strong> Táº¥n cÃ´ng vÃ o chuá»—i dÃ i nháº¥t. LÃ½ do vÃ¬ MEV sáº½ táº¡o lá»£i nhuáº­n cho miner nhiá»u hÆ¡n pháº§n thÆ°á»Ÿng khá»‘i.</p>

<p><strong> GÃ¢y ra Centralization </strong>: CÃ¡c validator cÃ³ thá»ƒ trá»™m MEV Tx tá»« cÃ¡c searchers. Do Ä‘Ã³ nhiá»u searchers chá»‰ gá»­i Tx cho 1 vÃ i validator mÃ  há» tin tÆ°á»Ÿng. LÃ¢u dáº§n sáº½ khiáº¿n má»™t sá»‘ Validators giá»¯ sá»‘ lÆ°á»£ng lá»›n cÃ¡c Tx.</p>

<h3 id="giáº£i-phÃ¡p-proposer-builder-separation-pbs">Giáº£i phÃ¡p: Proposer Builder Separation (PBS)</h3>

<p><strong> Má»¥c tiÃªu: </strong></p>

<ul>
  <li>Giáº£m viá»‡c Ä‘áº¥u giÃ¡ gas</li>
  <li>Thay vÃ o Ä‘Ã³, táº¡o ra má»™t open market mÃ  searchers cáº¡nh tranh vá» vá»‹ trÃ­ bundle cá»§a há» trong block.</li>
  <li>Má»i validators cÃ³ thá»ƒ kiáº¿m MEV payment tá»« searchers. Tá»« Ä‘Ã³ trÃ¡nh viá»‡c centralization.</li>
</ul>

<p>Minh hoáº¡:
<a class="post-image">
	<img itemprop="image" src="/public/images/post_img/post21_1.PNG" />
	</a></p>

<p><strong> Builder </strong>: thu tháº­p cÃ¡c Bundles vÃ  Txs sau Ä‘Ã³ build 1 block. (trong block bao gá»“m feeRecipient (MEV offer) cho validator).</p>

<p><strong> Relay </strong>: thu nháº­n cÃ¡c blocks, chá»n block vá»›i MEV offer lá»›n nháº¥t:</p>

<ul>
  <li>Gá»­i block header (vÃ  MEV offer) cho block proposer.</li>
  <li>KhÃ´ng tiáº¿t lá»™ ná»™i dung bÃªn trong khá»‘i cho propser.</li>
</ul>

<p><strong> Proposer </strong>: chá»n offer tá»‘t nháº¥t vÃ  kÃ­ header vá»›i staking key cá»§a nÃ³. Sau Ä‘Ã³ Relay sáº½ tiáº¿t lá»™ ná»™i dung block. Sau Ä‘Ã³ proposer sáº½ gá»­i block lÃªn network.</p>

<p><strong> Cá»¥ thá»ƒ </strong></p>

<ul>
  <li>Searchers sáº½ pháº£i tháº¯ng 2 cuá»™c Ä‘áº¥u giÃ¡ Ä‘á»ƒ bundle cá»§a há» Ä‘Æ°á»£c Ä‘Æ°a vÃ o block (lÃ  builder auction vÃ  relay auction).</li>
  <li>Searchers pháº£i lÃ m viá»‡c vá»›i builder mÃ  há» tin tÆ°á»Ÿng vÃ  pháº£i tin tÆ°á»Ÿng relay lÃ m viá»‡c cÃ¹ng vá»›i builder Ä‘Ã³. Searchers khÃ´ng cáº§n pháº£i tin Proposer.</li>
  <li>Proposer khÃ´ng thá»ƒ bá» lá»¡ slot. Náº¿u relay khÃ´ng Ä‘Æ°a cho há» block há»£p lá»‡, proposer sáº½ tá»± táº¡o block tá»« mempool cá»§a nÃ³.</li>
  <li>Khi proposer kÃ­ header, nÃ³ khÃ´ng thá»ƒ kÃ­ khá»‘i khÃ¡c, náº¿u khÃ´ng sáº½ bá»‹ slash.</li>
</ul>

<p>Má»™t sá»‘ vÃ­ dá»¥ vá» relay lÃ  Flashbot, BloXroute.</p>

<h2 id="kháº£-nÄƒng-tÆ°Æ¡ng-tÃ¡c-giá»¯a-cÃ¡c-blockchain">Kháº£ nÄƒng tÆ°Æ¡ng tÃ¡c giá»¯a cÃ¡c blockchain</h2>

<p><strong> TÆ°Æ¡ng tÃ¡c </strong>: Cho phÃ©p user chuyá»ƒn tÃ i sáº£n qua cÃ¡c chain khÃ¡c nhau. <br />
<strong> Káº¿t há»£p </strong>: Cho phÃ©p 1 DApp tá»« 1 chuá»—i cÃ³ thá»ƒ  gá»i DApp tá»« chuá»—i khÃ¡c.</p>

<p>Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y, cáº§n sá»­ dá»¥ng cÃ¡c Bridges.</p>

<h3 id="vÃ­-dá»¥-chuyá»ƒn-btc-trong-ethereum">VÃ­ dá»¥: Chuyá»ƒn BTC trong Ethereum</h3>

<p>Sá»­ dá»¥ng wrapped coins.</p>

<p>Vá»›i wBTC</p>

<ul>
  <li>Alice lock 1 BTC trong custodianâ€™s BTC address</li>
  <li>Custodian trung gian sau khi tháº¥y Ä‘iá»u nÃ y, sáº½ gá»­i msg Ä‘áº¿n ERC20 (bridge contract), xÃ¡c nháº­n</li>
  <li>ERC20 sáº½ táº¡o wBTC cho Alice trong Ethereum</li>
  <li>Sau khi dÃ¹ng xong, Alice sáº½ burn wBTC.</li>
  <li>Custodian trung gian sau khi tháº¥y Ä‘iá»u nÃ y, sáº½ gá»­i msg Ä‘áº¿n custodian BTC.</li>
  <li>Custodian BTC sáº½ unlock 1 BTC cho Alice.</li>
</ul>

<p>Váº¥n Ä‘á» Ä‘Æ°a ra lÃ  liá»‡u cÃ¡c Custodian cÃ³ tin tÆ°á»Ÿng Ä‘Æ°á»£c khÃ´ng? <br />
Äá»ƒ giáº£i quyáº¿t, ta sáº½ sá»­ dá»¥ng tBTC nhÆ° sau:</p>

<ul>
  <li>Chá»n ngáº«u nhiÃªn 3 custodian vÃ  táº¡o P2PKH Bitcoin address cho Alice.</li>
  <li>KhoÃ¡ chá»¯ kÃ½ 3-3 lÃ  bÃ­ máº­t giá»¯a 3 ngÆ°á»i.</li>
  <li>Alice gá»­i BTC vÃ o Ä‘á»‹a chá»‰ P2PKH, nháº­n tBTC</li>
  <li>Custodians cáº§n khoÃ¡ 1.5x ETH stake cho BTC há» quáº£n lÃ½. Náº¿u BTC locked mÃ  bá»‹ máº¥t, Alice sáº½ láº¥y staked ETH.</li>
</ul>

<h3 id="2-loáº¡i-bridges">2 loáº¡i Bridges</h3>

<p><strong> Loáº¡i 1: </strong> lock-and-mint bridge</p>

<ul>
  <li>SRC â‡¾ DEST: user lock tiá»n á»Ÿ SRC, wrapped token sáº½ Ä‘Æ°á»£c mint á»Ÿ DEST.</li>
  <li>DEST â‡¾ SRC: fund khi Ä‘Æ°á»£c burned tá»« DEST, thÃ¬ SRC sáº½ release lock.</li>
</ul>

<p><strong> Loáº¡i 2: </strong> liquidity pool bridge</p>

<ul>
  <li>Cáº£ 2 phÃ­a Ä‘á»u cÃ³ Liquidity provider</li>
  <li>SRC -&gt; DEST: ngÆ°á»i dÃ¹ng gá»­i funds á»Ÿ SRC, sá»‘ tiá»n tÆ°Æ¡ng Ä‘Æ°Æ¡ng sáº½ Ä‘Æ°á»£c giáº£i phÃ³ng tá»« DEST.</li>
</ul>

<h3 id="bridging-smart-chain">Bridging smart chain</h3>

<ul>
  <li>BÆ°á»›c 1: Táº¡o má»™t há»‡ thá»‘ng message xuyÃªn chuá»—i an toÃ n</li>
  <li>BÆ°á»›c 2: XÃ¢y 1 bridge sá»­ dá»¥ng há»‡ thá»‘ng message</li>
</ul>

<p>Minh hoáº¡</p>

<p><a class="post-image">
	<img itemprop="image" src="/public/images/post_img/post21_2.PNG" />
	</a></p>

<p>CÃ³ 2 loáº¡i há»‡ thá»‘ng message: <br />
<strong> Externally verified </strong>: cÃ¡c bÃªn bÃªn ngoÃ i (Trustee) sáº½ xÃ¡c minh cÃ¡c message trÃªn chuá»—i S. <br />
RelayerT chuyá»ƒn msg cho ngÆ°á»i nháº­n khi cÃ¡c trustees Ä‘á»u kÃ­ âŸ¹ náº¿u DApp-Y tin trustees, thÃ¬ sáº½ biáº¿t Ä‘Æ°á»£c DApp-X gá»­i msg. <br />
Náº¿u trustee kÃ­ vÃ  post fake msg cho RelayerT thÃ¬ nhá»¯ng bÃªn offchain cÃ³ thá»ƒ gá»­i signature cá»§a trustee cho relayerS, khiáº¿n trustee bá»‹ slashed.</p>

<p><strong> Onchain verified </strong>: chuá»—i T verifies block header cá»§a chuá»—i S. <br />
Oracle gá»­i msg cho relayerT, cÃ¹ng vá»›i finalized block header cá»§a chuá»—i S. Oracle sáº½ khÃ´ng Ä‘Æ°á»£c gá»i lÃ  trustee vÃ¬ nÃ³ chá»‰ chuyá»ƒn cÃ¡c finalized block.<br />
RelayerT sáº½ cháº¡y client nháº¹ Ä‘á»ƒ xÃ¡c thá»±c xem chuá»—i S cÃ³ nháº­n msg mÃ  gá»­i Ä‘i hay khÃ´ng.</p>

<p>Tuy nhiÃªn, váº¥n Ä‘á» Ä‘áº·t ra lÃ  viá»‡c chuá»—i T verify state cá»§a chuá»—i S sáº½ tá»‘n gas. Äá»ƒ giáº£i quyáº¿t Ä‘iá»u nÃ y, cáº§n sá»­ dá»¥ng zkBridge: sá»­ dá»¥ng SNARK Ä‘á»ƒ giáº£m viá»‡c tÃ­nh toÃ¡n cho relayerT.</p>

<h2 id="táº¡m-káº¿t">Táº¡m káº¿t</h2>

<p>Vá»›i briding, trong tÆ°Æ¡ng lai sáº½ giÃºp viá»‡c di chuyá»ƒn cÃ¡c assets nhanh vÃ  ráº» qua cÃ¡c chain, khiáº¿n cÃ¡c project thanh khoáº£n sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n á»Ÿ trong táº¥t cáº£ cÃ¡c chain.</p>]]></content><author><name></name></author><category term="[&quot;cs251&quot;]" /><summary type="html"><![CDATA[Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u cÃ¡c báº¡n Ä‘áº¿n MEV vÃ  Bridging giá»¯a cÃ¡c blockchain khÃ¡c nhau.]]></summary></entry><entry><title type="html">Quyá»n riÃªng tÆ° trÃªn blockchain vÃ  Zk-SNARK</title><link href="http://localhost:4000/cs251/2023/08/20/zksnark.html" rel="alternate" type="text/html" title="Quyá»n riÃªng tÆ° trÃªn blockchain vÃ  Zk-SNARK" /><published>2023-08-20T00:00:00+07:00</published><updated>2023-08-20T00:00:00+07:00</updated><id>http://localhost:4000/cs251/2023/08/20/zksnark</id><content type="html" xml:base="http://localhost:4000/cs251/2023/08/20/zksnark.html"><![CDATA[<p>Trong há»‡ thá»‘ng tÃ i chÃ­nh, viá»‡c riÃªng tÆ° lÃ  Ä‘iá»u cáº§n thiáº¿t. Má»™t vÃ i vÃ­ dá»¥ nhÆ°: Má»™t nhÃ  sáº£n xuáº¥t khÃ´ng muá»‘n tiáº¿t lá»™ sá»‘ tiá»n há» tráº£ cho nhÃ  cung cáº¥p cá»§a mÃ¬nh cho cÃ¡c bá»™ pháº­n, NgÆ°á»i dÃ¹ng cuá»‘i cáº§n quyá»n riÃªng tÆ° Ä‘á»ƒ thuÃª, quyÃªn gÃ³p, mua hÃ ng,â€¦ Do Ä‘Ã³, blockchain khÃ´ng thá»ƒ phÃ¡t huy háº¿t tiá»m nÄƒng náº¿u khÃ´ng cÃ³ má»™t sá»‘ Tx riÃªng tÆ°.</p>

<h2 id="sá»±-riÃªng-tÆ°-trong-cÃ¡c-blockchain">Sá»± riÃªng tÆ° trong cÃ¡c blockchain</h2>

<ul>
  <li>Vá»›i Ethereum, má»i sá»‘ dÆ° Ä‘á»u cÃ´ng khai. Trong cÃ¡c DApps, code vÃ  state cÅ©ng cÃ´ng khai cho ngÆ°á»i dÃ¹ng. NgoÃ i ra, cÃ¡c Tx cÅ©ng ná»‘i Ä‘áº¿n cÃ¡c account.</li>
  <li>Vá»›i Bitcoin, dá»¯ liá»‡u Tx cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ káº¿t ná»‘i 1 Ä‘á»‹a chá»‰ tá»›i 1 Ä‘á»‹nh danh váº­t lÃ½.</li>
</ul>

<h2 id="tx-riÃªng-tÆ°-trÃªn-blockchain-cÃ´ng-khai">Tx riÃªng tÆ° trÃªn blockchain cÃ´ng khai</h2>

<p>ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng commitments vÃ  zero knowledge proof Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y.</p>

<p><strong> Committed data </strong>: cam káº¿t ngáº¯n (áº©n) á»Ÿ trÃªn chuá»—i.
<strong> Proof ğ… </strong>: succinct Zero knowledge (Zk) proof:</p>

<ul>
  <li>Committed Tx data nháº¥t quÃ¡n vá»›i tráº¡ng thÃ¡i commited hiá»‡n táº¡i.</li>
  <li>Committed update state thÃ¬ Ä‘Ãºng. Tá»« Ä‘Ã³, ai cÅ©ng cÃ³ thá»ƒ xÃ¡c thá»±c ğ….</li>
</ul>

<h3 id="review-commitment">Review: Commitment</h3>

<p>ÄÆ°á»£c sá»­ dá»¥ng vá»›i nhiá»u má»¥c Ä‘Ã­ch, vÃ­ dá»¥ Äáº¥u giÃ¡ kÃ­n. NgÆ°á»i tham gia cam káº¿t giÃ¡, sau khi háº¿t thá»i gian thÃ¬ má»i ngÆ°á»i sáº½ má»Ÿ cam káº¿t cá»§a há». <br />
<strong> CÃº phÃ¡p </strong> 2 thuáº­t toÃ¡n: <br /></p>

<ul>
  <li>commit(msg, r) -&gt; com.  Trong Ä‘Ã³, r lÃ  randombit, com lÃ  string ngáº¯n</li>
  <li>verify(msg, com, r) -&gt; reject / accept.</li>
</ul>

<h3 id="tÃ­nh-báº£o-máº­t">TÃ­nh báº£o máº­t</h3>

<p><strong> Binding </strong>: KhÃ´ng thá»ƒ táº¡o 2 valid openings cho com. <br />
Tá»©c lÃ : táº¡o ra com, (m1, r1), (m2, r2) mÃ :</p>

<ul>
  <li>verify(m1, com, r1) = accept. VÃ </li>
  <li>verify(m2, com, r2) = accept vá»›i m1 â‰  m2.</li>
</ul>

<p><strong> Hiding </strong>: Com khÃ´ng tiáº¿t lá»™ gÃ¬ vá» data Ä‘Ã£ committed. Tá»©c lÃ  com sáº½ Ä‘á»™c láº­p vá»›i m.</p>

<h2 id="zk-snark-lÃ -gÃ¬">zk-SNARK lÃ  gÃ¬?</h2>

<h3 id="cÃ¡c-khÃ¡i-niá»‡m">CÃ¡c khÃ¡i niá»‡m</h3>

<p>Äá»ƒ verify 1 Tx, Validator cáº§n pháº£i xem thÃ´ng tin trong Tx Ä‘Ã³ vÃ  kiá»ƒm tra xem cÃ³ thoáº£ mÃ£n khÃ´ng. NhÆ°ng náº¿u cÃ¡c Tx lÃ  private thÃ¬ Validator sáº½ kiá»ƒm tra nhÆ° tháº¿ nÃ o? LÃºc nÃ y, zk-SNARK Ä‘Æ°á»£c ra Ä‘á»i.</p>

<p><strong> SNARK </strong>: lÃ  1 proof ngáº¯n gá»n Ä‘á»ƒ chá»©ng minh 1 statement lÃ  Ä‘Ãºng. NgoÃ i ra, nÃ³ cáº§n nhanh Ä‘á»ƒ xÃ¡c thá»±c bá»Ÿi ngÆ°á»i xÃ¡c thá»±c. <br />
VÃ­ dá»¥: statement: â€œTÃ´i biáº¿t má»™t m mÃ  SHA256(m) = 0â€.
<strong> zk-SNARK </strong>: lÃ  SNARK khÃ´ng tiáº¿t lá»™ gÃ¬ vá» ná»™i dung. VÃ­ dá»¥ trong statement kia thÃ¬ zk-SNARK sáº½ khÃ´ng tiáº¿t lá»™ gÃ¬ vá» giÃ¡ trá»‹ cá»§a m.</p>

<p>á»¨ng dá»¥ng:</p>

<ul>
  <li>Private Tx</li>
  <li>zkBrigde: ná»‘i cÃ¡c chuá»—i khá»‘i</li>
  <li>tÃ­nh riÃªng tÆ° trong zk-Rollups</li>
</ul>

<h3 id="kÄ©-thuáº­t-zk-snark">KÄ© thuáº­t zk-SNARK</h3>

<h4 id="arithmetic-circuits-ac">Arithmetic Circuits (AC)</h4>

<p>Cho 1 trÆ°á»ng há»¯u háº¡n:  $ğ”½={0, â€¦, ğ‘âˆ’1}$ vá»›i p lÃ  sá»‘ nguyÃªn tá»‘ &gt; 2. <br />
Arithmetic Circuit: C: $ğ”½^ğ‘› â‡¾ ğ”½$. <br />
C láº¥y input lÃ  list gá»“m n pháº§n tá»­ thuá»™c F, output lÃ  1 pháº§n tá»­ thuá»™c F. <br />
|C| = sá»‘ gates trong máº¡ch C.</p>

<p><a class="post-image">
	<img itemprop="image" src="/public/images/post_img/post20_1.PNG" />
	</a></p>

<p><strong> VÃ­ dá»¥: </strong></p>

<ul>
  <li>C_hash(h, m) = 0 náº¿u SHA256(m) = h, $!= 0$ náº¿u ngÆ°á»£c láº¡i.</li>
  <li>C_sig(pk, msg, Ïƒ) = 0 náº¿u chá»¯ kÃ­ Ïƒ lÃ  há»£p lá»‡ trÃªn msg vá»›i pk.</li>
</ul>

<h4 id="argument-system">Argument System</h4>

<p>Cho má»™t AC: C(x, w) -&gt; F vá»›i:</p>

<ul>
  <li>x: lÃ  statement cÃ´ng khai</li>
  <li>w: secret witness.</li>
</ul>

<p>Prover P cáº§n thuyáº¿t phá»¥c cÃ¡c Verifier V ráº±ng tá»“n táº¡i w mÃ  C(x, w) = 0 nhÆ°ng khÃ´ng muá»‘n gá»­i w vÃ¬ lÃ½ do báº£o máº­t.</p>

<p>CÃ³ 2 loáº¡i argument systems: Interactive vs Non-interactives.</p>

<ul>
  <li>Interactive: P &lt;-&gt; V tÆ°Æ¡ng tÃ¡c vá»›i nhau nhiá»u láº§n Ä‘á»ƒ V Ä‘á»“ng Ã½. CÃ¡ch nÃ y chá»‰ Ã¡p dá»¥ng vá»›i há»‡ thá»‘ng cÃ³ Ã­t V.</li>
  <li>Non-interactive: P chá»‰ gá»­i duy nháº¥t 1 msg lÃ  proof cho V. CÃ¡ch nÃ y cÃ³ Ã­ch khi cÃ³ nhiá»u Verifier (VÃ­ dá»¥ nhiá»u Validator muá»‘n xÃ¡c thá»±c 1 Tx).</li>
</ul>

<h4 id="nark-non-interactive-argument-of-knowledge">NARK: Non-interactive Argument of Knowledge</h4>

<p>Vá»›i máº¡ch C(x, w) â‡¾  ğ”½. <br />
<strong> Preprocessing </strong>: S(C) â‡¾ public parameters(Sp, Sv).</p>

<p>Minh hoáº¡:</p>

<p><a class="post-image">
	<img itemprop="image" src="/public/images/post_img/post20_2.PNG" />
	</a></p>

<p>Má»™t preprocessing NARK lÃ  bá»™ 3 (S, P, V):</p>

<ul>
  <li>S(C) â‡¾ public parameters(Sp, Sv).</li>
  <li>P(Sp, x, w) â‡¾  proof  ğœ‹</li>
  <li>V(ğ‘£ğ‘, ğ’™, ğ…)  â‡¾  accept / reject</li>
</ul>

<p><strong> YÃªu cáº§u </strong></p>

<ul>
  <li>Complete: âˆ€ğ‘¥, ğ‘¤:  $ğ¶(ğ’™, ğ’˜) = 0 â‡’ Pr[ V(ğ‘£ğ‘, ğ‘¥, P(ğ‘ğ‘, ğ’™, ğ’˜)) = accept] = 1$.</li>
  <li>Argument of knowledge: V accepts â‡’ P biáº¿t ğ‘¤</li>
  <li>Zero knowledge: (ğ¶, ğ‘ğ‘,ğ‘£ğ‘ ,ğ’™, ğœ‹)  khÃ´ng tiáº¿t lá»™ gÃ¬ vá» ğ’˜</li>
</ul>

<p><strong> Succinct </strong>
Má»™t NARK gá»i lÃ  SNARK khi viá»‡c táº¡o ra vÃ  xÃ¡c minh proof vá»›i thá»i gian nhanh:</p>

<ul>
  <li>S(ğ¶)  â‡¾  public parameters  (Sğ‘, Sğ‘£)</li>
  <li>P(ğ‘ğ‘, ğ’™, ğ’˜)  $\rightarrow$  short proof  ğœ‹;   $\lVert ğœ‹ \rVert =ğ‘‚_ğœ†(ğ¥ğ¨ğ â¡(\lVertğ‘ª\rVert))$</li>
  <li>V(ğ‘£ğ‘, ğ’™, ğ…)    nhanh Ä‘á»ƒ tháº©m Ä‘á»‹nh:    $time(V) = ğ‘‚_ğœ† (\lVert ğ‘¥ \rVert, ğ¥ğ¨ğ â¡(\lVert ğ‘ª \rVert))$.</li>
</ul>

<p>Do Ä‘Ã³, vá»›i SNARK thÃ¬ viá»‡c Ä‘á»c toÃ n bá»™ máº¡ch C lÃ  khÃ´ng ká»‹p thá»i gian. VÃŒ váº­y cáº§n bÆ°á»›c preprocessing.</p>

<p><strong> TÃ³m láº¡i: </strong></p>

<ul>
  <li>SNARK: bá»™ (S, P, V) thoáº£ mÃ£n: Complete, Argument of knowledge, Succinct.</li>
  <li>zk-SNARK: SNARK cÃ³ zero knowledge.</li>
</ul>

<h4 id="cÃ¡c-loáº¡i-preprocessing">CÃ¡c loáº¡i Preprocessing</h4>

<ul>
  <li>trusted setup per circuit: S(C) sá»­ dá»¥ng data bÃ­ máº­t (VÃ­ dá»¥: randombit r).</li>
  <li>trusted but universal: Randombit r Ä‘á»™c láº­p khá»i C: <br />
  S = (S_init, S_index) vá»›i:
    <ul>
      <li>ğ‘†_ğ‘–ğ‘›ğ‘–ğ‘¡ (ğœ†;ğ‘Ÿ) â‡¾ U: 1 láº§n duy nháº¥t.</li>
      <li>ğ‘†_ğ‘–ğ‘›ğ‘‘ğ‘’ğ‘¥ (U,ğ¶) â‡¾ (Sğ‘, Sğ‘£): KhÃ´ng chá»©a secret data.</li>
    </ul>
  </li>
</ul>

<h4 id="argurment-of-knowledge">Argurment of knowledge</h4>

<p>P biáº¿t w náº¿u w cÃ³ thá»ƒ Ä‘Æ°á»£c extracted tá»« P. <br />
Bá»™ 3 (S, P, V) lÃ  Argurment of knowledge vá»›i máº¡ch C náº¿u:</p>

<ul>
  <li>A = (A0, A1) lÃ  adversary mÃ  cÃ³ thá»ƒ bá»‹ extracted thÃ´ng tin:
    <ul>
      <li>S(C) â‡¾ (Sp, Sv),  A0(Sp) â‡¾ (x, st)</li>
      <li>ğœ‹ â‡½ A1(ğ‘ğ‘, ğ‘¥, st):   Pr[V(vp, ğ‘¥, ğœ‹) = accept] &gt; 1/10^6 (khÃ´ng Ä‘Ã¡ng ká»ƒ )</li>
    </ul>
  </li>
  <li>CÃ³ extractor E (sá»­ dá»¥ng A1 lÃ  blackbox) vÃ  táº¡o ra Ä‘Æ°á»£c w báº±ng tÆ°Æ¡ng tÃ¡c vá»›i A1(Sp, x, st).</li>
</ul>

<h4 id="zero-knowledge">Zero knowledge</h4>

<p>Proof ğœ‹ khÃ´ng tiáº¿t lá»™ vá» ğ’˜ náº¿u Verifier tá»± táº¡o ğœ‹, hay Verifier khÃ´ng há»c Ä‘Æ°á»£c gÃ¬ tá»« proof ğœ‹. <br />
<strong> Tá»©c lÃ : </strong></p>

<ul>
  <li>Tá»“n táº¡i 1 hÃ m Sim() sao cho: (Sğ‘, Sğ‘£, ğœ‹) â‡½ Sim(ğ¶,ğ‘¥). Hay Sim() cÃ³ thá»ƒ táº¡o ra proof ğœ‹ mÃ  khÃ´ng cáº§n w.</li>
</ul>

<h2 id="lá»i-káº¿t">Lá»i káº¿t</h2>

<p>á» trÃªn lÃ  sÆ¡ lÆ°á»£c vá» tÃ­nh riÃªng tÆ° trong Blockchain vÃ  cÃ¡i nhÃ¬n tá»•ng quan vá» zk-SNARK.</p>]]></content><author><name></name></author><category term="[&quot;cs251&quot;]" /><summary type="html"><![CDATA[Trong há»‡ thá»‘ng tÃ i chÃ­nh, viá»‡c riÃªng tÆ° lÃ  Ä‘iá»u cáº§n thiáº¿t. Má»™t vÃ i vÃ­ dá»¥ nhÆ°: Má»™t nhÃ  sáº£n xuáº¥t khÃ´ng muá»‘n tiáº¿t lá»™ sá»‘ tiá»n há» tráº£ cho nhÃ  cung cáº¥p cá»§a mÃ¬nh cho cÃ¡c bá»™ pháº­n, NgÆ°á»i dÃ¹ng cuá»‘i cáº§n quyá»n riÃªng tÆ° Ä‘á»ƒ thuÃª, quyÃªn gÃ³p, mua hÃ ng,â€¦ Do Ä‘Ã³, blockchain khÃ´ng thá»ƒ phÃ¡t huy háº¿t tiá»m nÄƒng náº¿u khÃ´ng cÃ³ má»™t sá»‘ Tx riÃªng tÆ°.]]></summary></entry><entry><title type="html">Má»Ÿ rá»™ng Blockchain (Pháº§n 2)</title><link href="http://localhost:4000/cs251/2023/08/19/scaling-the-blockchain-p2.html" rel="alternate" type="text/html" title="Má»Ÿ rá»™ng Blockchain (Pháº§n 2)" /><published>2023-08-19T00:00:00+07:00</published><updated>2023-08-19T00:00:00+07:00</updated><id>http://localhost:4000/cs251/2023/08/19/scaling-the-blockchain-p2</id><content type="html" xml:base="http://localhost:4000/cs251/2023/08/19/scaling-the-blockchain-p2.html"><![CDATA[<p>Trong bÃ i viáº¿t hÃ´m nay, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»i ngÆ°á»i má»™t kÄ© thuáº­t giÃºp tÄƒng tá»‘c Ä‘á»™ cÃ¡c Tx trong máº¡ng blockchain. ÄÃ³ lÃ  Rollups.</p>

<h2 id="Ã½-tÆ°á»Ÿng">Ã tÆ°á»Ÿng</h2>

<p>Trong layer-1 cá»§a blockchain nhÆ° Ethereum chá»©a world state. Khi má»™t giao dá»‹ch Ä‘Æ°á»£c Ä‘Æ°a vÃ o, world state sáº½ bá»‹ thay Ä‘á»•i. Tá»« Ä‘Ã¢y, Ã½ tÆ°á»Ÿng cÆ¡ báº£n cá»§a Rollup lÃ  há»£p hÃ ng trÄƒm Tx láº¡i thÃ nh má»™t Tx duy nháº¥t, tá»« Ä‘Ã³ giÃºp tÄƒng tá»‘c Ä‘á»™ lÃªn khoáº£ng 100 láº§n.</p>

<p>Ta cÃ³ hÃ¬nh minh hoáº¡ nhÆ° sau:</p>

<p><a class="post-image">
	<img itemprop="image" src="/public/images/post_img/post19_1.PNG" />
</a></p>

<p>Tá»« Ä‘Ã¢y, ta gá»i Rollup state lÃ  L2, Ä‘á»ƒ phÃ¢n biá»‡t vá»›i L1 (layer-1 cá»§a blockchain). <br />
Rollup contract á»Ÿ L1 sáº½ giá»¯ cÃ¡c tÃ i sáº£n vÃ  Merkle state root cá»§a cÃ¡c Rollup account. Rollup state chá»‰ bao gá»“m sá»‘ dÆ° cá»§a cÃ¡c Rollup account.</p>

<h2 id="hiá»‡u-nÄƒng">Hiá»‡u nÄƒng</h2>

<p><strong> Chuyá»ƒn tiá»n trong 1 Rollup </strong></p>

<ul>
  <li>Chuyá»ƒn tiá»n trong 1 Rollup (L2 -&gt; L2) ráº¥t dá»… dÃ ng. CÃ¡c coordinators chá»‰ cáº§n cáº­p nháº­p láº¡i Merkle Root cá»§a Rollup Contract trÃªn L1 lÃ  xong.</li>
</ul>

<p><strong> Chuyá»ƒn tiá»n tá»« funds Ä‘áº¿n Rollup </strong></p>

<ul>
  <li>Chuyá»ƒn tiá»n tá»« funds Ä‘áº¿n Rollup (L1 -&gt; L2) thÃ¬ cháº­m vÃ  Ä‘áº¯t. LÃ½ do vÃ¬ cáº§n pháº£i update cÃ¡c state trong L1, sá»‘ dÆ° trong contract vÃ  cáº£ trong Rollup vÃ  cáº­p nháº­p láº¡i Root cá»§a contract Ä‘Ã³.</li>
</ul>

<p><strong> Chuyá»ƒn tiá»n ra khá»i Rollup </strong></p>

<ul>
  <li>Chuyá»ƒn tiá»n ra khá»i Rollup cáº§n phÃ­ gas thÃªm tá»« L1 trong quÃ¡ trÃ¬nh chuyá»ƒn vÃ¬ cáº§n post nhiá»u dá»¯ liá»‡u.</li>
</ul>

<p><strong> Chuyá»ƒn tiá»n tá»« 2 Rollup </strong></p>

<ul>
  <li>Náº¿u chuyá»ƒn tiá»n tá»« 2 Rollup (L2 -&gt; L2â€™) mÃ  qua L1 thÃ¬ sáº½ ráº¥t Ä‘áº¯t, nhÆ°ng náº¿u qua 1 cáº§u trá»±c tiáº¿p L2 &lt;=&gt; L2 thÃ¬ sáº½ ráº».</li>
</ul>

<h3 id="cháº¡y-contract-trong-rollup">Cháº¡y contract trong Rollup</h3>

<p>Khi contract cháº¡y trong Rollup (VÃ­ dá»¥ Uniswap), thÃ¬ viá»‡c tÆ°Æ¡ng tÃ¡c vá»›i contract Ä‘Ã³ sáº½ ráº©t ráº» cho ngÆ°á»i dÃ¹ng. <br />
<strong> Coordinator </strong> duy trÃ¬ tráº¡ng thÃ¡i cá»§a táº¥t cáº£ contracts trong há»‡ thá»‘ng Rollup:</p>

<ul>
  <li>NÃ³ cáº­p nháº­p Uniswap Merkle Leaf má»—i khi 1 Tx nÃ o Ä‘Ã³ Ä‘áº¿n Uniswap</li>
  <li>Ghi update cho Rollup state root trÃªn L1.</li>
</ul>

<p>Rollup cÃ³ chá»©c nÄƒng giá»‘ng Ethereum, nhÆ°ng khÃ´ng cÃ³ cÆ¡ cháº¿ Ä‘á»“ng thuáº­n vÃ¬ nÃ³ dá»±a vÃ o L1 Ä‘á»ƒ chá»©ng thá»±c tráº¡ng thÃ¡i hiá»‡n táº¡i.</p>

<h2 id="cÃ¡c-váº¥n-Ä‘á»">CÃ¡c váº¥n Ä‘á»</h2>

<p><strong> Váº¥n Ä‘á» 1 </strong>: Äiá»u gÃ¬ xáº£y ra náº¿u Coordinator khÃ´ng trung thá»±c. NÃ³ cÃ³ thá»ƒ láº¥y háº¿t tiá»n trong Rollup hoáº·c táº¡o cÃ¡c giao dá»‹ch giáº£.</p>

<p><strong> Váº¥n Ä‘á» 2 </strong>: Náº¿u Coordinator ngá»«ng cung cáº¥p dá»‹ch vá»¥ ? LÃ m sao Ä‘á»ƒ láº¥y láº¡i tráº¡ng thÃ¡i Rollup Ä‘á»ƒ Ä‘Æ°a cho Coordinator má»›i.</p>

<h2 id="cÃ¡c-phÆ°Æ¡ng-Ã¡n-giáº£i-quyáº¿t">CÃ¡c phÆ°Æ¡ng Ã¡n giáº£i quyáº¿t</h2>

<h3 id="váº¥n-Ä‘á»-1-coordinator-khÃ´ng-trung-thá»±c">Váº¥n Ä‘á» 1: Coordinator khÃ´ng trung thá»±c</h3>

<p>Coordinator khÃ´ng thá»ƒ láº¥y tiá»n tá»« Rollup users, vÃ¬ L1 sáº½ xÃ¡c minh update tráº¡ng thÃ¡i cá»§a Rollup báº±ng cÃ¡ch kiá»ƒm tra xem táº¥t cáº£ cÃ¡c Tx cÃ³ valid vÃ  Ä‘Æ°á»£c kÃ½ há»£p lá»‡ bá»Ÿi ngÆ°á»i dÃ¹ng hay khÃ´ng. <br />
Äá»ƒ lÃ m Ä‘iá»u nÃ y má»™t cÃ¡ch ráº», cÃ³ thá»ƒ cÃ³ cÃ¡c cÃ¡ch tiáº¿p cáº­n sau:</p>

<h4 id="validity-proofs-cÃ²n-gá»i-lÃ -zk-rollup">Validity Proofs (cÃ²n gá»i lÃ  zk-Rollup)</h4>

<p>Khi coordinator gá»­i updated root vÃ  Tx List cho L1, nÃ³ cáº§n gá»­i kÃ¨m theo má»™t SNARK proof cho valid Tx Ä‘á»ƒ chá»©ng minh táº­p hÃ ng trÄƒm cÃ¡c Tx nÃ y lÃ  há»£p lá»‡. <br />
<strong> SNARK proof </strong> lÃ  loáº¡i proof ngáº¯n vÃ  nhanh Ä‘á»ƒ xÃ¡c minh, tá»« Ä‘Ã³ giÃºp viá»‡c xÃ¡c minh trÃªn L1 trá»Ÿ nÃªn ráº». (vá»›i sá»± giÃºp Ä‘á»¡ cá»§a EVM)  <br />
Bao gá»“m:</p>

<ul>
  <li>Public statement:   (old state root,  new state root,  Tx list)</li>
  <li>Witness: (state trÆ°á»›c - sau cá»§a nhá»¯ng tÃ i khoáº£n bá»‹ thay Ä‘á»•i, báº±ng chá»©ng Merkle, chá»¯ kÃ­ cá»§a user)</li>
  <li>SNARK proof sáº½ chá»©ng minh ráº±ng:
    <ul>
      <li>Táº¥t cáº£ chá»¯ kÃ½ trÃªn Ä‘á»u valid</li>
      <li>Táº¥t cáº£ báº±ng chá»©ng Merkle Ä‘á»u valid</li>
      <li>Tráº¡ng thÃ¡i sau = tráº¡ng thÃ¡i trÆ°á»›c + Tx.</li>
    </ul>
  </li>
</ul>

<p><strong> zkEVM </strong>  <br />
Khi má»™t contract (Uniswap) cháº¡y trong Rollup:</p>

<ul>
  <li>Coordinator sáº½ táº¡o 1 SNARK proof vá» viá»‡c thá»±c hiá»‡n Ä‘Ãºng 1 chÆ°Æ¡ng trÃ¬nh EVM. ÄÃ³ gá»i lÃ  zkEVM.</li>
  <li>Táº¡o báº±ng chá»©ng thÃ¬ sáº½ yÃªu cáº§u ráº¥t cao vá» tÃ­nh toÃ¡n nhÆ°ng khi xÃ¡c minh thÃ¬ láº¡i ráº¥t nhanh.</li>
</ul>

<p>CÃ³ 2 chá»©c nÄƒng cá»§a zkEVM lÃ :</p>

<ul>
  <li>Chá»©ng minh EVM bytecode cháº¡y Ä‘Ãºng</li>
  <li>BiÃªn dá»‹ch Solidity to SNARK-friendly circuit.</li>
</ul>

<p><strong> Káº¿t quáº£ </strong></p>

<ul>
  <li>Rollup contract Ä‘áº£m báº£o coordinator khÃ´ng thá»ƒ gian láº­n vÃ  sáº½ cháº¥p nháº­n cÃ¡c update náº¿u cÃ³ proof phÃ¹ há»£p</li>
  <li>Ai cÅ©ng cÃ³ thá»ƒ lÃ m coordinator náº¿u cÃ³ Ä‘á»§ sá»©c máº¡nh tÃ­nh toÃ¡n</li>
</ul>

<h4 id="fraud-proof-cÃ²n-gá»i-lÃ -optimistic-rollup">Fraud proof (cÃ²n gá»i lÃ  Optimistic Rollup)</h4>

<ul>
  <li>Coordinator sáº½ stake 1 khoáº£n vÃ o L1 Rollup Contract</li>
  <li>Coordinator sáº½ Ä‘Æ°a updated root lÃªn L1 mÃ  khÃ´ng cáº§n báº±ng chá»©ng</li>
  <li>Náº¿u update khÃ´ng valid, trong vÃ²ng 7 ngÃ y ai cÅ©ng cÃ³ thá»ƒ chá»©ng minh Ä‘iá»u nÃ y báº±ng viá»‡c gá»­i fraud proof.</li>
  <li>Náº¿u fraud proof lÃ  Ä‘Ãºng, coordinator sáº½ bá»‹ Slash, ngÆ°á»£c láº¡i ngÆ°á»i gá»­i proof sáº½ tá»‘n phÃ­.</li>
</ul>

<p>Äá»ƒ chá»©ng minh Fraud Ä‘áº¿n Rollup contract trong L1, ta sáº½ sá»­ dá»¥ng Binary Search. <br />
Viá»‡c Coordinator vÃ  NgÆ°á»i gá»­i Proof (A) táº¡o ra state(n) vÃ  state(nâ€™) khÃ¡c nhau buá»™c L1 cáº§n kiá»ƒm tra xem ai má»›i lÃ  ngÆ°á»i Ä‘Ãºng. Do Ä‘Ã³, sá»­ dá»¥ng Merkle tree vÃ  tÃ¬m kiáº¿m nhá»‹ phÃ¢n, vá»›i viá»‡c chia Ä‘Ã´i tá»« state(n/2), state(n/4)â€¦ cÃ³ thá»ƒ dá»… dÃ ng tÃ¬m Ä‘Æ°á»£c xem state nÃ o bá»‹ sai sau Log2(n) round.</p>

<p>Tuy nhiÃªn, cÃ¡ch nÃ y gáº·p 1 sá»‘ khÃ³ khÄƒn nhÆ°:</p>

<ul>
  <li>Giao dá»‹ch chá»‰ giáº£i quyáº¿t sau 7 ngÃ y (Sau khi háº¿t háº¡n gian láº­n)</li>
  <li>Khi 1 báº±ng chá»©ng Fraud Ä‘Æ°á»£c cháº¥p nháº­n, cÃ¡c Tx sau pháº£i Ä‘Æ°á»£c gá»­i láº¡i</li>
</ul>

<p><strong> Káº¿t quáº£ </strong></p>

<ul>
  <li>CÃ³ thá»ƒ dá»… dÃ ng Ä‘Æ°a smartcontract vÃ o optimistic Rollup</li>
  <li>ThÃ´ng lÆ°á»£ng Tx cao: ~ 4000Tx / s</li>
  <li>Ai cÅ©ng cÃ³ thá»ƒ lÃ m coordinator vÃ  verifier</li>
  <li>Giáº£i quyáº¿t giao dá»‹ch cháº­m 7 ngÃ y.</li>
</ul>

<h3 id="váº¥n-Ä‘á»-2-coordinator-ngá»«ng-cung-cáº¥p-dá»‹ch-vá»¥">Váº¥n Ä‘á» 2: Coordinator ngá»«ng cung cáº¥p dá»‹ch vá»¥</h3>

<p>Cáº§n táº¡o Coordinator má»›i, nhÆ°ng láº¡i cáº§n tráº¡ng thÃ¡i má»›i nháº¥t cá»§a Rollup.</p>

<p>Ta tháº¥y, Rollup state cÃ³ thá»ƒ phá»¥c há»“i tá»« dá»¯ liá»‡u trong L1 báº±ng viá»‡c Ä‘á»c cÃ¡c msg vÃ  re-excecute Tx. NhÆ°ng viá»‡c nÃ y sáº½ ráº¥t Ä‘áº¯t vÃ¬ tÆ°Æ¡ng tÃ¡c nhiá»u trÃªn L1 vÃ  cáº§n nhiá»u dá»¯ liá»‡u.</p>

<p>Äá»ƒ giáº£m Tx fees:</p>

<ul>
  <li>LÆ°u L2 state root trong L1</li>
  <li>LÆ°u Tx data vá»›i Data Availability Committee (DAC):
    <ul>
      <li>Gá»“m táº­p há»£p cÃ¡c node tin cáº­y giá»¯ cho data available</li>
      <li>Ráº» hÆ¡n lÆ°u á»Ÿ L1</li>
      <li>L1 cháº¥p nháº­n update khi vÃ  chá»‰ khi táº¥t cáº£ cÃ¡c node trong DAC Ä‘á»u kÃ­. Tá»« Ä‘Ã³ giÃºp Ä‘áº£m báº£o cÃ¡c member trong DAC Ä‘á»u cháº¥p nháº­p dá»¯ liá»‡u Tx.</li>
    </ul>
  </li>
  <li>Táº¡o 1 coordinator má»›i phá»¥ thuá»™c vÃ o tÃ­nh kháº£ dá»¥ng cá»§a DAC</li>
</ul>

<h4 id="validium">Validium</h4>

<p>1 L2 sá»­ dá»¥ng DAC Ä‘á»ƒ lÆ°u trá»¯ vÃ  Validity proof (SNARKs):</p>

<ul>
  <li>PhÃ¹ há»£p cho tÃ i sáº£n giÃ¡ trá»‹ tháº¥p</li>
  <li>Chá»‰ cÃ¡c thÃ nh viÃªn DAC má»›i tháº¥y Ä‘Æ°á»£c dá»¯ liá»‡u</li>
</ul>

<h4 id="Ä‘iá»u-gÃ¬-xáº£y-ra-náº¿u-coordinator-tá»«-chá»‘i-1-tx">Äiá»u gÃ¬ xáº£y ra náº¿u Coordinator tá»« chá»‘i 1 Tx</h4>

<ul>
  <li>NgÆ°á»i táº¡o cÃ³ thá»ƒ post Tx trá»±c tiáº¿p lÃªn L1 Rollup contract.</li>
  <li>L1 Rollup contract chá»‰ cháº¥p nháº­n update khi mÃ  update cÃ³ cáº£ Tx trÃªn. Tá»« Ä‘Ã³ dáº«n Ä‘áº¿n toÃ n bá»™ Rollup bá»‹ Ä‘Ã³ng bÄƒng.</li>
</ul>

<h2 id="lá»i-káº¿t">Lá»i káº¿t</h2>

<p>á» trÃªn Ä‘Ã¢y lÃ  cÃ¡c cÃ¡ch Ä‘Æ°á»£c Ã¡p dá»¥ng Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ Tx trong blockchain.</p>]]></content><author><name></name></author><category term="[&quot;cs251&quot;]" /><summary type="html"><![CDATA[Trong bÃ i viáº¿t hÃ´m nay, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»i ngÆ°á»i má»™t kÄ© thuáº­t giÃºp tÄƒng tá»‘c Ä‘á»™ cÃ¡c Tx trong máº¡ng blockchain. ÄÃ³ lÃ  Rollups.]]></summary></entry><entry><title type="html">Má»Ÿ rá»™ng Blockchain (Pháº§n 1)</title><link href="http://localhost:4000/cs251/2023/08/18/scaling-the-blockchain-p1.html" rel="alternate" type="text/html" title="Má»Ÿ rá»™ng Blockchain (Pháº§n 1)" /><published>2023-08-18T00:00:00+07:00</published><updated>2023-08-18T00:00:00+07:00</updated><id>http://localhost:4000/cs251/2023/08/18/scaling-the-blockchain-p1</id><content type="html" xml:base="http://localhost:4000/cs251/2023/08/18/scaling-the-blockchain-p1.html"><![CDATA[<p>Vá»›i Bitcoin, tá»‘c Ä‘á»™ thá»±c hiá»‡n giao dá»‹ch chá»‰ cÃ³ khoáº£ng 7 Tx / sec, cÃ²n vá»›i Ethereum, con sá»‘ nÃ y lÃ  15. Trong khi Ä‘Ã³, vá»›i VISA lÃ  2000, Paypal lÃ  200. Váº­y Ä‘á»ƒ cÃ¡c loáº¡i Blockchain nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u trÃªn tháº¿ giá»›i, cáº§n pháº£i cÃ³ nhá»¯ng giáº£i phÃ¡p Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ¡c giao dá»‹ch. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»™t cÃ¡ch lÃ  sá»­ dá»¥ng Payment Channel, háº¡n cháº¿ tÆ°Æ¡ng tÃ¡c vá»›i chuá»—i cÃ ng Ã­t cÃ ng tá»‘t, giÃºp tÄƒng tá»‘c Ä‘á»™.</p>

<h2 id="payment-channel-Ã½-tÆ°á»Ÿng-cÆ¡-báº£n">Payment Channel: Ã tÆ°á»Ÿng cÆ¡ báº£n</h2>

<p>A vÃ  B Ä‘ang muá»‘n giao dá»‹ch vá»›i nhau. A gá»­i cho B 5 láº§n, má»—i láº§n lÃ  0.01 BTC, lÃ  5 Txs. Thay vÃ¬ lÃ m nhÆ° tháº¿, cÃ³ thá»ƒ lÃ m nhÆ° sau: A gá»­i cho B 1BTC. Sau 1 khoáº£ng thá»i gian (vÃ­ dá»¥ 1 thÃ¡ng), B sáº½ tráº£ láº¡i sá»‘ BTC dÆ° mÃ  chÆ°a dÃ¹ng. Váº­y sá»‘ giao dá»‹ch chá»‰ giá»›i háº¡n Ä‘áº¿n 2.</p>

<h2 id="unidirectional-payment-channel-kÃªnh-thanh-toÃ¡n-1-chiá»u">Unidirectional Payment Channel: KÃªnh thanh toÃ¡n 1 chiá»u</h2>

<p>Ta cÃ³: UTXO A: 1BTC.</p>

<ul>
  <li>Tx1: 0.99 cho A/ 0.01 cho B tá»« UTXO A.</li>
  <li>Tx2: 0.98 cho A/ 0.02 cho B</li>
  <li>â€¦.</li>
  <li>Tx5: 0.95 cho A/ 0.05 cho B</li>
</ul>

<p>Xong xuÃ´i, B post Tx5 lÃªn Blockchain. NhÆ°ng cÃ³ váº¥n Ä‘á» xáº£y ra lÃ  náº¿u A sá»­ dá»¥ng UTXO trÆ°á»›c khi B post lÃªn thÃ¬ Tx5 mÃ  B post lÃªn sáº½ khÃ´ng há»£p lá»‡. Do Ä‘Ã³, cáº§n sá»­ dá»¥ng 1 Ä‘á»‹a chá»‰ chung UTXO AB cÃ³ dáº¡ng Multisig 2-2. Äiá»u nÃ y sáº½ ngÄƒn cháº·n viá»‡c A dÃ¹ng UTXO vÃ¬ chÆ°a cÃ³ chá»¯ kÃ­ cá»§a B.</p>

<p>NhÆ°ng náº¿u B khÃ´ng post Tx5 lÃªn chuá»—i thÃ¬ sao? Liá»‡u A cÃ³ láº¥y láº¡i Ä‘Æ°á»£c 0.95 BTC. Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y, cáº§n sá»­ dá»¥ng má»™t time-locked Tx, Ä‘áº£m báº£o sau má»™t khoáº£ng thá»i gian, náº¿u B khÃ´ng post Tx5 lÃªn, thÃ¬ A sáº½ láº¥y láº¡i Ä‘Æ°á»£c 1BTC (B pháº£i gá»­i cho A). NgoÃ i ra, Tx nÃ y pháº£i Ä‘Æ°á»£c kÃ­ trÆ°á»›c khi Ä‘Æ°a BTC vÃ o trong AB.</p>

<p>Minh hoáº¡:</p>

<p><a class="post-image">
	<img itemprop="image" src="/public/images/post_img/post18_1.PNG" />
</a></p>

<p>Sau khi tráº£ hoáº·c láº¥y láº¡i tiá»n, kÃªnh sáº½ Ä‘Ã³ng.</p>

<h2 id="bidirectional-payment-channel-kÃªnh-thanh-toÃ¡n-Ä‘a-chiá»u">Bidirectional Payment Channel: KÃªnh thanh toÃ¡n Ä‘a chiá»u</h2>

<p>KhÃ´ng sá»­ dá»¥ng 2 kÃªnh thanh toÃ¡n 1 chiá»u thay tháº¿. Thay vÃ o Ä‘Ã³, ta sáº½ sá»­ dá»¥ng contract.</p>

<h3 id="trÃªn-ethereum">TrÃªn Ethereum</h3>

<p>A vÃ  B sáº½ táº¡o má»™t contract chung, má»—i ngÆ°á»i Ä‘Ã³ng gÃ³p 0.5 ETH. LÃºc nÃ y, tráº¡ng thÃ¡i cá»§a contract sáº½ lÃ : <br />
A: 0.5 ETH      B: 0.5 ETH      Nonce: 0. <br />
Off chain: B gá»­i 0.1 ETH cho A báº±ng cÃ¡ch cáº£ 2 kÃ½ vÃ o state má»›i: <br />
A: 0.6,  B: 0.4,  Nonce: 1, A sig,  B sig   <br />
á» trÃªn chuá»—i, contract váº«n khÃ´ng Ä‘á»•i. Giáº£ sá»­, offchain, A vÃ  B Ä‘Ã£ gá»­i Ä‘i gá»­i láº¡i nhiá»u giao dá»‹ch:<br />
A: 0.3,  B: 0.7,  Nonce: 7, A sig,  B sig <br /></p>

<p>LÃºc nÃ y, A muá»‘n káº¿t thÃºc kÃªnh, sáº½ gá»­i sá»‘ dÆ° cuá»‘i cÃ¹ng vÃ  cÃ¡c chá»¯ kÃ½ cho contract. LÃºc nÃ y sáº½ báº¯t Ä‘áº§u Challenge Period (vÃ­ dá»¥ 3 ngÃ y). <br />
Onchain: A: 0.3,    B: 0.7,     Nonce: 7. <br /></p>

<ul>
  <li>Náº¿u trong 3 ngÃ y, B khÃ´ng lÃ m gÃ¬ thÃ¬ sá»‘ tiá»n vÃ  tráº¡ng thÃ¡i cá»§a contract sáº½ theo nhá»¯ng gÃ¬ A gá»­i lÃªn.</li>
  <li>NgÆ°á»£c láº¡i, náº¿u B gá»­i lÃªn 1 state vá»›i sá»‘ Nonce lá»›n hÆ¡n (vÃ­ dá»¥ = 9), thÃ¬ contract sáº½ theo state cá»§a B.</li>
</ul>

<p>Váº¥n Ä‘á» Ä‘Æ°á»£c Ä‘Æ°a ra lÃ  viá»‡c A vÃ  B pháº£i quan sÃ¡t thÆ°á»ng xuyÃªn xem Ä‘á»‘i phÆ°Æ¡ng cÃ³ gá»­i state cÅ© lÃªn khÃ´ng Ä‘á»ƒ cÃ³ thá»ƒ ká»‹p thá»i ngÄƒn cháº·n. Äiá»u nÃ y Ä‘Æ°á»£c giáº£i quyáº¿t báº±ng sá»± trá»£ giÃºp cá»§a WatchTower.</p>

<p>TÃ³m láº¡i, viá»‡c giao dá»‹ch sáº½ chá»‰ tá»‘n 2 láº§n onchain:</p>

<ul>
  <li>Táº¡o channel</li>
  <li>ÄÃ³ng channel vÃ  gá»­i tiá»n.</li>
</ul>

<h3 id="trÃªn-bitcoin">TrÃªn Bitcoin</h3>

<p>VÃ¬ trÃªn UTXO khÃ´ng cÃ³ tráº¡ng thÃ¡i, nÃªn sáº½ khÃ³ khÄƒn hÆ¡n Ä‘á»ƒ táº¡o 1 kÃªnh thanh toÃ¡n 2 chiá»u. Giáº£i phÃ¡p Ä‘Æ°á»£c Ä‘Æ°a ra lÃ  khi update kÃªnh theo A, thÃ¬ A sáº½ nháº­n Ä‘Æ°á»£c Tx mÃ  lÃ m tráº¡ng thÃ¡i cÅ© cá»§a B máº¥t hiá»‡u lá»±c.</p>

<h4 id="utxo">UTXO</h4>

<p>Ta sáº½ táº¡o UTXO mÃ  cÃ³ thá»ƒ dÃ¹ng theo 1 trong 2 cÃ¡ch (sá»­ dá»¥ng IF trong Opcode):</p>

<ul>
  <li>Relative time-lock: UTXO chá»©a sá»‘ t. 1 Tx Ä‘Æ°á»£c kÃ­ há»£p lá»‡ cÃ³ thá»ƒ sá»­ dá»¥ng UTXO nÃ y sau t blocks (hoáº·c nhiá»u hÆ¡n) sau khi nÃ³ Ä‘Æ°á»£c táº¡o ra.</li>
  <li>Hash lock: UTXO chá»©a má»™t sá»‘ X. Má»™t Tx Ä‘Æ°á»£c kÃ­ há»£p lá»‡ cÃ³ thá»ƒ sá»­ dá»¥ng UTXO nÃ y náº¿u cÃ³ sá»‘ x mÃ : SHA256(x) = X.
(x Ä‘Æ°á»£c gá»i lÃ  hash preimage cá»§a X).</li>
</ul>

<h4 id="vÃ­-dá»¥">VÃ­ dá»¥</h4>

<p>Giáº£ sá»­ A vÃ  B Ä‘Æ°a BTC vÃ o trong 2-2 Multisig UTXO AB, vá»›i A lÃ  7BTC, B lÃ  3BTC. <br /></p>

<ul>
  <li>A táº¡o sá»‘ ngáº«u nhiÃªn x, vÃ  X = SHA256(x).</li>
  <li>B táº¡o sá»‘ ngáº«u nhiÃªn y, vÃ  Y = SHA256(y).</li>
  <li>Sau Ä‘Ã³, A Ä‘Æ°a X cho B vÃ  ngÆ°á»£c láº¡i.</li>
  <li>A táº¡o Tx1 vá»›i input lÃ  UTXO AB, output lÃ : <br />
  1: pay 7 -&gt; A,  <br />
  2: 3 -&gt; B (7 ngÃ y timelock) hoáº·c 3 -&gt; A (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ y mÃ  Y = SHA256(y)).</li>
  <li>B táº¡o Tx2 vá»›i input lÃ  UTXO AB, output lÃ : <br />
  1: pay 3 -&gt; B, <br />
  2: 7 -&gt; A (7 ngÃ y timelock) hoáº·c 7 -&gt; B (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ x mÃ  X = SHA256(x)).</li>
  <li>A cÃ³ thá»ƒ post Tx2, Ä‘á»£i 7 ngÃ y vÃ  láº¥y 7 BTC vá».</li>
  <li>Giá» náº¿u A gá»­i 1BTC cho B offchain. A táº¡o xâ€™ vÃ  Xâ€™ = SHA256(xâ€™). Sau Ä‘Ã³ Ä‘Æ°a Xâ€™ cho B.</li>
  <li>A táº¡o Tx3 vá»›i input lÃ  UTXO AB, output lÃ : <br />
  1: pay 6 -&gt; A,  <br />
  2: 4 -&gt; B (7 ngÃ y timelock) hoáº·c 4 -&gt; A (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ y mÃ  Y = SHA256(y)).</li>
  <li>B táº¡o Tx4 vá»›i input lÃ  UTXO AB, output lÃ : <br />
  1: pay 4 -&gt; B, <br />
  2: 6 -&gt; A (7 ngÃ y timelock) hoáº·c 6 -&gt; B (vá»›i Ä‘iá»u kiá»‡n Ä‘Æ°a ra sá»‘ xâ€™ mÃ  Xâ€™ = SHA256(xâ€™)).</li>
  <li>LÃºc nÃ y, A cÃ³ thá»ƒ post Tx3 vÃ  Ä‘á»£i 7 ngÃ y. NhÆ°ng náº¿u A post stale state lÃ  Tx2, B sáº½ sá»­ dá»¥ng x Ä‘á»ƒ láº¥y háº¿t BTC. Do Ä‘Ã³, A khÃ´ng thá»ƒ gian láº­n vÃ  post lÃªn tráº¡ng thÃ¡i cÅ©.</li>
</ul>

<h2 id="multihop-payments-thanh-toÃ¡n-nhiá»u-láº§n">Multihop payments: Thanh toÃ¡n nhiá»u láº§n</h2>

<p>A muá»‘n thanh toÃ¡n cho C qua trung gian khÃ´ng tin cáº­y lÃ  B (VÃ¬ A, C cÃ³ channel vá»›i B).</p>

<h3 id="the-lightning-network">The lightning network</h3>

<p>Nhiá»u open payment channel 2 chiá»u. Khi A muá»‘n táº¡o kÃªnh vá»›i B thÃ¬ chá»‰ cáº§n tÃ¬m tuyáº¿n Ä‘Æ°á»ng qua Ä‘á»“ thá»‹ vá»›i Ä‘á»‰nh lÃ  cÃ¡c trung gian.</p>

<h2 id="káº¿t-luáº­n">Káº¿t luáº­n</h2>

<p>ÄÃ¢y lÃ  cÃ¡ch tiáº¿p cáº­n Ä‘áº§u tiÃªn Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ¡c Tx trong blockchain. á» bÃ i viáº¿t sau, mÃ¬nh sáº½ giá»›i thiá»‡u má»™t kÄ© thuáº­t khÃ¡c giÃºp giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.</p>]]></content><author><name></name></author><category term="[&quot;cs251&quot;]" /><summary type="html"><![CDATA[Vá»›i Bitcoin, tá»‘c Ä‘á»™ thá»±c hiá»‡n giao dá»‹ch chá»‰ cÃ³ khoáº£ng 7 Tx / sec, cÃ²n vá»›i Ethereum, con sá»‘ nÃ y lÃ  15. Trong khi Ä‘Ã³, vá»›i VISA lÃ  2000, Paypal lÃ  200. Váº­y Ä‘á»ƒ cÃ¡c loáº¡i Blockchain nÃ y Ä‘Æ°á»£c sá»­ dá»¥ng nhiá»u trÃªn tháº¿ giá»›i, cáº§n pháº£i cÃ³ nhá»¯ng giáº£i phÃ¡p Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ¡c giao dá»‹ch. Trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u Ä‘áº¿n má»™t cÃ¡ch lÃ  sá»­ dá»¥ng Payment Channel, háº¡n cháº¿ tÆ°Æ¡ng tÃ¡c vá»›i chuá»—i cÃ ng Ã­t cÃ ng tá»‘t, giÃºp tÄƒng tá»‘c Ä‘á»™.]]></summary></entry><entry><title type="html">Há»‡ thá»‘ng vay DeFi</title><link href="http://localhost:4000/cs251/2023/08/17/defi-lending-system.html" rel="alternate" type="text/html" title="Há»‡ thá»‘ng vay DeFi" /><published>2023-08-17T00:00:00+07:00</published><updated>2023-08-17T00:00:00+07:00</updated><id>http://localhost:4000/cs251/2023/08/17/defi-lending-system</id><content type="html" xml:base="http://localhost:4000/cs251/2023/08/17/defi-lending-system.html"><![CDATA[<p>á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» há»‡ thá»‘ng vay trong mÃ´i trÆ°á»ng phi táº­p trung. NhÆ°ng trÆ°á»›c háº¿t, ta sáº½ Ä‘i tÃ¬m hiá»ƒu viá»‡c vay trong há»‡ thá»‘ng táº­p trung sáº½ nhÆ° tháº¿ nÃ o vÃ  chá»©a nhá»¯ng rá»§i ro gÃ¬.</p>

<h2 id="vay-trong-há»‡-thá»‘ng-táº­p-trung">Vay trong há»‡ thá»‘ng táº­p trung</h2>

<p>VÃ¬ sao cáº§n vay? CÃ³ cÃ¡c lÃ½ do chÃ­nh nhÆ° sau:</p>

<ul>
  <li>VÃ­ dá»¥, Bob cáº§n vay ETH Ä‘á»ƒ mua má»™t NFT trong game nhÆ°ng anh áº¥y khÃ´ng muá»‘n bÃ¡n tÃ i sáº£n cá»§a mÃ¬nh Ä‘i.</li>
  <li>LÃ  chiáº¿n lÆ°á»£c Ä‘áº§u tÆ°, khi tháº¿ cháº¥p ETH Ä‘á»ƒ nháº­n UNI, chá» tá»‰ giÃ¡ UNI/ETH giáº£m, thÃ¬ sá»‘ UNI bá» ra Ä‘á»ƒ mua 1ETH tráº£ khoáº£n vay sáº½ Ã­t hÆ¡n, tá»« Ä‘Ã³ nháº­n Ä‘Æ°á»£c UNI lÃ£i.</li>
</ul>

<p>Trong há»‡ thá»‘ng táº­p trung, ngÆ°á»i cho vay gá»­i tiá»n vÃ o má»™t Tá»• chá»©c tÃ i chÃ­nh táº­p trung. NgÆ°á»i vay sáº½ tháº¿ cháº¥p 1 loáº¡i tÃ i sáº£n nÃ o Ä‘Ã³ vÃ  sáº½ Ä‘Æ°á»£c vay. Sau Ä‘Ã³, ngÆ°á»i vay sáº½ pháº£i tráº£ tiá»n lÃ£i cho Ä‘áº¿n khi tráº£ xong pháº§n Ä‘Ã£ vay. NgÆ°á»i cho vay sáº½ Ä‘Æ°á»£c nháº­n 1 pháº§n lÃ£i Ä‘Ã³. <br /> Tuy nhiÃªn, náº¿u ngÆ°á»i vay khÃ´ng tráº£ Ä‘Æ°á»£c khoáº£n vay, Tá»• chá»©c tÃ i chÃ­nh táº­p trung sáº½ mua láº¡i tÃ i sáº£n tháº¿ cháº¥p, vÃ  tráº£ láº¡i cho ngÆ°á»i vay pháº§n cÃ²n thá»«a. <br /> Náº¿u giÃ¡ trá»‹ tÃ i sáº£n tháº¿ cháº¥p bá»‹ thay Ä‘á»•i vÃ  Ã­t hÆ¡n tÃ i sáº£n vay, viá»‡c thanh lÃ½ tÃ i sáº£n tháº¿ cháº¥p sáº½ xáº£y ra.</p>

<p>Tuy nhiÃªn, vá»›i há»‡ thá»‘ng táº­p trung, cÃ³ cÃ¡c váº¥n Ä‘á» Ä‘Æ°á»£c tháº¥y rÃµ nhÆ° sau:</p>
<ul>
  <li>User cáº§n tin tÆ°á»Ÿng Tá»• chá»©c, nhÆ°ng náº¿u bá»‹ hack hoáº·c bá»‹ xÃ¢m nháº­p trÃ¡i phÃ©p, kháº£ nÄƒng máº¥t tiá»n ráº¥t cao.</li>
  <li>Tá»• chá»©c Ä‘iá»u chá»‰nh tá»‰ lá»‡ lÃ£i,..</li>
  <li>NgÆ°á»i cho vay sáº½ nháº­n Ã­t tiá»n lÃ£i hÆ¡n, vÃ¬ pháº£i chia 1 pháº§n cho tá»• chá»©c.</li>
</ul>

<p>Do Ä‘Ã³, viá»‡c táº¡o ra há»‡ thá»‘ng vay phi táº­p trung khÃ´ng cáº§n bÃªn thá»© 3 vÃ  Ã¡p dá»¥ng tÃ­nh láº­p trÃ¬nh lÃ  má»¥c tiÃªu Ä‘Æ°á»£c ngÆ°á»i dÃ¹ng hÆ°á»›ng Ä‘áº¿n.</p>

<h2 id="cÃ¡c-thuáº­t-ngá»¯">CÃ¡c thuáº­t ngá»¯</h2>

<p><strong> Collateral </strong>: TÃ i sáº£n tháº¿ cháº¥p. Vai trÃ² lÃ  Ä‘áº·t cá»c Ä‘á»ƒ vay.</p>

<p><strong> Over-collateralization </strong>: Tháº¿ cháº¥p vÆ°á»£t má»©c. NgÆ°á»i vay pháº£i Ä‘áº£m báº£o giÃ¡ trá»‹ tháº¿ cháº¥p &gt; giÃ¡ trá»‹ vay.</p>

<p><strong> Under-collateralization </strong>: Tháº¿ cháº¥p dÆ°á»›i má»©c. Xáº£y ra khi giÃ¡ trá»‹ tháº¿ cháº¥p &lt; giÃ¡ trá»‹ vay.</p>

<p><strong> Collateral Factor </strong>: GiÃ¡ trá»‹ lá»›n nháº¥t cÃ³ thá»ƒ vay, tÃ­nh theo giÃ¡ trá»‹ tháº¿ cháº¥p. VÃ­ dá»¥ CF = 0.6, tháº¿ cháº¥p cÃ³ giÃ¡ trá»‹ lÃ  1000 DAI thÃ¬ giÃ¡ trá»‹ vay lá»›n nháº¥t cÃ³ thá»ƒ lÃ  0.6 * 1000 = 600 DAI.<br />
Vá»›i tÃ i sáº£n cÃ³ Ä‘á»™ biáº¿n Ä‘á»™ng cao, CF thÆ°á»ng tháº¥p, ngÆ°á»£c láº¡i thÃ¬ CF cao. VÃ­ dá»¥: ETH, DAI:  83%, UNI: 75%, MKR:  73%</p>

<p><strong> Thanh lÃ½ </strong> : Náº¿u sá»‘ tiá»n vay + lÃ£i (gá»i lÃ  ná»£ - Debt) &gt; CF * Collateral (1) <br />
=&gt; TÃ i sáº£n tháº¿ cháº¥p sáº½ Ä‘Æ°á»£c thanh lÃ½ Ä‘áº¿n khi (1) khÃ´ng cÃ²n xáº£y ra.  Tá»‰ lá»‡ thanh lÃ½ giÃºp ngÆ°á»i cho vay cÃ³ thá»i gian thanh lÃ½ trÆ°á»›c khi gáº·p rá»§i ro.</p>

<p><strong> Health </strong> : Health cá»§a 1 mÃ³n ná»£ Ä‘Æ°á»£c tÃ­nh báº±ng cÃ´ng thá»©c sau: <br /> <img src="https://latex.codecogs.com/svg.image?%20BorrowCapacity=%5Csum_%7Bi%7D%5E%7B%7Dvalue(collateral_%7Bi%7D)*CF_%7Bi%7D" alt="Alt text" /> <br />
<img src="https://latex.codecogs.com/svg.image?health=%5Cfrac%7BBorowCapacity%7D%7Btotal%20Debt%7D" alt="" /> <br /></p>

<p>Náº¿u health &lt; 1: Thanh lÃ½ sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t Ä‘áº¿n khi health &gt;= 1.</p>

<p><strong> Liquidity </strong>: Thanh khoáº£n. LÃ  loáº¡i tÃ i sáº£n mÃ  viá»‡c mua bÃ¡n trÃªn thá»‹ trÆ°á»ng khÃ´ng thay Ä‘á»•i giÃ¡ trá»‹ thá»‹ trÆ°á»ng cá»§a nÃ³. NÃ³ cÅ©ng cÃ³ kháº£ nÄƒng chuyá»ƒn thÃ nh tiá»n máº·t.</p>

<h2 id="defi-lending">DeFi Lending</h2>

<h3 id="Ã½-tÆ°á»Ÿng-vá»›i-orderbook-dapp">Ã tÆ°á»Ÿng vá»›i OrderBook Dapp</h3>

<p>LÆ°u trá»¯ cÃ¡c giao dá»‹ch trÃªn má»™t OrderBook. NgÆ°á»i vay táº¡o giao dá»‹ch vay vÃ  chá» ngÆ°á»i cho vay fill.
Báº¥t lá»£i:</p>
<ul>
  <li>Nhiá»u Txs, dáº«n Ä‘áº¿n tÃ­nh toÃ¡n phá»©c táº¡p</li>
  <li>Rá»§i ro: KhÃ´ng tráº£ Ä‘Æ°á»£c ná»£,..</li>
  <li>RÃºt tiá»n phá»©c táº¡p</li>
</ul>

<h3 id="liquidity-pool">Liquidity Pool</h3>

<p>Over-collateralized lending:  Compound and Aave
CÃ¡c LP (Liquidity Provider) cung cáº¥p tÃ i sáº£n vÃ o pool, vÃ  nháº­n nhá»¯ng token tÆ°Æ¡ng á»©ng vá»›i tÃ i sáº£n mÃ  há» Ä‘Ã£ cung cáº¥p. Sá»‘ lÆ°á»£ng cÃ¡c token dá»±a vÃ o Exchange Rate hiá»‡n táº¡i. Exchange Rate sáº½ Ä‘Æ°á»£c tÃ­nh láº¡i sau má»—i block.</p>

<p>Vá»›i ngÆ°á»i vay, há» gá»­i tÃ i sáº£n vÃ o Pool vÃ  nháº­n cTokens. Sau Ä‘Ã³ khi muá»‘n vay (ETH), thÃ¬ token cá»§a há» sáº½ bá»‹ khoÃ¡ nhÆ° lÃ  Collateral, sau Ä‘Ã³ Compound sáº½ gá»­i ETH cho há». <br />
Tiá»n lÃ£i tÃ­ch luá»¹ khi vay cá»§a ngÆ°á»i vay sáº½ lÃ m tÄƒng Exchange Rate ETH/token, tá»« Ä‘Ã³ giÃºp nhá»¯ng ngÆ°á»i cho vay (giá»¯ cÃ¡c token) Ä‘Æ°á»£c lá»£i Ã­ch khi token sáº½ tÄƒng giÃ¡.</p>

<h3 id="the-exchange-rate">The Exchange Rate</h3>

<p>Giáº£ sá»­ vá»›i thá»‹ trÆ°á»ng ETH:</p>
<ul>
  <li>Supplying ETH: thÃªm vÃ o UnderlyingBalance</li>
  <li>Borrowing ETH: thÃªm vÃ o totalBorrowBalance</li>
  <li>LÃ£i pháº£i tráº£: thÃªm láº§n lÆ°á»£t vÃ o totalBorrowBalance<br /></li>
</ul>

<p><img src="https://latex.codecogs.com/svg.image?ExchangeRate_%7BETH/token%7D=%5Cfrac%7BUnderlyingBalance&plus;totalBorrowBalance-reserve%7D%7BcTokenSupply%7D" alt="" /></p>

<p>Do Ä‘Ã³, náº¿u tá»•ng lÆ°á»£ng vay cÃ ng nhiá»u, thÃ¬ Exchange Rate sáº½ cÃ ng tÄƒng. NgÆ°á»£c láº¡i náº¿u lÆ°á»£ng UnderlyingBalance tÄƒng thÃ¬ lÆ°á»£ng cTokenSupply tÆ°Æ¡ng á»©ng cÅ©ng sáº½ tÄƒng, tá»« Ä‘Ã³ dáº«n Ä‘áº¿n ExchangeRate giáº£m.</p>

<h3 id="interest-rate-lÃ£i-xuáº¥t">Interest Rate: LÃ£i xuáº¥t</h3>

<p>LÃ£i xuáº¥t Ä‘Æ°á»£c cáº­p nháº­p má»™t cÃ¡ch liÃªn tá»¥c. XÃ¡c Ä‘á»‹nh bá»Ÿi nhu cáº§u vá» tÃ i sáº£n vá»›i quy mÃ´ thá»‹ trÆ°á»ng.<br />
Tá»‰ lá»‡ sá»­ dá»¥ng: <br />
<img src="https://latex.codecogs.com/svg.image?U_%7BETH%7D=%5Cfrac%7BtotalBorrowBalance%7D%7BavailableBalance&plus;totalBorrowBalance%7D" alt="" /> <br />
Tá»‰ lá»‡ nÃ y thuá»™c khoáº£ng [0,1]. <br />
Tá»‰ lá»‡ lÃ£i: interestRate = BaseRate + U(ETH) x slope(ETH).</p>

<h3 id="thanh-lÃ½">Thanh lÃ½</h3>

<p>Náº¿u health &lt; 1, thÃ¬ ai cÅ©ng cÃ³ thá»ƒ gá»i hÃ m: <br />
liquidate(borrower,   CollateralAsset,   BorrowAsset,  uint amount) <br />
Trong Ä‘Ã³:</p>
<ul>
  <li>borrower: address cá»§a ngÆ°á»i vay</li>
  <li>CollateralAsset: ngÆ°á»i thanh lÃ½ muá»‘n token tá»« tÃ i sáº£n nÃ y (VD: cDAI)</li>
  <li>BorrowAsset: ngÆ°á»i thanh lÃ½ cung cáº¥p tÃ i sáº£n nÃ y (vÃ­ dá»¥ ETH) <br /></li>
</ul>

<p>HÃ m nÃ y chuyá»ƒn ETH cá»§a ngÆ°á»i thanh lÃ½ ra thá»‹ trÆ°á»ng ETH vÃ  cung cáº¥p cho ngÆ°á»i thanh lÃ½ cDAI tá»« tÃ i sáº£n tháº¿ cháº¥p cá»§a ngÆ°á»i dÃ¹ng. Äiá»u nÃ y tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i ngÆ°á»i thanh lÃ½ Ä‘ang tráº£ khoáº£n ná»£ ETH cho ngÆ°á»i vay vÃ  nháº­n cDAI cá»§a ngÆ°á»i dÃ¹ng.</p>

<h2 id="flash-loan">Flash loan</h2>

<p>LÃ  khoáº£n vay nhanh Ä‘Æ°á»£c thá»±c hiá»‡n vÃ  hoÃ n tráº£ trong 1 giao dá»‹ch. <br />
=&gt; zero risk cho ngÆ°á»i gá»­i, vÃ  khÃ´ng cáº§n tháº¿ cháº¥p.</p>

<h3 id="cÃ¡c-trÆ°á»ng-há»£p-Ä‘Æ°á»£c-sá»­-dá»¥ng">CÃ¡c trÆ°á»ng há»£p Ä‘Æ°á»£c sá»­ dá»¥ng</h3>

<h4 id="chÃªnh-lá»‡ch-giÃ¡">ChÃªnh lá»‡ch giÃ¡</h4>

<p>NgÆ°á»i dÃ¹ng Alice tháº¥y chÃªnh lá»‡ch giÃ¡ USDC/DAI trong 2 pool, cÃ³ thá»ƒ dÃ¹ng flash loan Ä‘á»ƒ kiáº¿m lá»i. VÃ­ dá»¥ á»Ÿ pool A cÃ³ ExchangeRate lÃ : 1.00, trong khi á»Ÿ pool B lÃ  1.01 thÃ¬ Alice cÃ³ thá»ƒ flash loan 1 USDC, dÃ¹ng Ä‘á»ƒ Ä‘á»•i Ä‘Æ°á»£c 1.01 DAI tá»« pool B. Sau Ä‘Ã³ dÃ¹ng 1.00 DAI Ä‘á»•i láº¥y 1 USDC tá»« pool A, vÃ  tráº£ flash loan. Do Ä‘Ã³, Alice sáº½ lá»i Ä‘Æ°á»£c 0.01 DAI.</p>

<h4 id="hoÃ¡n-Ä‘á»•i-tÃ i-sáº£n-tháº¿-cháº¥p">HoÃ¡n Ä‘á»•i tÃ i sáº£n tháº¿ cháº¥p</h4>

<p>Nháº­n tháº¥y viá»‡c tháº¿ cháº¥p báº±ng ETH cÃ³ thá»ƒ bá»‹ sá»¥t giÃ¡ dáº«n Ä‘áº¿n thanh lÃ½, ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘á»•i tÃ i sáº£n tháº¿ cháº¥p thÃ nh USDC. QuÃ¡ trÃ¬nh nhÆ° sau:</p>
<ul>
  <li>Nháº­n 1000 DAI flash loan</li>
  <li>Tráº£ 1000 DAI Ä‘á»ƒ nháº­n 1 cETH</li>
  <li>Äá»•i 1 cETH láº¥y 3000 cUSDC</li>
  <li>Gá»­i 3000 cUSDC lÃ m tháº¿ cháº¥p Ä‘á»ƒ MÆ°á»£n 1000 DAI</li>
  <li>Tráº£ 1000 DAI flash loan</li>
</ul>

<h2 id="má»™t-sá»‘-thÃ´ng-tin-khÃ¡c">Má»™t sá»‘ thÃ´ng tin khÃ¡c</h2>

<h3 id="dao-decentralized-orgs">DAO: Decentralized orgs</h3>

<p>LÃ  1 DApp Ä‘Æ°á»£c triá»ƒn khai onchain táº¡i 1 Ä‘á»‹a chá»‰ cá»¥ thá»ƒ. <br />
Ai cÅ©ng cÃ³ thá»ƒ gá»­i tiá»n vÃ o kho báº¡c cá»§a DAO vÃ  gá»­i Ä‘á» xuáº¥t lÃªn DAO. Äá» xuáº¥t Ä‘Æ°á»£c thÃ´ng qua vÃ  Ä‘Æ°á»£c cÃ¡c thÃ nh viÃªn tham gia vote.
VÃ­ dá»¥:</p>
<ul>
  <li>PleaseDAO: Ä‘áº§u tÆ° vÃ o NFTs</li>
  <li>Gitcoin: TÃ i trá»£ cho cÃ¡c dá»± Ã¡n openSource.</li>
</ul>

<h3 id="giao-thá»©c-compound">Giao thá»©c Compound</h3>

<p>LÃ  giao thá»©c trÃªn Ethereum, thiáº¿t láº­p thá»‹ trÆ°á»ng tiá»n tá»‡, lÃ  nhá»¯ng nhÃ³m tÃ i sáº£n cÃ³ lÃ£i suáº¥t theo thuáº­t toÃ¡n, dá»±a vÃ  cung vÃ  cáº§u cá»§a tÃ i sáº£n Ä‘Ã³. CÃ¡c nhÃ  cung cáº¥p vÃ  ngÆ°á»i vay sáº½ tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i giao thá»©c, khÃ´ng cáº§n pháº£i thÆ°Æ¡ng lÆ°á»£ng cÃ¡c Ä‘iá»u khoáº£n nhÆ° kÃ¬ háº¡n, lÃ£i suáº¥t, hoáº·c tÃ i sáº£n tháº¿ cháº¥p,..</p>

<h3 id="supplying-assets">Supplying Assets</h3>

<p>Tá»•ng há»£p nguá»“n cung tá»« cÃ¡c user. Khi user cung cáº¥p assets, nÃ³ trá»Ÿ thÃ nh tÃ i nguyÃªn thay tháº¿ Ä‘Æ°á»£c, vÃ  mang láº¡i tÃ­nh thanh khoáº£n cÃ¡o hÆ¡n khi cho vay trá»±c tiáº¿p. Tá»« Ä‘Ã³ ngÆ°á»i cho vay cÃ³ thá»ƒ rÃºt tiá»n báº¥t cá»© lÃºc nÃ o.</p>

<h3 id="borrowing-assets">Borrowing Assets</h3>

<p>Cho phÃ©p ngÆ°á»i dÃ¹ng vay dá»… dÃ ng, sá»­ dá»¥ng cTokens lÃ m tháº¿ cháº¥p. NgÆ°á»i dÃ¹ng khÃ´ng cáº§n Ä‘iá»u khoáº£n Ä‘Ã m phÃ¡n, ngÃ y Ä‘Ã¡o háº¡n,..</p>

<p>Chi tiáº¿t vá» giao thá»©c Compound, cÃ¡c báº¡n cÃ³ thá»ƒ xem á»Ÿ <a href="https://compound.finance/documents/Compound.Whitepaper.pdf">Ä‘Ã¢y</a></p>

<h3 id="cross-chain-atomicswap">Cross-chain AtomicSwap</h3>

<h4 id="cÃ¡c-thuáº­t-ngá»¯-cÆ¡-báº£n">CÃ¡c thuáº­t ngá»¯ cÆ¡ báº£n</h4>

<p><strong> HTLC</strong>: hash time-locked contract <br /></p>

<p><strong> Time-lock </strong> KhoÃ¡ thá»i gian, khi Ä‘Ãºng khoÃ¡ thÃ¬ cáº§n 1 khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh Ä‘á»ƒ pass, tá»©c lÃ  háº¿t thá»i gian thÃ¬ má»›i má»Ÿ Ä‘Æ°á»£c. <br /></p>

<p><strong> Hash lock</strong> YÃªu cáº§u key Ä‘Ãºng + secret code. Sau khi nháº­p code thÃ¬ sáº½ hiá»ƒn thá»‹ lÃªn cho má»i ngÆ°á»i.</p>

<h4 id="ká»‹ch-báº£n">Ká»‹ch báº£n</h4>

<p>Alice muá»‘n Bitcoin, Bob muá»‘n BCash. A vÃ  B quyáº¿t Ä‘á»‹nh Ä‘á»•i cho nhau. CÃ¡c bÆ°á»›c nhÆ° sau:</p>
<ul>
  <li>Alice táº¡o 2 Hashlock, yÃªu cáº§u cÃ¹ng 1 SecretCode. NhÆ°ng key thÃ¬ 1 cÃ¡i lÃ  key cá»§a A, 1 cÃ¡i cáº§n key cá»§a B.</li>
  <li>Alice Ä‘áº·t HashlockA vÃ  HashlockB vÃ o láº§n lÆ°á»£t mailBoxA vÃ  mailBox B.</li>
  <li>Alice Ä‘Æ°a BCash vÃ o mailbox B, Bob Ä‘Æ°a Bitcoin vÃ o mailbox A.</li>
  <li>Sau Ä‘so, Alice Ä‘áº¿n mailboxA, nháº­p keyA vÃ  secretCode, nháº­n bitcoin. Äá»“ng thá»i, sau khi Alice nháº­p, secretCode hiá»ƒn thá»‹ cho má»i ngÆ°á»i nÃªn Bob sáº½ nháº­p theo + key vÃ o mailBoxB, nháº­n Ä‘Æ°á»£c BCash.</li>
</ul>

<p>TrÆ°á»ng há»£p A khÃ´ng nháº­p SecreteCode hoáº·c cá»‘ Ã½ chá»‰nh sai SecretCode á»Ÿ 2 lock, thÃ¬ time-lock sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng:</p>
<ul>
  <li>Äá»™ dÃ i cá»§a locktime cá»§a A pháº£i lá»›n hÆ¡n cá»§a B (1 tuáº§n &gt;&lt; 1 ngÃ y) vÃ¬ A biáº¿t secretCode. Do Ä‘Ã³, khi B biáº¿t A lá»«a dá»‘i, B cÃ³ thá»ƒ quay láº¡i mailBoxA vÃ  láº¥y tiá»n vá» ngay láº­p tá»©c (vÃ¬ lÃºc Ä‘Ã³ A váº«n Ä‘ang Ä‘á»£i háº¿t timelock Ä‘á»ƒ láº¥y Ä‘Æ°á»£c tiá»n). NgÆ°á»£c láº¡i náº¿u locktime cá»§a A nhá» hÆ¡n hoáº·c báº±ng B, thÃ¬ A cÃ³ thá»ƒ Ä‘á»£i Ä‘áº¿n khi háº¿t háº¡n, nháº­p code vÃ  láº¥y tiá»n (vÃ¬ A cÃ³ key cá»§a B lÃºc táº¡o lock).</li>
</ul>

<h2 id="káº¿t-luáº­n">Káº¿t luáº­n</h2>

<p>á» trÃªn lÃ  toÃ n bá»™ hiá»ƒu biáº¿t cá»§a mÃ¬nh vá» há»‡ thá»‘ng vay phi táº­p trung.</p>]]></content><author><name></name></author><category term="[&quot;cs251&quot;]" /><summary type="html"><![CDATA[á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» há»‡ thá»‘ng vay trong mÃ´i trÆ°á»ng phi táº­p trung. NhÆ°ng trÆ°á»›c háº¿t, ta sáº½ Ä‘i tÃ¬m hiá»ƒu viá»‡c vay trong há»‡ thá»‘ng táº­p trung sáº½ nhÆ° tháº¿ nÃ o vÃ  chá»©a nhá»¯ng rá»§i ro gÃ¬.]]></summary></entry><entry><title type="html">SÃ n giao dá»‹ch phi táº­p trung</title><link href="http://localhost:4000/cs251/2023/08/15/dex.html" rel="alternate" type="text/html" title="SÃ n giao dá»‹ch phi táº­p trung" /><published>2023-08-15T00:00:00+07:00</published><updated>2023-08-15T00:00:00+07:00</updated><id>http://localhost:4000/cs251/2023/08/15/dex</id><content type="html" xml:base="http://localhost:4000/cs251/2023/08/15/dex.html"><![CDATA[<h2 id="khÃ¡i-niá»‡m">KhÃ¡i niá»‡m</h2>

<p><strong> SÃ n giao dá»‹ch phi táº­p trung </strong> lÃ  loáº¡i á»©ng dá»¥ng phi táº­p trung, xÃ¢y dá»±ng vá»›i Smartcontract, cho phÃ©p users trao Ä‘á»•i ERC20 token hoáº·c NFT trá»±c tiáº¿p vá»›i cÃ¡c users khÃ¡c.</p>

<h3 id="lá»£i-Ã­ch">Lá»£i Ã­ch</h3>

<ul>
  <li>KhÃ´ng giá»¯ tiá»n: KhÃ´ng cÃ³ bÃªn thá»© 3 giá»¯ tiá»n trung gian cÃ¡c giao dá»‹ch</li>
  <li>Chá»‘ng kiá»ƒm duyá»‡t: Ai gá»­i Tx Ä‘á»u cÃ³ thá»ƒ sá»­ dá»¥ng</li>
  <li>Permissionless: cÃ³ thá»ƒ há»— trá»£ báº¥t kÃ¬ asset nÃ o.</li>
  <li>Thuáº­n tiá»‡n: KhÃ´ng pháº£i gá»­i tÃ i sáº£n trÃªn chuá»—i vÃ o má»™t sÃ n giao dá»‹ch</li>
  <li>TÃ­nh láº­p trÃ¬nh: Thanh khoáº£n cÃ³ thá»ƒ xem bá»Ÿi cÃ¡c smartcontract</li>
  <li>TÃ­nh nguyÃªn tá»­:</li>
</ul>

<p><strong> Orderbook </strong> lÃ  sá»• lá»‡nh, bao gá»“m cÃ¡c lá»‡nh báº¡n vÃ  mua tÃ i sáº£n theo tá»«ng má»©c giÃ¡ nháº¥t Ä‘á»‹nh. CÆ¡ cháº¿ khá»›p lá»‡nh nÃ y khiáº¿n lá»‡nh cá»§a ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c thá»±c thi khi giÃ¡ cá»§a sá»• lá»‡nh khá»›p vá»›i giÃ¡ ngÆ°á»i dÃ¹ng mua hoáº·c bÃ¡n.</p>

<h2 id="cÃ¡c-loáº¡i-dex">CÃ¡c loáº¡i DEX</h2>

<h3 id="on-chain-orderbook">On-chain orderbook</h3>

<p>Market makers Ä‘áº·t cÃ¡c order lÃªn chuá»—i, ngÆ°á»i dÃ¹ng sáº½ Ä‘iá»n cÃ¡c order nÃ y trá»±c tiáº¿p trÃªn chuá»—i náº¿u há» muá»‘n giao dá»‹ch. Tuy nhiÃªn, cÃ¡ch nÃ y sáº½ gÃ¢y tá»‘n gas ráº¥t nhiá»u.</p>

<h3 id="off-chain-orderbook">Off-chain orderbook</h3>

<p>Market makers kÃ­ cÃ¡c orders ngoÃ i chuá»—i. NgÆ°á»i dÃ¹ng sáº½ Ä‘iá»n cÃ¡c order nÃ y rá»“i submit nÃ³ lÃªn chuá»—i. CÃ¡ch nÃ y sáº½ khÃ´ng táº­n dá»¥ng kháº£ nÄƒng láº­p trÃ¬nh vÃ  thanh khoáº£n sáº½ khÃ´ng hiá»ƒn thá»‹ vá»›i smartcontract.</p>

<h3 id="dutch-auctions">Dutch auctions</h3>

<p>User Ä‘áº·t cÃ¡c order lÃªn chuá»—i, giÃ¡ sáº½ tá»« tá»« Ä‘iá»u chá»‰nh Ä‘á»ƒ thu hÃºt. Market maker sáº½ Ä‘iá»n order Ä‘Ã³ khi há» thÃ­ch má»©c giÃ¡ Ä‘Ã³. Váº¥n Ä‘á» cá»§a cÃ¡ch nÃ y lÃ  Ä‘iá»u chá»‰nh giÃ¡ cháº­m</p>

<h3 id="automated-market-maker">Automated market maker</h3>

<p>Market markers sáº½ Ä‘Æ°a cÃ¡c tÃ i sáº£n vÃ o trong 1 pool. NgÆ°á»i dÃ¹ng sáº½ trade vá»›i pool Ä‘Ã³ má»›i má»©c giÃ¡ Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh bá»Ÿi thuáº­t toÃ¡n.<br />
Lá»£i Ã­ch:</p>
<ul>
  <li>Tiáº¿t kiá»‡m gas</li>
  <li>Dá»… sá»­ dá»¥ng, â€¦</li>
</ul>

<h2 id="cÃ¡ch-automated-market-maker-amm-hoáº¡t-Ä‘á»™ng">CÃ¡ch Automated market maker (AMM) hoáº¡t Ä‘á»™ng</h2>

<p>Giáº£ sá»­ 1 AMM cÃ³ 2 loáº¡i tÃ i sáº£n, 1 lÃ  X (risky, vÃ­ dá»¥: ETH), 2 lÃ  Y (stable, vÃ­ dá»¥ DAI). AMM lÆ°u trá»¯ x Ä‘á»“ng X vÃ  y Ä‘á»“ng Y. AMM Ä‘á» nghá»‹ mua hoáº·c bÃ¡n tÃ i sáº£n X á»Ÿ má»™t giÃ¡ trá»‹ p nÃ o Ä‘Ã³.<br /></p>

<p>Giáº£ sá»­, ta muá»‘n duy trÃ¬ tÃ i sáº£n X vÃ  Y trong pool vá»›i tá»‰ lá»‡ $a/b$. Giáº£ sá»­ lÃ  $50/50$
VÃ¬ p lÃ  giÃ¡ trá»‹ cá»§a X nÃªn ta tháº¥y: <br />
\(p.x = y \iff p = y / x.\)</p>

<p>Khi Ä‘Ã³, náº¿u ai Ä‘Ã³ bÃ¡n lÆ°á»£ng ETH (X) Ä‘á»ƒ láº¥y DAI (Y) thÃ¬ x sáº½ tÄƒng vÃ  y giáº£m xuá»‘ng. DÃ³ Ä‘Ã³ giÃ¡ trá»‹ p sáº½ giáº£m Ä‘i.
Äiá»u nÃ y tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i x, y tá»‰ lá»‡ nghá»‹ch vá»›i nhau. <br />
Gá»i $x * y = k$ thÃ¬ k Ä‘Æ°á»£c gá»i lÃ  háº±ng sá»‘ dá»± trá»¯.</p>

<p>VÃ­ dá»¥: Náº¿u pool cÃ³ 10 ETH, 1000 DAI. GiÃ¡ cá»§a 1 ETH = 100 DAI. <br />
Háº±ng sá»‘ dá»± trá»¯: $k = x * y = 10 * 1000 = 10000$.</p>

<p>1) Giáº£ sá»­ user muá»‘n Ä‘á»•i DAI láº¥y ETH. Muá»‘n Ä‘á»•i 500 DAI + 0.3% phÃ­ Ä‘á»ƒ Ä‘á»•i láº¥y ETH.  <br />
LÃºc nÃ y: yâ€™ = 500 + 1500 = 1500. <br />
=&gt; xâ€™ = 10000 / 1500 = 6.66 ETH. <br />
LÃºc Ä‘Ã³, user nÃ y sáº½ nháº­n: 10 - 6.66 = 3.33 ETH $\rightarrow$ GiÃ¡ p cá»§a 1 ETH = 150 DAI (TÄƒng giÃ¡).</p>

<p>1) Giáº£ sá»­ user muá»‘n Ä‘á»•i ETH láº¥y DAI. Äá»”i 6ETH + 0.3% láº¥y DAI. <br />
LÃºc nÃ y: xâ€™ = 10 + 6 = 16 <br />
=&gt; yâ€™ - 10000/ 16 = 625. User nháº­n 1000 - 625 = 375 DAI. <br />
GiÃ¡ p 1ETH = 62.5 DAI, giáº£m 37.5 so vá»›i ban Ä‘áº§u.</p>

<h3 id="liquidity-provider">Liquidity Provider</h3>

<p>LÃ  nhá»¯ng ngÆ°á»i cung cáº¥p thanh khoáº£n cho pool, nháº­n láº¡i Ä‘Æ°á»£c cÃ¡c Liquidity Token, tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i thanh khoáº£n mÃ  há» cung cáº¥p. Khi ngÆ°á»i dÃ¹ng Ä‘á»•i cÃ¡c tÃ i sáº£n trong pool, pháº§n trÄƒm phÃ­ sáº½ Ä‘Æ°á»£c tráº£ cho cÃ¡c LP nÃ y dá»±a vÃ o sá»‘ thanh khoáº£n mÃ  há» cung cáº¥p.</p>

<p>Äá»™ thanh khoáº£n cá»§a pool Ä‘Æ°á»£c tÃ­nh báº±ng cÃ´ng thá»©c:  L = sqrt(k) = sqrt(x * y).</p>

<h3 id="nhá»¯ng-Ä‘iá»ƒm-cáº§n-phÃ¡t-triá»ƒn-cá»§a-amm">Nhá»¯ng Ä‘iá»ƒm cáº§n phÃ¡t triá»ƒn cá»§a AMM</h3>
<ul>
  <li>PhÃ­ gas</li>
  <li>TrÆ°á»£t giÃ¡: Biáº¿n Ä‘á»™ng giÃ¡ bá»Ÿi cÃ¡c giao dá»‹ch tá»« ngÆ°á»i dÃ¹ng</li>
  <li>ChÃªnh lá»‡ch giÃ¡</li>
  <li>Hiá»‡u quáº£ sá»­ dá»¥ng vá»‘n</li>
</ul>

<h2 id="concentrated-liquidity">Concentrated Liquidity</h2>

<p>Äá»ƒ tÄƒng hiá»‡u quáº£ sá»­ dá»¥ng vá»‘n, cÃ¡c LP cÃ³ thá»ƒ gá»­i thanh khoáº£n á»Ÿ má»©c giÃ¡ trong khoáº£ng cá»¥ thá»ƒ. VÃ­ dá»¥ nhÆ° á»Ÿ hÃ¬nh áº£nh trÃªn, lÃ  chuyá»ƒn Ä‘Æ°á»ng cong xy = k xuá»‘ng dÆ°á»›i vÃ  sang trÃ¡i. <br />
LÃ­ do lÃ  vÃ¬ giÃ¡ trá»‹ p cá»§a thanh khoáº£n sáº½ chá»‰ á»Ÿ trong 1 khoáº£ng nháº¥t Ä‘á»‹nh (VÃ­ dá»¥ DAI chá»‰ á»Ÿ trong khoáº£ng tá»« (0.95 ~ 1.05) USD). Do Ä‘Ã³, khi PL cung cáº¥p thanh khoáº£n á»Ÿ khoáº£ng tá»« (0, âˆ) thÃ¬ hiá»‡u quáº£ sá»­ dá»¥ng vá»‘n cá»§a há» sáº½ khÃ´ng Ä‘Æ°á»£c cao. Do Ä‘Ã³, á»Ÿ má»—i sá»‘ sÃ n giao dá»‹ch, viá»‡c thanh khoáº£n táº­p trung trÃ´ng 1 khoáº£ng há»¯u háº¡n lÃ  1 vá»‹ trÃ­. Vá»‹ trÃ­ nÃ y cáº§n duy trÃ¬ Ä‘á»§ dá»¯ trá»¯ Ä‘á»ƒ há»— trá»£ giao dá»‹ch trong pháº¡m vi cá»§a nÃ³. Tá»« Ä‘Ã³ khiáº¿n nÃ³ hoáº¡t Ä‘á»™ng nhÆ° má»™t constant product pool vá»›i dá»± trá»¯ lá»›n hÆ¡n trong khoáº£ng Ä‘Ã³. Tá»« Ä‘Ã³ viá»‡c sá»­ dá»¥ng vá»‘n sáº½ cÃ³ hiá»‡u quáº£ hÆ¡n.</p>

<h2 id="káº¿t-luáº­n">Káº¿t luáº­n</h2>

<p>Vá» cÃ¡ch cÃ¡c loáº¡i sÃ n hoáº¡t Ä‘á»™ng, má»i ngÆ°á»i cÃ³ thá»ƒ xem á»Ÿ cÃ¡c whitePaper, vÃ­ dá»¥ vá»›i <a href="https://uniswap.org/whitepaper.pdf">Uniswap</a> .</p>]]></content><author><name></name></author><category term="[&quot;cs251&quot;]" /><summary type="html"><![CDATA[KhÃ¡i niá»‡m]]></summary></entry><entry><title type="html">Solidity vÃ  State Trie</title><link href="http://localhost:4000/cs251/2023/07/24/solidity-va-state-trie.html" rel="alternate" type="text/html" title="Solidity vÃ  State Trie" /><published>2023-07-24T00:00:00+07:00</published><updated>2023-07-24T00:00:00+07:00</updated><id>http://localhost:4000/cs251/2023/07/24/solidity-va-state-trie</id><content type="html" xml:base="http://localhost:4000/cs251/2023/07/24/solidity-va-state-trie.html"><![CDATA[<p>á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» Solidity vÃ  World State Trie</p>

<h2 id="solidity">Solidity</h2>

<p>Solidity lÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh cho Blockchain Ethereum, lÃ  ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, cáº¥p cao Ä‘á»ƒ triá»ƒn khai cÃ¡c smartcontracts. Smartcontract lÃ  chÆ°Æ¡ng trÃ¬nh chi phá»‘i cÃ¡c hÃ nh vi cá»§a Account trong Ethereum State. Account contract Ä‘Æ°á»£c táº¡o ra khi cháº¡y má»™t smartcontract. Má»i ngÆ°á»i cÃ³ thá»ƒ Ä‘á»c account contract state á»Ÿ trong storage array, nÃªn khÃ´ng bao giá» Ä‘Æ°á»£c lÆ°u trá»¯ cÃ¡c bÃ­ máº­t trong contract.</p>

<p>Má»™t sá»‘ dáº¡ng biáº¿n cá»§a Solidity nhÆ°: uint256, address(byte 32), bool,â€¦ CÃ¡c loáº¡i tham chiáº¿u lÃ  máº£ng, struct, string, map,â€¦ Khi má»™t giao dá»‹ch Ä‘i tá»« A â‡¾ B â‡¾ C â‡¾ D thÃ¬ táº¡i D, msg.sender lÃ  C, nhÆ°ng tx.origin lÃ  A.</p>

<p>ERC20 lÃ  API tiÃªu chuáº©n cho fungible token, cung cáº¥p cÃ¡c chá»©c nÄƒng cÆ¡ báº£n Ä‘á»ƒ chuyá»ƒn token hoáº·c cho phÃ©p token Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi bÃªn thá»© 3.</p>

<p>CÃ¡c kiá»ƒu lÆ°u trá»¯:</p>

<ul>
  <li>Stack variables: Ráº» Ä‘á»ƒ sá»­ dá»¥ng, phÃ¹ há»£p vá»›i má»i loáº¡i dá»¯ liá»‡u (khÃ´ng qua 32 bytes)</li>
  <li>Calldata: LÃ  1 máº£ng byte chá»‰ Ä‘á»c, tá»‘n gas</li>
  <li>Memory: 1 byte máº£ng, ráº», nhÆ°ng chi phÃ­ tÄƒng theo cáº¥p sá»‘ nhÃ¢n, lÆ°u Ä‘Æ°á»£c dá»¯ liá»‡u &gt; 32 bytes</li>
  <li>Storage: Äáº¯t, mappings vÃ  cÃ¡c biáº¿n state lÆ°u trong nÃ y.</li>
  <li>Event logs: ráº», khÃ´ng cáº§n truy cáº­p Ä‘áº¿n contract.</li>
</ul>

<p>á» trÃªn lÃ  má»™t sá»‘ hiá»ƒu biáº¿t cá»§a mÃ¬nh vá» solidity, vá» máº·t coding, má»i ngÆ°á»i nÃªn xem á»Ÿ <a href="https://docs.soliditylang.org/en/latest/">Ä‘Ã¢y</a>.</p>

<h2 id="state-trie-ethereum-state-trie">State trie (Ethereum state trie)</h2>

<p>HÃ¬nh áº£nh Ä‘Ã¢y lÃ  cáº¥u trÃºc Ä‘Æ°á»£c táº¡o bá»Ÿi cÃ¡c loáº¡i State trong Ethereum: (á»Ÿ gÃ³c pháº£i dÆ°á»›i hÃ¬nh áº£nh)</p>

<p><img src="https://i.stack.imgur.com/afWDt.jpg" width="900" height=" 600" /></p>

<p>CÃ³ 3 loáº¡i state chÃ­nh lÃ  World state, Transaction, vÃ  Transaction Receipt.</p>

<h3 id="world-state-trie">World State Trie</h3>

<p>World State Trie LÃ  mapping giá»¯a Ä‘á»‹a chá»‰ vÃ  Account State. NÃ³ Ä‘Æ°á»£c update bá»Ÿi cÃ¡c Tx, vÃ  lÆ°u trá»¯ má»i thÃ´ng tin vá» accounts vÃ  cÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c qua cÃ¡c truy váº¥n.
Trong World State Trie cÃ³ Account Storage Trie, nÆ¡i cÃ¡c dá»¯ liá»‡u liÃªn káº¿t vá»›i account Ä‘Æ°á»£c lÆ°u trá»¯. NÃ³ chá»‰ liÃªn quan Ä‘áº¿n cÃ¡c contract account vÃ  má»i dá»¯ liá»‡u Ä‘Æ°á»£c Ã¡nh xáº¡ giá»¯a cÃ¡c sá»‘ nguyÃªn 32 byte.</p>

<p>Account State lÃ  cÃ¡c thÃ´ng tin vá» má»™t Ethereum account, nhÆ° balance, nonce, storage Root, codehash,â€¦ vÃ  lÃ  lÃ¡ cá»§a World State Trie.</p>

<h3 id="transaction-trie">Transaction Trie</h3>

<p>Transaction Trie lÆ°u trá»¯ cÃ¡c Tx trong Ethereum. Khi cÃ¡c Tx lÆ°u trá»¯ trong block, nÃ³ khÃ´ng thá»ƒ bá»‹ thay Ä‘á»•i. NÃ³ Ä‘Æ°á»£c xÃ¢y dá»±ng theo cáº¥u trÃºc Modified Merkel Patricia Trie, vÃ  chá»‰ cÃ³ node root má»›i Ä‘Æ°á»£c Ä‘Æ°a vÃ o trong block.</p>

<h3 id="transaction-receipt-triereceipt-trie">Transaction Receipt Trie(Receipt Trie)</h3>

<p>Transaction Receipt Trie lÆ°u trá»¯ Ä‘áº§u ra cá»§a cÃ¡c Txs. Äáº§u ra lÃ  káº¿t quáº£ cá»§a má»™t Tx mÃ  Ä‘Æ°á»£c cháº¡y thÃ nh cÃ´ng, bao gá»“m H(Txs), block number, gas Used, Ä‘á»‹a chá»‰ cá»§a contract.</p>

<h3 id="vÃ­-dá»¥-cáº¥u-trÃºc-cá»§a-world-state-má»™t-cÃ¡ch-Ä‘Æ¡n-giáº£n">VÃ­ dá»¥ cáº¥u trÃºc cá»§a World State (má»™t cÃ¡ch Ä‘Æ¡n giáº£n)</h3>

<p>Äá»ƒ Ä‘Æ¡n giáº£n, ta giáº£ sá»­ cÃ¡c node lÃ¡ cá»§a World State Trie chá»‰ bao gá»“m Ä‘á»‹a chá»‰ lÃ  sá»‘ dÆ° theo cáº·p Key - Value.
CÃ¡c loáº¡i thÃ´ng tin:</p>

<ul>
  <li>Leaf Node: node lÃ¡ cá»§a cÃ¢y, chá»©a cÃ¡c tráº¡ng thÃ¡i cá»§a 1 tÃ i khoáº£n cÃ³ Ä‘á»‹a chá»‰ lÃ  Key</li>
  <li>Branch Node: gá»“m 16 Ã´, lÃ  cÃ¡c tiá»n tá»‘ cá»§a Key.</li>
  <li>Extension Node: node chá»‰ cÃ³ 1 child</li>
  <li>Nibble: LÃ  pháº§n chung trong Key, 1 Nibble = 4 bits, lÆ°u trong keyend hoáº·c shared nibble.</li>
  <li>Prefixes:
    <ul>
      <li>0: extension node cÃ³ sá»‘ cháºµn Nibble</li>
      <li>1: extension node cÃ³ sá»‘ láº» Niblle</li>
      <li>2: leaf node, cÃ³ sá»‘ cháºµn Nibble</li>
      <li>3: leaf node, cÃ³ sá»‘ láº» Nibble.</li>
    </ul>
  </li>
</ul>

<p>Minh Hoáº¡:
World State Trie vá»›i 4 cáº·p Key - Value nhÆ° sau:</p>

<ul>
  <li>a711355: 45 ETH</li>
  <li>a77d337: 1 WEI</li>
  <li>a7f9365: 1.1 ETH</li>
  <li>a77d397: 0.12 ETH</li>
</ul>

<p><img src="https://samczsun.com/content/images/size/w1000/2021/05/YZGxe-1-.png" /></p>

<h2 id="kÃªt-luáº­n">KÃªt luáº­n</h2>

<p>á» trÃªn lÃ  má»™t sá»‘ khÃ¡i niá»‡m sÆ¡ bá»™ vá» Solidity vÃ  cáº¥u trÃºc cá»§a Ethereum, cá»¥ thá»ƒ vá» cÃ¡c State Trie.</p>]]></content><author><name></name></author><category term="[&quot;cs251&quot;]" /><summary type="html"><![CDATA[á» bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» Solidity vÃ  World State Trie]]></summary></entry></feed>